webpackJsonp([1],{

/***/ 1092:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": 559,
	"./af.js": 559,
	"./ar": 560,
	"./ar-dz": 561,
	"./ar-dz.js": 561,
	"./ar-kw": 562,
	"./ar-kw.js": 562,
	"./ar-ly": 563,
	"./ar-ly.js": 563,
	"./ar-ma": 564,
	"./ar-ma.js": 564,
	"./ar-sa": 565,
	"./ar-sa.js": 565,
	"./ar-tn": 566,
	"./ar-tn.js": 566,
	"./ar.js": 560,
	"./az": 567,
	"./az.js": 567,
	"./be": 568,
	"./be.js": 568,
	"./bg": 569,
	"./bg.js": 569,
	"./bm": 570,
	"./bm.js": 570,
	"./bn": 571,
	"./bn.js": 571,
	"./bo": 572,
	"./bo.js": 572,
	"./br": 573,
	"./br.js": 573,
	"./bs": 574,
	"./bs.js": 574,
	"./ca": 575,
	"./ca.js": 575,
	"./cs": 576,
	"./cs.js": 576,
	"./cv": 577,
	"./cv.js": 577,
	"./cy": 578,
	"./cy.js": 578,
	"./da": 579,
	"./da.js": 579,
	"./de": 580,
	"./de-at": 581,
	"./de-at.js": 581,
	"./de-ch": 582,
	"./de-ch.js": 582,
	"./de.js": 580,
	"./dv": 583,
	"./dv.js": 583,
	"./el": 584,
	"./el.js": 584,
	"./en-au": 585,
	"./en-au.js": 585,
	"./en-ca": 586,
	"./en-ca.js": 586,
	"./en-gb": 587,
	"./en-gb.js": 587,
	"./en-ie": 588,
	"./en-ie.js": 588,
	"./en-nz": 589,
	"./en-nz.js": 589,
	"./eo": 590,
	"./eo.js": 590,
	"./es": 591,
	"./es-do": 592,
	"./es-do.js": 592,
	"./es-us": 593,
	"./es-us.js": 593,
	"./es.js": 591,
	"./et": 594,
	"./et.js": 594,
	"./eu": 595,
	"./eu.js": 595,
	"./fa": 596,
	"./fa.js": 596,
	"./fi": 597,
	"./fi.js": 597,
	"./fo": 598,
	"./fo.js": 598,
	"./fr": 599,
	"./fr-ca": 600,
	"./fr-ca.js": 600,
	"./fr-ch": 601,
	"./fr-ch.js": 601,
	"./fr.js": 599,
	"./fy": 602,
	"./fy.js": 602,
	"./gd": 603,
	"./gd.js": 603,
	"./gl": 604,
	"./gl.js": 604,
	"./gom-latn": 605,
	"./gom-latn.js": 605,
	"./gu": 606,
	"./gu.js": 606,
	"./he": 607,
	"./he.js": 607,
	"./hi": 608,
	"./hi.js": 608,
	"./hr": 609,
	"./hr.js": 609,
	"./hu": 610,
	"./hu.js": 610,
	"./hy-am": 611,
	"./hy-am.js": 611,
	"./id": 233,
	"./id.js": 233,
	"./is": 612,
	"./is.js": 612,
	"./it": 613,
	"./it.js": 613,
	"./ja": 614,
	"./ja.js": 614,
	"./jv": 615,
	"./jv.js": 615,
	"./ka": 616,
	"./ka.js": 616,
	"./kk": 617,
	"./kk.js": 617,
	"./km": 618,
	"./km.js": 618,
	"./kn": 619,
	"./kn.js": 619,
	"./ko": 620,
	"./ko.js": 620,
	"./ky": 621,
	"./ky.js": 621,
	"./lb": 622,
	"./lb.js": 622,
	"./lo": 623,
	"./lo.js": 623,
	"./lt": 624,
	"./lt.js": 624,
	"./lv": 625,
	"./lv.js": 625,
	"./me": 626,
	"./me.js": 626,
	"./mi": 627,
	"./mi.js": 627,
	"./mk": 628,
	"./mk.js": 628,
	"./ml": 629,
	"./ml.js": 629,
	"./mr": 630,
	"./mr.js": 630,
	"./ms": 631,
	"./ms-my": 632,
	"./ms-my.js": 632,
	"./ms.js": 631,
	"./my": 633,
	"./my.js": 633,
	"./nb": 634,
	"./nb.js": 634,
	"./ne": 635,
	"./ne.js": 635,
	"./nl": 636,
	"./nl-be": 637,
	"./nl-be.js": 637,
	"./nl.js": 636,
	"./nn": 638,
	"./nn.js": 638,
	"./pa-in": 639,
	"./pa-in.js": 639,
	"./pl": 640,
	"./pl.js": 640,
	"./pt": 641,
	"./pt-br": 642,
	"./pt-br.js": 642,
	"./pt.js": 641,
	"./ro": 643,
	"./ro.js": 643,
	"./ru": 644,
	"./ru.js": 644,
	"./sd": 645,
	"./sd.js": 645,
	"./se": 646,
	"./se.js": 646,
	"./si": 647,
	"./si.js": 647,
	"./sk": 648,
	"./sk.js": 648,
	"./sl": 649,
	"./sl.js": 649,
	"./sq": 650,
	"./sq.js": 650,
	"./sr": 651,
	"./sr-cyrl": 652,
	"./sr-cyrl.js": 652,
	"./sr.js": 651,
	"./ss": 653,
	"./ss.js": 653,
	"./sv": 654,
	"./sv.js": 654,
	"./sw": 655,
	"./sw.js": 655,
	"./ta": 656,
	"./ta.js": 656,
	"./te": 657,
	"./te.js": 657,
	"./tet": 658,
	"./tet.js": 658,
	"./th": 659,
	"./th.js": 659,
	"./tl-ph": 660,
	"./tl-ph.js": 660,
	"./tlh": 661,
	"./tlh.js": 661,
	"./tr": 662,
	"./tr.js": 662,
	"./tzl": 663,
	"./tzl.js": 663,
	"./tzm": 664,
	"./tzm-latn": 665,
	"./tzm-latn.js": 665,
	"./tzm.js": 664,
	"./uk": 666,
	"./uk.js": 666,
	"./ur": 667,
	"./ur.js": 667,
	"./uz": 668,
	"./uz-latn": 669,
	"./uz-latn.js": 669,
	"./uz.js": 668,
	"./vi": 670,
	"./vi.js": 670,
	"./x-pseudo": 671,
	"./x-pseudo.js": 671,
	"./yo": 672,
	"./yo.js": 672,
	"./zh-cn": 673,
	"./zh-cn.js": 673,
	"./zh-hk": 674,
	"./zh-hk.js": 674,
	"./zh-tw": 675,
	"./zh-tw.js": 675
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 1092;

/***/ }),

/***/ 1099:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1121:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 1122:
/***/ (function(module, exports) {

/* (ignored) */

/***/ }),

/***/ 115:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LocationTracker; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_geolocation__ = __webpack_require__(677);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_background_geolocation__ = __webpack_require__(678);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_filter__ = __webpack_require__(107);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_filter___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_filter__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_notification__ = __webpack_require__(77);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var LocationTracker = (function () {
    function LocationTracker(zone, backgroundGeolocation, geolocation, notification, storage) {
        this.zone = zone;
        this.backgroundGeolocation = backgroundGeolocation;
        this.geolocation = geolocation;
        this.notification = notification;
        this.storage = storage;
        this.lat = 0;
        this.lng = 0;
    }
    LocationTracker.prototype.startTracking = function () {
        // Background Tracking
        var _this = this;
        var config = {
            desiredAccuracy: 0,
            stationaryRadius: 20,
            distanceFilter: 10,
            debug: false,
            interval: 5000
        };
        this.backgroundGeolocation.configure(config)
            .subscribe(function (location) {
            //console.log('BackgroundGeolocation:  ' + location.latitude + ',' + location.longitude);
            // Run update inside of Angular's zone
            _this.zone.run(function () {
                _this.lat = location.latitude;
                _this.lng = location.longitude;
            });
        }, function (err) {
            console.log(err);
        });
        // Foreground Tracking
        var options = {
            frequency: 3000,
            enableHighAccuracy: true
        };
        this.watch = this.geolocation.watchPosition(options).filter(function (p) { return p.code === undefined; }).subscribe(function (position) {
            //console.log("Position",position);
            // Run update inside of Angular's zone
            _this.zone.run(function () {
                _this.lat = position.coords.latitude;
                _this.lng = position.coords.longitude;
            });
        });
        // Turn ON the background-geolocation system.
        //disable dulu
        this.backgroundGeolocation.start();
    };
    LocationTracker.prototype.stopTracking = function () {
        console.log('stopTracking');
        this.backgroundGeolocation.finish();
        this.watch.unsubscribe();
    };
    LocationTracker.prototype.sendLocPandu = function (flag, noSpkPandu) {
        var _this = this;
        if (noSpkPandu === void 0) { noSpkPandu = 0; }
        var mDate = __WEBPACK_IMPORTED_MODULE_5_moment__().format('YYYY-MM-DD[T]HH:mm:ss');
        var username = this.notification.username;
        this.storage.get('profile').then(function (profile) {
            if (profile != null) {
                var panduLocMsg = {
                    nipPandu: username,
                    namaPetugas: profile.namaPetugas,
                    longitude: _this.lng,
                    latitude: _this.lat,
                    tglAktivitas: mDate,
                    flag: flag,
                    noSpkPandu: noSpkPandu
                };
                _this.notification.sendMessage(JSON.stringify(panduLocMsg), "/pandu/location/" + username);
            }
        });
    };
    LocationTracker.prototype.startPanduLocation = function (param, noSpkPandu) {
        var _this = this;
        if (noSpkPandu === void 0) { noSpkPandu = 0; }
        if (param) {
            this.startTracking();
            this.intMulaiPandu = setInterval(function () {
                _this.sendLocPandu(1, noSpkPandu);
            }, 1 * 15 * 1000);
        }
        else {
            console.log('clear interval pandu location');
            this.stopTracking();
            clearInterval(this.intMulaiPandu);
        }
    };
    return LocationTracker;
}());
LocationTracker = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgZone"],
        __WEBPACK_IMPORTED_MODULE_2__ionic_native_background_geolocation__["a" /* BackgroundGeolocation */],
        __WEBPACK_IMPORTED_MODULE_1__ionic_native_geolocation__["a" /* Geolocation */],
        __WEBPACK_IMPORTED_MODULE_6__providers_notification__["a" /* Notification */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_storage__["b" /* Storage */]])
], LocationTracker);

//# sourceMappingURL=location-tracker.js.map

/***/ }),

/***/ 1165:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AbsensiData; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config_app_config__ = __webpack_require__(49);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the RencanaData provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var AbsensiData = (function () {
    function AbsensiData(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        // private sufApi = "api/public/absensi_pandu";
        this.sufApi = "vasa-jboss-perencanaanPandu/public/absensi_pandu";
        this.spkApiUrl = "";
        console.log('Hello AbsensiData Provider');
    }
    /**
       * load detail spk by id
       *
       * @param nip
       * @param tglMasuk
       */
    // Get Spk by providing spk id
    AbsensiData.prototype.refreshAbsensi = function (nip, tglMasuk) {
        var headers = new Headers();
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/mobile_refresh_absensi_pandu?nip=" + nip + "&tglMasuk=" + tglMasuk)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    return AbsensiData;
}());
AbsensiData = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_3__config_app_config__["a" /* AppConfig */]])
], AbsensiData);

//# sourceMappingURL=absensi-data.js.map

/***/ }),

/***/ 1166:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RencanaData; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__config_app_config__ = __webpack_require__(49);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the RencanaData provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var RencanaData = (function () {
    function RencanaData(http, appConfig) {
        this.http = http;
        this.appConfig = appConfig;
        // private sufApi = "api/mobile";
        this.sufApi = "vasa-jboss-permohonan/mobile";
        this.spkApiUrl = "";
        console.log('Hello RencanaData Provider');
    }
    RencanaData.prototype.load = function () {
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/pmh_pandu/list_perencanaan?kodeCabang=" + localStorage.getItem("kodecabang"))
            .map(function (res) { return res.json(); });
    };
    return RencanaData;
}());
RencanaData = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_3__config_app_config__["a" /* AppConfig */]])
], RencanaData);

//# sourceMappingURL=rencana-data.js.map

/***/ }),

/***/ 1169:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SettingsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_pnetwork__ = __webpack_require__(51);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/*
  Generated class for the Settings page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var SettingsPage = (function () {
    function SettingsPage(navCtrl, pnetwork) {
        this.navCtrl = navCtrl;
        this.pnetwork = pnetwork;
    }
    SettingsPage.prototype.ionViewDidLoad = function () {
        console.log('Hello SettingsPage Page');
        this.pnetwork.listenNetworkEvents();
        this.getDefaults();
    };
    SettingsPage.prototype.getDefaults = function () {
        if (localStorage.getItem('mqtt_url') != null) {
            this.mqtt_url = localStorage.getItem('mqtt_url');
            this.mqtt_port = localStorage.getItem('mqtt_port');
        }
        else {
            this.mqtt_url = 'test.mosquitto.org';
            this.mqtt_port = '8080';
        }
    };
    SettingsPage.prototype.setDefaults = function () {
        this.mqtt_url = localStorage.setItem('mqtt_url', this.mqtt_url);
        this.mqtt_port = localStorage.setItem('mqtt_port', this.mqtt_port);
    };
    return SettingsPage;
}());
SettingsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-settings',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\settings\settings.html"*/'<!--\n\n  Generated template for the Settings page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title>Settings</ion-title>\n\n\n\n    <span [class]="pnetwork.mqtt_state==true ? \'network_state_on\':\'network_state_off\'"></span>\n\n  </ion-navbar>\n\n\n\n</ion-header>\n\n\n\n\n\n<ion-content padding class="cpage">\n\n\n\n  <ion-list>\n\n    <ion-item>\n\n      <ion-label fixed>MQTT Url :</ion-label>\n\n      <ion-input [(ngModel)]="mqtt_url" name="mqtt_url"></ion-input>\n\n    </ion-item>\n\n    <ion-item>\n\n      <ion-label fixed>MQTT Port :</ion-label>\n\n      <ion-input [(ngModel)]="mqtt_port" name="mqtt_port"></ion-input>\n\n    </ion-item>\n\n    <button ion-button block (click)="setDefaults()">Save Changes</button>\n\n  </ion-list>\n\n\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\settings\settings.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */], __WEBPACK_IMPORTED_MODULE_2__providers_pnetwork__["a" /* Pnetwork */]])
], SettingsPage);

//# sourceMappingURL=settings.js.map

/***/ }),

/***/ 1170:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Idformat; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};


/*
  Generated class for the Idformat pipe.

  See https://angular.io/docs/ts/latest/guide/pipes.html for more info on
  Angular 2 Pipes.
*/
var Idformat = (function () {
    function Idformat() {
    }
    /*
      Takes a value and makes it lowercase.
     */
    Idformat.prototype.transform = function (value, args) {
        value = value + ''; // make sure it's a string
        return __WEBPACK_IMPORTED_MODULE_1_moment__(value).format('DD-MM-YYYY HH:mm:ss');
    };
    return Idformat;
}());
Idformat = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
        name: 'idformat'
    }),
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])()
], Idformat);

//# sourceMappingURL=idformat.js.map

/***/ }),

/***/ 1171:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ComponentsModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_common__ = __webpack_require__(80);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_forms__ = __webpack_require__(33);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__status_status__ = __webpack_require__(1172);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__rawdata_rawdata__ = __webpack_require__(1173);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__network_state_network_state__ = __webpack_require__(1174);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__batal_pandu_batal_pandu__ = __webpack_require__(732);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__adjust_time_adjust_time__ = __webpack_require__(733);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__list_petugas_pandu_list_petugas_pandu__ = __webpack_require__(726);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__tolak_spk_pandu_tolak_spk_pandu__ = __webpack_require__(695);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__alert_tolak_spk_alert_tolak_spk__ = __webpack_require__(694);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__ = __webpack_require__(345);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



/**
 * Component declaration
 */









var ComponentsModule = (function () {
    function ComponentsModule() {
    }
    return ComponentsModule;
}());
ComponentsModule = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
        declarations: [
            __WEBPACK_IMPORTED_MODULE_6__batal_pandu_batal_pandu__["a" /* BatalPanduComponent */],
            __WEBPACK_IMPORTED_MODULE_7__adjust_time_adjust_time__["a" /* AdjustTimeComponent */],
            __WEBPACK_IMPORTED_MODULE_3__status_status__["a" /* Status */],
            __WEBPACK_IMPORTED_MODULE_4__rawdata_rawdata__["a" /* Rawdata */],
            __WEBPACK_IMPORTED_MODULE_8__list_petugas_pandu_list_petugas_pandu__["a" /* ListPetugasPanduComponent */],
            __WEBPACK_IMPORTED_MODULE_9__tolak_spk_pandu_tolak_spk_pandu__["a" /* TolakSpkPanduComponent */],
            __WEBPACK_IMPORTED_MODULE_10__alert_tolak_spk_alert_tolak_spk__["a" /* AlertTolakSpkComponent */],
            __WEBPACK_IMPORTED_MODULE_5__network_state_network_state__["a" /* NetworkStateComponent */]
        ],
        imports: [
            __WEBPACK_IMPORTED_MODULE_1__angular_common__["b" /* CommonModule */],
            __WEBPACK_IMPORTED_MODULE_2__angular_forms__["b" /* FormsModule */],
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_6__batal_pandu_batal_pandu__["a" /* BatalPanduComponent */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_7__adjust_time_adjust_time__["a" /* AdjustTimeComponent */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_5__network_state_network_state__["a" /* NetworkStateComponent */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_4__rawdata_rawdata__["a" /* Rawdata */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_3__status_status__["a" /* Status */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_8__list_petugas_pandu_list_petugas_pandu__["a" /* ListPetugasPanduComponent */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_9__tolak_spk_pandu_tolak_spk_pandu__["a" /* TolakSpkPanduComponent */]),
            __WEBPACK_IMPORTED_MODULE_11_ionic_angular_module__["b" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_10__alert_tolak_spk_alert_tolak_spk__["a" /* AlertTolakSpkComponent */])
        ],
        exports: [
            __WEBPACK_IMPORTED_MODULE_6__batal_pandu_batal_pandu__["a" /* BatalPanduComponent */],
            __WEBPACK_IMPORTED_MODULE_7__adjust_time_adjust_time__["a" /* AdjustTimeComponent */],
            __WEBPACK_IMPORTED_MODULE_4__rawdata_rawdata__["a" /* Rawdata */],
            __WEBPACK_IMPORTED_MODULE_3__status_status__["a" /* Status */],
            __WEBPACK_IMPORTED_MODULE_5__network_state_network_state__["a" /* NetworkStateComponent */],
            __WEBPACK_IMPORTED_MODULE_8__list_petugas_pandu_list_petugas_pandu__["a" /* ListPetugasPanduComponent */],
            __WEBPACK_IMPORTED_MODULE_9__tolak_spk_pandu_tolak_spk_pandu__["a" /* TolakSpkPanduComponent */],
            __WEBPACK_IMPORTED_MODULE_10__alert_tolak_spk_alert_tolak_spk__["a" /* AlertTolakSpkComponent */]
        ],
        schemas: [__WEBPACK_IMPORTED_MODULE_0__angular_core__["CUSTOM_ELEMENTS_SCHEMA"]]
    })
], ComponentsModule);

//# sourceMappingURL=components.module.js.map

/***/ }),

/***/ 1172:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Status; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_mqtt__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_mqtt_transport_service__ = __webpack_require__(237);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the Status component.
 *
 * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html
 * for more info on Angular Components.
 */
var Status = (function () {
    function Status(_mqService) {
        this._mqService = _mqService;
    }
    Status.prototype.ngOnInit = function () {
        console.log('Status init');
        this.state = this._mqService.state
            .map(function (state) { return __WEBPACK_IMPORTED_MODULE_2__services_mqtt_transport_service__["a" /* TransportState */][state]; });
    };
    return Status;
}());
Status = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'mq-status',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\status\status.html"*/'<div class="col-xs-2 pull-right">\n\n  <p> <span id="status">STATUS: {{state|async}} </span> </p>\n\n</div>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\status\status.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_mqtt__["a" /* MQTTService */]])
], Status);

//# sourceMappingURL=status.js.map

/***/ }),

/***/ 1173:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Rawdata; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_mqtt__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__services_config_config_service__ = __webpack_require__(121);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/**
 * Generated class for the Rawdata component.
 *
 * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html
 * for more info on Angular Components.
 */
var Rawdata = (function () {
    /** Constructor */
    function Rawdata(_mqService, _configService) {
        var _this = this;
        this._mqService = _mqService;
        this._configService = _configService;
        // Array of historic message (bodies)
        this.mq = [];
        // A count of messages received
        this.count = 0;
        /** Callback on_connect to queue */
        this.on_connect = function () {
            // Store local reference to Observable
            // for use with template ( | async )
            _this.messages = _this._mqService.messages;
            // Subscribe a function to be run on_next message
            _this.messages.subscribe(_this.on_next);
        };
        /** Consume a message from the _mqService */
        this.on_next = function (message) {
            // Store message in "historic messages" queue
            _this.mq.push(message.toString() + '\n');
            // Count it
            _this.count++;
        };
        this.on_error = function () {
            console.error('Ooops, error in RawDataComponent');
        };
    }
    Rawdata.prototype.ngOnInit = function () {
        var _this = this;
        // Get configuration from config service...
        this._configService.getConfig('assets/api/config.json').then(function (config) {
            // ... then pass it to (and connect) the message queue:
            _this._mqService.configure(config);
            _this._mqService.try_connect()
                .then(_this.on_connect)
                .catch(_this.on_error);
        });
        setInterval(function () {
            _this._mqService.publishTopic("Test Message " + new Date(), '/test/topic');
        }, 5 * 60 * 1000);
    };
    Rawdata.prototype.ngOnDestroy = function () {
        this._mqService.disconnect();
    };
    return Rawdata;
}());
Rawdata = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'mq-rawdata',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\rawdata\rawdata.html"*/'<mq-status></mq-status>\n\n\n\n<div id="raw">\n\n\n\n    <h2>Messages</h2>\n\n    <p>{{count}} total</p>\n\n\n\n    <h3 *ngIf="count">Latest:</h3>\n\n    <pre>{{messages | async}}</pre>\n\n\n\n    <div *ngIf="mq.length" class="panel panel-default">\n\n        <div class="panel-heading">\n\n            <span>History:</span>\n\n        </div>\n\n        <div class="panel-body" class="debug-mq-panel">\n\n            <ol reversed>\n\n                <li *ngFor="let m of mq"><pre>{{m}}</pre></li>\n\n            </ol>\n\n        </div>\n\n    </div>\n\n</div>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\rawdata\rawdata.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_1__services_mqtt__["a" /* MQTTService */], __WEBPACK_IMPORTED_MODULE_2__services_config_config_service__["a" /* ConfigService */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_mqtt__["a" /* MQTTService */],
        __WEBPACK_IMPORTED_MODULE_2__services_config_config_service__["a" /* ConfigService */]])
], Rawdata);

//# sourceMappingURL=rawdata.js.map

/***/ }),

/***/ 1174:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return NetworkStateComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__ionic_native_network__ = __webpack_require__(116);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var NetworkStateComponent = (function () {
    function NetworkStateComponent(network) {
        var _this = this;
        this.network = network;
        console.log('Hello NetworkStateComponent Component');
        this.text = 'OL';
        setTimeout(function () {
            console.log("Prepare network status");
            _this.network.onConnect().subscribe(function (data) {
                _this.text = "ONLINE";
                setTimeout(function () {
                    if (_this.network.type === 'wifi') {
                        console.log('we got a wifi connection, woohoo!');
                        _this.text = "we got a wifi connection, woohoo!";
                    }
                }, 3000);
            }, function (error) { return console.error(error); });
            _this.network.onDisconnect().subscribe(function (data) {
                _this.text = "OFFLINE";
            }, function (error) { return console.error(error); });
            console.log("Network status is", _this.text);
        }, 3000);
    }
    NetworkStateComponent.prototype.ionViewDidEnter = function () {
        console.log("enter network state component");
    };
    return NetworkStateComponent;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Input"])('state'),
    __metadata("design:type", Object)
], NetworkStateComponent.prototype, "netstate", void 0);
NetworkStateComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'network-state',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\network-state\network-state.html"*/'<!-- Generated template for the NetworkStateComponent component -->\n\n<div>\n\n  {{text}}\n\n</div>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\network-state\network-state.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__ionic_native_network__["a" /* Network */]])
], NetworkStateComponent);

//# sourceMappingURL=network-state.js.map

/***/ }),

/***/ 1175:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RemarkComponentModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__remark__ = __webpack_require__(731);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};



var RemarkComponentModule = (function () {
    function RemarkComponentModule() {
    }
    return RemarkComponentModule;
}());
RemarkComponentModule = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
        declarations: [
            __WEBPACK_IMPORTED_MODULE_2__remark__["a" /* RemarkComponent */],
        ],
        imports: [
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["h" /* IonicPageModule */].forChild(__WEBPACK_IMPORTED_MODULE_2__remark__["a" /* RemarkComponent */]),
        ],
        exports: [
            __WEBPACK_IMPORTED_MODULE_2__remark__["a" /* RemarkComponent */]
        ]
    })
], RemarkComponentModule);

//# sourceMappingURL=remark.module.js.map

/***/ }),

/***/ 121:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ConfigService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(42);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * An injected class which grabs the application
 * config variables (e.g. MQ  credentials)
 * for the user application.
 *
 * This makes an AJAX request to the server
 * api containing some user token and secret
 *
 * @type ConfigService
 */
var ConfigService = (function () {
    // TODO: Provide a user object to the constructor
    //       to allow retrieval of per-user configs
    //       or from a specific URL.
    function ConfigService(_http) {
        this._http = _http;
    }
    /** Make an http request for a config file, and
      * return a Promise for its resolution.
      */
    ConfigService.prototype.getConfig = function (path) {
        return this._http.get(path)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    return ConfigService;
}());
ConfigService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */]])
], ConfigService);

//# sourceMappingURL=config.service.js.map

/***/ }),

/***/ 157:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mqtt_service__ = __webpack_require__(236);
/* harmony namespace reexport (by used) */ __webpack_require__.d(__webpack_exports__, "a", function() { return __WEBPACK_IMPORTED_MODULE_0__mqtt_service__["a"]; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__transport_service__ = __webpack_require__(237);
/* unused harmony namespace reexport */


//# sourceMappingURL=index.js.map

/***/ }),

/***/ 163:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RealisasiPanduPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_observable_of__ = __webpack_require__(148);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_add_observable_of___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_add_observable_of__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__ = __webpack_require__(101);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_badge__ = __webpack_require__(100);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_sqlite__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_device__ = __webpack_require__(122);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__detail_spk_detail_spk__ = __webpack_require__(728);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__providers_spk_offline_spk_offline__ = __webpack_require__(734);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_timers__ = __webpack_require__(109);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_timers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_timers__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__config_app_config__ = __webpack_require__(49);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};
















var RealisasiPanduPage = (function () {
    function RealisasiPanduPage(navCtrl, loadingCtrl, pnetwork, storage, events, alertCtrl, toastCtrl, spkData, badge, _sql, sqlite, platform, params, device, appConfig, spkOffline) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.loadingCtrl = loadingCtrl;
        this.pnetwork = pnetwork;
        this.storage = storage;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.spkData = spkData;
        this.badge = badge;
        this._sql = _sql;
        this.sqlite = sqlite;
        this.platform = platform;
        this.params = params;
        this.device = device;
        this.appConfig = appConfig;
        this.spkOffline = spkOffline;
        this.spk = [];
        this.datas = [];
        this.profile = [];
        this.classCondition = false;
        this.condNetwork = true;
        this.tglMulai = __WEBPACK_IMPORTED_MODULE_8_moment__().subtract(5, 'day').format('YYYY-MM-DD');
        this.tglSelesai = __WEBPACK_IMPORTED_MODULE_8_moment__().add(1, 'day').format('YYYY-MM-DD');
        this.kapalTunda = [];
        this.objData = [];
        this.pnetwork.listenNetworkEvents();
        this.kapalTunda = params.get('tundas');
        this.platform.ready().then(function () {
            _this.storage.get('panduid').then(function (panduid) {
                _this.panduid_flag = panduid;
            });
            //handling using sqlite on device
            if (_this.platform.is('ios') || _this.platform.is('android')) {
                _this.deviceid = _this.device.uuid;
                console.log("getting from android or ios", _this.datas);
            }
            else {
                _this.deviceid = "BrowserDev";
            }
            /**
             * get online data
             * ketika refresh manual / pull down
             */
            _this.events.subscribe('refresh:data', function (state) {
                if (state)
                    _this.getOnlineData();
            });
            /**
             * sync online data
             * ketika ada event network connected
             */
            _this.events.subscribe('network:state', function (state) {
                setTimeout(function () {
                    if (state)
                        _this.getOnlineData();
                }, 10 * 1000);
            });
        });
    }
    RealisasiPanduPage.prototype.ngOnInit = function () {
        /**
         * subscribe data from observable subject
         * disini object packageData akan selalu diupdate oleh offline method
         */
        var _this = this;
        this.spkOffline.packageData.subscribe(function (data) {
            _this.datas = data;
        });
        Object(__WEBPACK_IMPORTED_MODULE_14_timers__["setInterval"])(function () {
            _this.spkOffline.getMyOfflineData(_this.tglMulai, _this.tglSelesai);
        }, 10000);
    };
    /**
     * Loading present
     */
    RealisasiPanduPage.prototype.loadingPressent = function () {
        this.loader = this.loadingCtrl.create({
            content: "Please wait..."
        });
        this.loader.onWillDismiss(function (data) {
            console.log("dismiss", data);
        });
    };
    /**
     * load every enter page
     */
    RealisasiPanduPage.prototype.ionViewDidEnter = function () {
        this.badge.clear();
        this.badge.set(0);
        this.runPendingState();
        this.loadData();
        /**
         * cek interval data setiap masuk
         * page realisasi
         */
        // this.cekDataInterval()      
    };
    RealisasiPanduPage.prototype.ionViewWillLeave = function () {
        /**
         * clear interval data
         * setiap keluar page realisasi
         */
        // clearInterval(this.t_timer)
    };
    /**
     * monitoring network
     */
    RealisasiPanduPage.prototype.networkCondition = function () {
        var _this = this;
        this.events.subscribe("network:state", function (state) {
            _this.condNetwork = state;
        });
    };
    /**
     * First load page
     *
     * do networkCondition
     * do loadData
     * do save badgeState to panduid key
     */
    RealisasiPanduPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.networkCondition();
        this.events.publish('notif:state', false);
        //set notification 0/clear
        this.events.publish('notif:mqttbadge', 0);
        this.storage.get('panduid').then(function (panduid) {
            _this.badge_state = panduid;
        });
        // this.loadData()
    };
    /**
     * Open Detail Realisasi
     *
     * @param pageid
     */
    RealisasiPanduPage.prototype.openDetail = function (pageid, index, status, msg_state) {
        var _this = this;
        var loading2 = this.loadingCtrl.create({
            content: 'Please wait...'
        });
        console.log('opendetail', pageid, this.datas[index]);
        this.loadingPressent();
        this._sql.getDetailSpkOfflineData(pageid).then(function (datas) {
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_9__detail_spk_detail_spk__["a" /* DetailSpkPage */], { id: pageid,
                datas: datas['vjson'],
                tundas: _this.datas[index].listKapalTunda,
                status: status,
                msg_state: msg_state
            });
            _this.loader.dismiss();
        }, function (error) {
            console.log("Error detail spk", error);
            _this.loader.dismiss();
        })
            .catch(function (err) {
            console.log("Error detail spk", err);
            _this.toastCtrl.create({
                message: 'ERROR : Tidak dapat menemukan detail SPK',
                duration: 5000,
                position: 'bottom'
            }).present();
            _this.loader.dismiss();
        });
    };
    /**
     * Load Data realisasi
     *
     * @param tglMulai, tglSelesai
     */
    RealisasiPanduPage.prototype.loadData = function () {
        /**
         * show loading
         */
        this.loadingPressent();
        /**
         * first get online data
         *
         */
        this.getOnlineData();
        /**
         * get offline data from db
         */
        // this.getMyOfflineData();
        this.spkOffline.getMyOfflineData(this.tglMulai, this.tglSelesai);
    }; //end of loadData
    /**
     * Refresh event
     *
     * @param refresher
     */
    RealisasiPanduPage.prototype.doRefresh = function (refresher) {
        this.getOnlineData().then(function () {
            refresher.complete();
            console.log("DEBUG: refresh complete", true);
        }, function (err) {
            refresher.complete();
            console.log("DEBUG: refresh complete", false);
        });
    };
    /**
     * Offline data from sqlite
     *
     */
    RealisasiPanduPage.prototype.getMyOfflineData = function () {
        var _this = this;
        this.datas = [];
        this._sql.getSpkOfflineData(this.tglMulai, this.tglSelesai).then(function (data) {
            /**
             * push to datas object
             * variable datas pada directive realisasi-pandu.html
             * mengacu pada index array disini.
             */
            // console.log("getting offline data from db",data);
            var v_offline = [];
            for (var i in data) {
                // console.log(data);
                _this.datas.push([
                    { 'data': JSON.parse(data[i]['vjson']) },
                    { 'spk_id': data[i]['spk_id'] },
                    { 'status': data[i]['status'] },
                    { 'msg_state': data[i]['msg_state'] }
                ]);
            }
            // console.log("Data offline", this.datas);
        });
    };
    /**
     * Online data from server
     *
     */
    RealisasiPanduPage.prototype.getOnlineData = function () {
        var _this = this;
        console.log('load from online data');
        return new Promise(function (resolve, reject) {
            _this.spkData.loadRealisasi(_this.tglMulai, _this.tglSelesai).then(function (data) {
                // this.datas = data;
                _this.loader.dismiss();
                /**
                 * save spk to db
                 */
                _this._sql.saveSpkToSqlite(data).then(function (cb) {
                    console.log("call back", cb);
                });
                /**
                 * save detail spk to db
                 */
                data.forEach(function (element) {
                    // console.log("id element",element.id);
                    _this.spkData.loadDetails(element.id).then(function (datas) {
                        _this._sql.saveDetailSpkToSqlite(JSON.stringify(datas), element.id);
                    });
                });
                /**
                 * default data
                 */
                // this.getMyOfflineData()
                _this.spkOffline.getMyOfflineData(_this.tglMulai, _this.tglSelesai);
                if (_this.t_timer) {
                    console.log("clear value timer", _this.t_timer._id);
                    Object(__WEBPACK_IMPORTED_MODULE_14_timers__["clearInterval"])(_this.t_timer);
                }
                resolve();
            }, function (err) {
                console.log("online error load data spk", err);
                _this.loader.dismiss();
                _this.spkOffline.getMyOfflineData(_this.tglMulai, _this.tglSelesai);
                resolve();
            }).catch(function (errRejected) {
                console.log("catch rejected", errRejected);
                _this.spkOffline.getMyOfflineData(_this.tglMulai, _this.tglSelesai);
                _this.loader.dismiss();
                resolve();
            });
        });
    };
    /**
     * Cek data online
     * setiap 10 menit
     *
     */
    RealisasiPanduPage.prototype.cekDataInterval = function () {
        var _this = this;
        this.t_timer = Object(__WEBPACK_IMPORTED_MODULE_14_timers__["setInterval"])(function () {
            _this.getOnlineData();
            _this.runPendingState();
            console.log("new val timer", _this.t_timer);
        }, 1 * 60 * 1000);
    };
    RealisasiPanduPage.prototype.runPendingState = function () {
        var _this = this;
        this._sql.getRealisasiPending().then(function (data) {
            var _loop_1 = function (i) {
                console.log("DEBUG: Run data pending from realisasi", i);
                var flow = JSON.parse(data[i].vjson);
                _this.spkData.realisasiPandu(flow.jenisDermaga, JSON.parse(data[i].vjson));
                _this.spkData.postProgressBulk(JSON.parse(data[i].progress));
                _this.spkData.putProgressDone(data[i].spk_id).subscribe(function (resp) {
                    console.log("Progress done", resp);
                    if (resp.status == 200) {
                        _this._sql.updateRealisasiLog(data[i].spk_id);
                        _this.events.publish('refresh:data', true);
                    }
                });
            };
            for (var i in data) {
                _loop_1(i);
            }
        });
    };
    /**
     * Untuk repair data realisasi
     * yang status created di lokal tapi
     * flag done dari server masih 1
     *
     */
    RealisasiPanduPage.prototype.repairRealisasiData = function () {
    };
    RealisasiPanduPage.prototype.sendPanduRealization = function () {
        var _this = this;
        console.log("COBA DEBUG REALISASI: online");
        var _loop_2 = function (data) {
            console.log("data a:", data);
            if ((data[3]['msg_state'] == 'P' && data[2]['status'] == 2) || (data[3]['msg_state'] == 'D' && data[2]['status'] == 2)) {
                var data_sign_1;
                this_1._sql.getRealisasiMqttLogOffline(data[0].data.id).then(function (dataRealisasi) {
                    data_sign_1 = JSON.parse(dataRealisasi['vjson']);
                    console.log("dataRealisasi: ", dataRealisasi);
                    console.log("data_sign : ", data_sign_1);
                    //console.log("sign : ",data_sign.sign);
                    var data_format = {
                        "remark": "",
                        "asalDermaga": 0,
                        "catatan": "",
                        "flagApbs": 0,
                        "flagRampdoor": 0,
                        "nipPandu": _this.profile.nipPandu,
                        "username": _this.profile.nipPandu,
                        "jenisKep": "normal",
                        "jenisRealisasi": 0,
                        "namaPandu": _this.profile.namaPetugas,
                        "mobileAppVersion": _this.appConfig['version'],
                        "posisiKapal": "1",
                        "status": 0,
                        "statusPelaksanaan": 0,
                        "statusSiklusPandu": 1,
                        "sign": "",
                        "msgId": data.id
                    };
                    if (data_sign_1.sign == 'undefined' || data_sign_1.sign == null)
                        data_format.sign = "";
                    else
                        data_format.sign = data_sign_1.sign;
                    for (var i in data_format) {
                        data[i] = data_format[i];
                    }
                    console.log("data sa:", data);
                    console.log("data_sign : ", data_sign_1);
                    console.log("jenis dermaga :", data[0].data.jenisDermaga);
                    if (_this.pnetwork.network_state) {
                        _this.spkData.realisasiPandu(data[0].data.jenisDermaga, data_sign_1);
                        _this.realisasiAction("C", data_sign_1);
                    }
                    else {
                        _this.realisasiAction("P", data_sign_1);
                    }
                });
            }
        };
        var this_1 = this;
        //console.log("data :",this.datas);
        for (var _i = 0, _a = this.datas; _i < _a.length; _i++) {
            var data = _a[_i];
            _loop_2(data);
        }
    };
    RealisasiPanduPage.prototype.realisasiAction = function (state, data) {
        var _this = this;
        //console.log("COBA DEBUG REALISASI ACTION: online");
        console.log("realisasiAction data:", data);
        this._sql.saveRealisasiToSqlite(data).then(function () {
            _this._sql.saveRealisasiMqttLog(data, state).then(function () {
                /**
                * Jika menggunakan offline data
                */
                _this._sql.updateSpkStatus(data.id, state);
            });
        });
        /**
         * kriim tahapan pandu manual
         *
         */
        this.postTahapanBulk(data.nomorSpk, data.nomorSpkPandu, data.id, data);
    };
    RealisasiPanduPage.prototype.postTahapanBulk = function (nomorSpk, nomorSpkPandu, spkId, data) {
        var sum_el;
        sum_el = document.querySelectorAll('.tahapanPandu');
        var data_format = {
            "nomorSpk": nomorSpk,
            "nomorSpkPandu": nomorSpkPandu,
            "userCreated": this.profile.nipPandu,
            "progressPemanduan": []
        };
        // console.log("Total element", sum_el);
        for (var idx = 0; idx < sum_el.length; idx++) {
            var id = document.querySelectorAll('.tahapanPandu')[idx].getAttribute('data');
            // let val:any = document.querySelectorAll('.tahapanPandu').value
            var val = document.querySelectorAll('.tahapanPandu')[idx].value;
            var title = document.querySelectorAll('.tahapanPandu')[idx].getAttribute('title');
            data_format.progressPemanduan.push({
                "idTahapanPandu": id,
                "tglTahapan": __WEBPACK_IMPORTED_MODULE_8_moment__().format('YYYY-MM-DD[T]') + val,
                "title": title
            });
        }
        /**
         * kirim progress bulk manual input
         * menggunakn HTTP
         */
        console.log("postProgressBulk data:", data);
        this.spkData.postProgressBulk(data_format);
        /**
         * kirim progress bulk manual input
         * menggunakan mqtt
         * @topic /progress/manual/pandu
         */
        // this.notification.sendMessage(JSON.stringify(data_format), '/progress/manual/pandu');
        this._sql.updateProgressRealisasi(spkId, JSON.stringify(data_format));
        this._sql.saveAddjusttimeMqttLog(data);
    };
    return RealisasiPanduPage;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["c" /* Content */])
], RealisasiPanduPage.prototype, "content", void 0);
RealisasiPanduPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-realisasi-pandu',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\realisasi-pandu\realisasi-pandu.html"*/'<!--\n\n  Generated template for the RealisasiPandu page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <!--<ion-title>SPK Hari Ini</ion-title>-->\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n    <span [class]="pnetwork.network_state==true ? \'network_state_on\':\'network_state_off\'"></span>\n\n    \n\n  </ion-navbar>\n\n\n\n</ion-header>\n\n\n\n<ion-content>\n\n  <ion-toolbar color="putih">\n\n    <div text-center >SPK HARI INI </div>\n\n  </ion-toolbar>\n\n</ion-content>\n\n<ion-fab right top class="buttonFab">\n\n  <button ion-fab (click)="sendPanduRealization()" ><ion-icon name="sync"></ion-icon></button>  \n\n</ion-fab>\n\n<ion-content class="cpage ndContent">\n\n  <ion-card  (click)="openDetail(data[0][\'data\'].id, i, data[2][\'status\'], data[3][\'msg_state\'])" *ngFor="let data of datas; let i=index" tappable>\n\n    <ion-card-content no-padding>\n\n      <ion-row>\n\n        <ion-col *ngIf="panduid_flag != data[0][\'data\'].id" col-3 [ngClass]="(data[2][\'status\'] == 1 ? \'mint-green-box\' : \'green-box\')">\n\n          <!-- <img [src]="(data[2][\'status\'] == 1 && data[3][msg_state] == \'D\' ) ? \'assets/img/unfinished.png\':\'assets/img/on-going.png\'">\n\n          <img [src]="(data[2][\'status\'] == 1 && data[3][msg_state] == \'C\' ) ? \'assets/img/finished.png\':\'assets/img/on-going.png\'"> -->\n\n          \n\n          <img *ngIf="data[3][\'msg_state\'] == \'P\' && data[2][\'status\'] == 2" src="assets/img/on-going.png">\n\n          <img *ngIf="data[3][\'msg_state\'] == \'D\' && data[2][\'status\'] == 2" src="assets/img/on-going.png">\n\n          <img *ngIf="data[3][\'msg_state\'] == \'C\' && data[2][\'status\'] == 2" src="assets/img/finished.png">\n\n          <img *ngIf="(data[3][\'msg_state\'] == null && data[2][\'status\'] == 1) || (data[3][\'msg_state\'] == \'P\' && data[2][\'status\'] == 1)" src="assets/img/unfinished.png">\n\n          \n\n        </ion-col>\n\n\n\n        <ion-col *ngIf="panduid_flag == data[0][\'data\'].id" col-3 [ngClass]="(\'notif-pandu\')">\n\n          <img [src]="data[2][\'status\'] == 1 ? \'assets/img/unfinished.png\':\'assets/img/on-going.png\'">\n\n        </ion-col>\n\n\n\n        <ion-col [ngClass]="(panduid_flag == data[0][\'data\'].id ||  ((data[3][\'msg_state\'] == \'P\' && data[2][\'status\'] == 2) || (data[3][\'msg_state\'] == \'D\' && data[2][\'status\'] == 2)) ? \'notif-pandu-col\':\'notif-pandu-col-ds\')">\n\n          <div *ngIf="panduid_flag == data[0][\'data\'].id" class="overlay">ON PROGRESS</div>\n\n          <div *ngIf="(data[3][\'msg_state\'] == \'P\' && data[2][\'status\'] == 2) || (data[3][\'msg_state\'] == \'D\' && data[2][\'status\'] == 2)" class="overlay">WAITING FOR SYNCHRONIZE</div>\n\n          <ion-row>\n\n            <ion-col><h2>{{ data[0][\'data\'].namaKapal}}</h2></ion-col>\n\n            <ion-col align="right">{{ data[0][\'data\'].jamPenetapanPandu | idformat }}</ion-col>\n\n          </ion-row>\n\n          <ion-row>\n\n          <ion-col col-8>\n\n            <ion-row>\n\n              <ion-col col-3>PPK1</ion-col>\n\n              <ion-col col-9>{{data[0][\'data\'].noPpk1}}</ion-col>\n\n              <!-- <ion-col col-6 align="right">Penggunaan Kapal Tunda</ion-col> -->\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col col-3>NO. SPK</ion-col>\n\n              <ion-col col-9>{{data[0][\'data\'].nomorSpkPandu}}</ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col col-3>ASAL</ion-col>\n\n              <ion-col col-9>{{data[0][\'data\'].asal}}</ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col col-3>TUJUAN</ion-col>\n\n              <ion-col col-9>{{data[0][\'data\'].tujuan}}</ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col col-3>STATUS</ion-col>\n\n              <ion-col col-9>\n\n                {{ (data[0][\'data\'].status == \'OHN\' && data[0][\'data\'].flagDone == 2) ? \'SUDAH REALISASI\' : data[0][\'data\'].status }}\n\n              </ion-col>\n\n            </ion-row>\n\n          </ion-col>\n\n\n\n          <ion-col col-4>\n\n            <ion-row *ngIf="data[0][\'data\'].listKapalTunda">\n\n              <ion-col align="right"><b>Informasi Kapal Tunda</b></ion-col>\n\n            </ion-row>\n\n            <ion-row *ngFor="let tunda of data[0][\'data\'].listKapalTunda">\n\n              <ion-col col-12 align="right"><i>{{tunda.namaKapal}}</i></ion-col>\n\n              <!-- <ion-col col-12 align="right">Horse Power:{{tunda.horsePower}}</ion-col> -->\n\n            </ion-row>\n\n          </ion-col>\n\n        </ion-row>\n\n          <ion-row>\n\n            <!-- <ion-col col-3>AGEN</ion-col> -->\n\n            <ion-col col-12 align="center">{{data[0][\'data\'].namaAgen}}</ion-col>\n\n          </ion-row>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-card-content>\n\n  </ion-card>\n\n  \n\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n\n    <ion-refresher-content\n\n      pullingIcon="arrow-dropdown"\n\n      pullingText="Pull to refresh"\n\n      refreshingSpinner="circles"\n\n      refreshingText="Synchronizing...">\n\n    </ion-refresher-content>\n\n  </ion-refresher>\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\realisasi-pandu\realisasi-pandu.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_12__providers_spk_data__["a" /* SpkData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_10__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_12__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_badge__["a" /* Badge */],
        __WEBPACK_IMPORTED_MODULE_11__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_native_sqlite__["a" /* SQLite */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_device__["a" /* Device */],
        __WEBPACK_IMPORTED_MODULE_15__config_app_config__["a" /* AppConfig */],
        __WEBPACK_IMPORTED_MODULE_13__providers_spk_offline_spk_offline__["a" /* SpkOfflineProvider */]])
], RealisasiPanduPage);

//# sourceMappingURL=realisasi-pandu.js.map

/***/ }),

/***/ 234:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TabsPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mapview_mapview__ = __webpack_require__(676);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__absensi_absensi__ = __webpack_require__(697);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__realisasi_pandu_realisasi_pandu__ = __webpack_require__(163);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_notification__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__config_app_config__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_dialogs__ = __webpack_require__(241);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var TabsPage = (function () {
    function TabsPage(navParams, notification, events, alertCtrl, loadingCtrl, platform, toastCtrl, appConfig, dialog) {
        var _this = this;
        this.navParams = navParams;
        this.notification = notification;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.loadingCtrl = loadingCtrl;
        this.platform = platform;
        this.toastCtrl = toastCtrl;
        this.appConfig = appConfig;
        this.dialog = dialog;
        // this tells the tabs component which Pages
        // should be each tab's root Page
        this.tab1Root = __WEBPACK_IMPORTED_MODULE_3__absensi_absensi__["a" /* AbsensiPage */];
        this.tab2Root = __WEBPACK_IMPORTED_MODULE_4__realisasi_pandu_realisasi_pandu__["a" /* RealisasiPanduPage */];
        this.tab3Root = __WEBPACK_IMPORTED_MODULE_2__mapview_mapview__["a" /* LeafletView */];
        this.badgeValue = 0;
        this.count = 0;
        this.options = null;
        this.appId = '312eea82';
        if (this.appConfig.env == 'uat' || this.appConfig.env == 'dev') {
            /**
             * Env uat / development
             */
            this.channel = 'Master';
        }
        else if (this.appConfig.env == 'prod') {
            /**
             * Env Production
             */
            this.channel = 'Production';
        }
        this.mySelectedIndex = navParams.data.tabIndex || 0;
        this.events.subscribe("notif:mqttbadge", function (badge) {
            _this.badgeValue = badge[0];
        });
        if (this.platform.is('android') || this.platform.is('ios')) {
            // this.updateApp()
        }
        /**
         * cek update setiap 30 menit
         */
        setTimeout(function () {
            // this.updateApp();
        }, 30 * 1000 * 60);
    }
    TabsPage.prototype.updateApp = function () {
        var _this = this;
        IonicCordova.deploy.init({ channel: this.channel, appId: this.appId }, function (res) {
            console.log(res);
        }, function (err) {
            console.log(err);
        });
        IonicCordova.deploy.check(function (snapshotAvailable) {
            if (snapshotAvailable == 'true') {
                _this.dialog.confirm('Tersedia pembaharuan aplikasi, klik [OK] untuk memperbaharui.', 'Pembaharuan Aplikasi', ['OK', 'Not Now']).then(function (data) {
                    console.log("from confirm data", data);
                    if (data == 1) {
                        _this.downloadUpdate();
                    }
                });
            }
        });
    };
    TabsPage.prototype.showToast = function (loading, err) {
        if (err === void 0) { err = ""; }
        var toast = this.toastCtrl.create({
            message: 'Error memperbaharui aplikasi ' + err,
            duration: 5000,
            position: 'center'
        });
        toast.present();
        loading.dismiss();
    };
    TabsPage.prototype.releaseBadge = function () {
        this.badgeValue = null;
    };
    TabsPage.prototype.onConnected = function () {
        console.log('Connected to broker');
    };
    TabsPage.prototype.downloadUpdate = function () {
        var _this = this;
        var loading = this.loadingCtrl.create({
            spinner: 'hide',
            content: "Mohon tunggu untuk pembaharuan aplikasi"
        });
        loading.present();
        IonicCordova.deploy.download(function (downloadStatus) {
            if (downloadStatus === 'true') {
                console.log("Download done", downloadStatus);
                IonicCordova.deploy.extract(function (extractStatus) {
                    console.log("begin extract", downloadStatus);
                    if (extractStatus === 'true' || extractStatus === 'done') {
                        IonicCordova.deploy.redirect(); // reloads the app / webview
                    }
                    else {
                        console.log("DEBUG extract", extractStatus);
                        loading.setContent("Extracting:" + extractStatus + "%");
                    }
                }, function (e) {
                    console.log("DEBUG error", e);
                });
            }
            else {
                console.log("Progress:", downloadStatus);
                loading.setContent("Mohon tunggu untuk pembaharuan aplikasi: " + downloadStatus + "%");
            }
        }, function (e) {
            console.log("DEBUG error download", e);
            _this.showToast(loading, e);
        });
    };
    return TabsPage;
}());
TabsPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\tabs\tabs.html"*/'<ion-tabs [selectedIndex]="mySelectedIndex">\n\n  <ion-tab [root]="tab1Root" tabTitle="ABSENSI"></ion-tab>\n\n  <ion-tab [root]="tab2Root" tabTitle="REALISASI" [tabBadge]="badgeValue>0 ? badgeValue : null" tabBadgeStyle="danger"></ion-tab>\n\n  <ion-tab [root]="tab3Root" tabTitle="MAP"></ion-tab>\n\n</ion-tabs>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\tabs\tabs.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_5__providers_notification__["a" /* Notification */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_6__config_app_config__["a" /* AppConfig */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_dialogs__["a" /* Dialogs */]])
], TabsPage);

//# sourceMappingURL=tabs.js.map

/***/ }),

/***/ 236:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export StateLookup */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return MQTTService; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Rx__ = __webpack_require__(101);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_BehaviorSubject__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_BehaviorSubject___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_BehaviorSubject__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__transport_service__ = __webpack_require__(237);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_mqtt__ = __webpack_require__(679);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_mqtt___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_mqtt__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_network__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_local_notifications__ = __webpack_require__(146);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_vibration__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_native_badge__ = __webpack_require__(100);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_dialogs__ = __webpack_require__(241);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__components_alert_tolak_spk_alert_tolak_spk__ = __webpack_require__(694);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_device__ = __webpack_require__(122);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















/** look up states for the message queue */
var StateLookup = [
    'CLOSED',
    'TRYING',
    'CONNECTED',
    'SUBSCRIBED',
    'DISCONNECTING'
];
/**
 * Angular2 Message Queue Service using MQTT.js
 *
 * @description This service handles subscribing to a
 * message queue using the mqtt library, and returns
 * values via the ES6 Observable specification for
 * asynchronous value streaming by wiring messages
 * into a Subject observable.
 */
var MQTTService = (function () {
    /** Constructor */
    function MQTTService(alertCtrl, platform, localNotification, badge, vibration, network, events, storage, _sql, device, dialog, modal) {
        var _this = this;
        this.alertCtrl = alertCtrl;
        this.platform = platform;
        this.localNotification = localNotification;
        this.badge = badge;
        this.vibration = vibration;
        this.network = network;
        this.events = events;
        this.storage = storage;
        this._sql = _sql;
        this.device = device;
        this.dialog = dialog;
        this.modal = modal;
        // Callback run on successfully connecting to server
        this.on_reconnect = function () {
            _this.debug('on_reconnect');
            // this.disconnect()
            // this.configure();
            // this.try_connect();
        };
        // Callback run on successfully connecting to server
        this.on_connect = function () {
            _this.debug('on connected');
            // Indicate our connected state to observers
            _this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].CONNECTED);
            _this.storage.get('username').then(function (username) {
                /**
                 * disable dulu untuk tidak mendapatkan notifikasi spk
                 */
                // this.clientSubscribe("/notif/pandu/spk/" + username + "");
                _this.clientSubscribe("/notif/pandu/ohn/" + username + "");
                _this.clientSubscribe("/user/status/" + username + "");
                _this.clientSubscribe("/monitoring/version");
                _this.clientSubscribe("/monitoring/status");
                _this.clientSubscribe("/mobile/rea/pandu/status/#");
                _this.clientSubscribe("/monitoring/log");
                _this.clientSubscribe("/notif/pandu/batal/spk/#");
                _this.debug("mqtt.service.ts /notif/pandu/spk/" + username + "");
                _this.debug("mqtt.service.ts /notif/pandu/ohn/" + username + "");
                _this.username = username;
                _this.publishTopic("App running " + username + " " + __WEBPACK_IMPORTED_MODULE_13_moment__().format('DD/MM/YYYY HH:mm'), "/notif/first/" + username);
            });
            // Subscribe to message queues
            _this.subscribe();
            // console.log(typeof this.resolvePromise);
            // Resolve our Promise to the caller
            // this.resolvePromise();
            // Clear callback
            _this.resolvePromise = null;
            _this.monitoringIpadPandu();
        };
        // Handle errors
        this.on_error = function (error) {
            _this.debug('on_error mqtt', error);
            if (typeof error === 'undefined') {
                _this.debug('Undefined error');
                _this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].TRYING);
                return;
            }
            // Check for dropped connection and try reconnecting
            // if (error.indexOf('Lost connection') !== -1) {
            if (error == "client disconnecting") {
                // Reset state indicator
                _this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].CLOSED);
                // Attempt reconnection
                _this.debug("Reconnecting in 5 seconds...");
                setTimeout(function () {
                    _this.configure();
                    _this.try_connect();
                }, 5000);
            }
        };
        // On message RX, notify the Observable with the message object
        this.on_message = function () {
            var args = [];
            for (var _i = 0; _i < arguments.length; _i++) {
                args[_i] = arguments[_i];
            }
            var topic = args[0], message = args[1], packet = args[2];
            if (message.toString()) {
                _this.messages.next(message);
                _this.debug("On_Message in service =>", message.toString());
                _this.actMessage(message, topic);
            }
            else {
                console.warn('Empty message received!');
            }
        };
        this.on_offline = function (error) {
            _this.debug("Mqtt Offline", error);
        };
        this.messages = new __WEBPACK_IMPORTED_MODULE_2_rxjs_Rx__["Subject"]();
        this.state = new __WEBPACK_IMPORTED_MODULE_3_rxjs_BehaviorSubject__["BehaviorSubject"](__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].CLOSED);
    }
    /** Set up configuration */
    MQTTService.prototype.configure = function (config) {
        // Check for errors:
        if (this.state.getValue() !== __WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].CLOSED) {
            throw Error('Already running!');
        }
        if (config === null && this.config === null) {
            throw Error('No configuration provided!');
        }
        console.log('when connection is reconfigure', config);
        // Set our configuration
        if (config != null) {
            this.config = config;
        }
        // If host isn't set, use the browser's location
        if (typeof this.config.host === 'undefined') {
            this.config.host = document.location.hostname;
        }
    };
    /**
     * Perform connection to broker, returning a Promise
     * which is resolved when connected.
     */
    MQTTService.prototype.try_connect = function () {
        var _this = this;
        this.debug('try_connect');
        if (this.state.getValue() !== __WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].CLOSED) {
            throw Error('Can\'t try_connect if not CLOSED!');
        }
        if (this.client === null) {
            throw Error('Client not configured!');
        }
        // Connecting via SSL Websocket?
        var scheme = 'ws';
        if (this.config.ssl) {
            scheme = 'wss';
        }
        // Client options loaded from config
        var options = {
            'keepalive': this.config.keepalive,
            'reconnectPeriod': 10000,
            'clientId': 'vasa_pandu_clientid_' + Math.floor(Math.random() * 65535),
            // 'clientId': 'vasa_pandu_clientid_'+localStorage.getItem('username'),
            'username': this.config.user,
            'password': this.config.pass,
            'clean': false
        };
        var url = scheme + '://' + this.config.host + ':' + this.config.port;
        console.log("Mqtt connection", options, url);
        // Create the client and listen for its connection
        this.client = Object(__WEBPACK_IMPORTED_MODULE_5_mqtt__["connect"])(url, options);
        this.client.addListener('connect', this.on_connect);
        this.client.addListener('reconnect', this.on_reconnect);
        this.client.addListener('message', this.on_message);
        this.client.addListener('offline', this.on_offline);
        this.client.addListener('error', this.on_error);
        this.debug('connecting to ' + url);
        this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].TRYING);
        return new Promise(function (resolve, reject) { return _this.resolvePromise = resolve; });
    };
    /** Disconnect the client and clean up */
    MQTTService.prototype.disconnect = function () {
        var _this = this;
        // Notify observers that we are disconnecting!
        this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].DISCONNECTING);
        this.debug("MQTT Disconnect from client", this.client);
        // Disconnect. Callback will set CLOSED state
        if (this.client) {
            this.client.end(false, function () { return _this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].CLOSED); });
            //this.monInterval.clearTimeout()
            clearInterval(this.monInterval);
        }
    };
    /** Send a message to all topics */
    MQTTService.prototype.publish = function (message) {
        for (var _i = 0, _a = this.config.publish; _i < _a.length; _i++) {
            var t = _a[_i];
            this.client.publish(t, message);
        }
    };
    MQTTService.prototype.publishTopic = function (message, topic) {
        this.client.publish(topic, message, { qos: 2 });
        this.debug('publish topic : ', __WEBPACK_IMPORTED_MODULE_13_moment__().format('HH:mm:ss'), "=>", topic, " - ", message);
    };
    /** Subscribe to server message queues */
    MQTTService.prototype.subscribe = function () {
        // Subscribe to our configured queues
        // Callback is set at client instantiation (assuming we don't need separate callbacks per queue.)
        for (var _i = 0, _a = this.config.subscribe; _i < _a.length; _i++) {
            var t = _a[_i];
            this.debug('subscribing: ' + t);
            this.client.subscribe(t);
        }
        // Update the state
        if (this.config.subscribe.length > 0) {
            this.state.next(__WEBPACK_IMPORTED_MODULE_4__transport_service__["a" /* TransportState */].SUBSCRIBED);
        }
    };
    MQTTService.prototype.clientSubscribe = function (topic) {
        this.client.subscribe(topic, { qos: 2 });
        console.debug("DEBUG MQTT:subscsribe", topic);
    };
    /**
     * Callback Functions
     *
     * Note the method signature: () => preserves lexical scope
     * if we need to use this.x inside the function
     */
    MQTTService.prototype.debug = function () {
        var args = [];
        for (var _i = 0; _i < arguments.length; _i++) {
            args[_i] = arguments[_i];
        }
        // Push arguments to this function into console.log
        if (window.console && console.log && console.log.apply) {
            console.log.apply(console, args);
        }
    };
    MQTTService.prototype.actMessage = function (message, topic) {
        var _this = this;
        console.log("mqtt message", topic);
        var payload = message.toString();
        var v_title = "";
        this.debug('Message arrived.', payload, "topic", topic);
        var msgId = this.parseTopicStatus(topic);
        if (topic == '/mobile/rea/pandu/status/' + msgId) {
            this.debug("Topic all status", msgId);
            this._sql.updateMessageStatus(msgId, message).then(function () {
                _this.events.publish('refresh:data', true);
            });
        }
        var spkId = this.parseTopicStatus(topic);
        if (topic == '/notif/pandu/batal/spk/' + spkId) {
            this.debug("Batal SPK untuk SPK ID", spkId);
            var msg = "Anda mendapatkan pemberitahuan untuk pembatalan SPK";
            if (this.platform.is('ios') || this.platform.is('android')) {
                this.localNotification.schedule({
                    title: "Notifikasi Baru",
                    text: msg,
                    sound: 'file://assets/sound/wind.mp3',
                    data: { secret: 'key' }
                });
                this.dialog.alert(msg, "Notifikasi Baru").then(function () {
                    _this._sql.deleteSpk(spkId).then(function () {
                        _this.events.publish('refresh:data', true);
                    });
                    _this.badge.clear();
                });
            }
            else {
                this.alertCtrl.create({
                    title: "Notifikasi Baru",
                    subTitle: msg,
                    buttons: [{
                            text: 'OK',
                            handler: function () {
                                _this._sql.deleteSpk(spkId).then(function () {
                                    _this.events.publish('refresh:data', true);
                                });
                            }
                        }]
                }).present();
            }
        }
        /**
         * payload format
         * {
         *    username:"",
         *    query: ""
         *    action: "GET | POST | PUT"
         * }
         */
        if (topic == '/monitoring/log') {
            var req = JSON.parse(payload);
            console.log("from log", req);
            if (req.username == this.username)
                this._sql.getLog(req.query, req.action).then(function (data) {
                    _this.publishTopic(JSON.stringify(data), '/monitoring/log/pub');
                });
        }
        if (topic == '/monitoring/version') {
            var name_1, msg_1;
            this.storage.get('profile').then(function (val) {
                name_1 = val.namaPetugas;
                msg_1 = {
                    'version': _this.config['version'],
                    'name': name_1,
                    'nipp': localStorage.getItem('username'),
                    'uuid': _this.device.uuid,
                    'platform': _this.device.platform,
                    'serial': _this.device.serial
                };
                _this.publishTopic(JSON.stringify(msg_1), '/monitoring/version/pub');
            });
        }
        if (topic == '/monitoring/status') {
            var name_2, msg_2, status_1;
            this.storage.get('profile').then(function (val) {
                name_2 = val.namaPetugas + '-' + val.nipp;
                status_1 = localStorage.getItem('mulaiAbsen');
                msg_2 = {
                    'version': _this.config['version'],
                    'username': name_2,
                    'nipp': localStorage.getItem('username'),
                    'status': status_1
                };
                _this.publishTopic(JSON.stringify(msg_2), '/monitoring/version/pub');
            }, function (err) {
                _this.debug("not found progfile from mqtt", err);
            });
        }
        if (topic == '/notif/pandu/spk/' + this.username) {
            this.debug("mqtt message spk" + topic + "");
            console.log("mqtt message spk ", topic);
            v_title = "Pemberitahuan Baru untuk SPK";
        }
        else if (topic == '/notif/pandu/ohn/' + this.username) {
            this.debug("mqtt message ohn" + topic + "");
            console.log("mqtt message ohn ", topic);
            v_title = "Pemberitahuan Baru untuk OHN";
            this.alertTolakSpk(payload);
        }
        if (v_title != "") {
            this.events.publish('notif:mqttbadge', 1);
            if (this.platform.is('ios') || this.platform.is('android')) {
                this.setBadge();
                this.localNotification.hasPermission().then(function (granted) {
                    _this.debug("Local Notification granted", granted);
                    // if(granted == false){
                    //   this.localNotification.registerPermission().then((v)=>{
                    //     this.debug("Local notification register permission", v)
                    //   })
                    // }
                }).catch(function (e) {
                    _this.debug("error", e);
                });
                this.localNotification.schedule({
                    title: "Notifikasi Baru",
                    text: v_title,
                    sound: 'file://assets/sound/wind.mp3',
                    data: { secret: 'key' }
                });
                this.dialog.alert(v_title, "Notifikasi Baru").then(function () {
                    _this.badge.clear();
                });
            }
            else {
                var notifAlert = this.alertCtrl.create({
                    title: "Notifikasi Baru",
                    subTitle: v_title,
                    buttons: ['OK']
                }).present();
            }
            this.storage.set('notif_spk', true);
        }
    };
    MQTTService.prototype.alertTolakSpk = function (payload) {
        var _this = this;
        this.debug("Pemberitahuan Baru untuk OHN. " + payload + "");
        console.log("Pemberitahuan Baru untuk OHN. ", payload);
        var toDetail = JSON.parse(payload).detailFromObject;
        var modalAlertTolakSpkPandu = this.modal.create(__WEBPACK_IMPORTED_MODULE_12__components_alert_tolak_spk_alert_tolak_spk__["a" /* AlertTolakSpkComponent */], { toDetail: toDetail }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        });
        modalAlertTolakSpkPandu.onDidDismiss(function (data) {
            if (data == false) {
                console.log("mqtt service tolak spk pandu ");
            }
            else if (data == true) {
                console.log("mqtt service terima spk pandu ");
                console.log("from toDetail: ", toDetail);
                var msg = {
                    'id': toDetail.id,
                    'imeiNumber': _this.device.uuid
                };
                _this.publishTopic(JSON.stringify(msg), "/notif/pandu/callback/" + _this.username);
                _this._sql.saveSpkAndDetail(JSON.parse(payload)).then(function () {
                    _this.events.publish('refresh:data', true);
                });
            }
        });
        modalAlertTolakSpkPandu.present();
        // let notifTolak = this.alertCtrl.create({
        //   title: "Notifikasi Baru",
        //   subTitle: "Pemberitahuan Baru untuk OHN",
        //   buttons: [{
        //     text: 'Tolak',
        //     handler : ()=>{
        //       console.log("Tolak SpkData.");
        //       let modalTolakSpkPandu = this.modal.create(TolakSpkPanduComponent,
        //         {toDetail:toDetail},
        //         {
        //           showBackdrop:true,
        //           enableBackdropDismiss: false
        //         }
        //       )
        //       modalTolakSpkPandu.onDidDismiss(data => {
        //         console.log("tolak spk pandu dismiss", data);
        //         if (data == true) { //tolak spk
        //           this.debug("tolak spk pandu ", data);
        //           console.log("tolak spk pandu ", data);
        //         } else if (data == false) { //cancel tolak spk
        //           this.debug("tolak spk pandu ", data);
        //           console.log("tolak spk pandu ", data);
        //           this.debug("from toDetail: ", toDetail);
        //           console.log("from toDetail: ", toDetail);
        //           let msg = {
        //             'id': toDetail.id,
        //             'imeiNumber':this.device.uuid
        //           }
        //           this.publishTopic(JSON.stringify(msg), `/notif/pandu/callback/${this.username}`);
        //           this._sql.saveSpkAndDetail(JSON.parse(payload)).then(()=>{
        //             this.events.publish('refresh:data', true);
        //           });
        //         }
        //       });
        //       modalTolakSpkPandu.present();
        //     }
        //   },
        //   {
        //     text: 'Terima',
        //     handler : ()=>{
        //       this.debug("Terima SpkData. ");
        //       console.log("Terima SpkData.");
        //       this.debug("from toDetail: ", toDetail);
        //       console.log("from toDetail: ", toDetail);
        //       let msg = {
        //         'id': toDetail.id,
        //         'imeiNumber':this.device.uuid
        //       }
        //       this.publishTopic(JSON.stringify(msg), `/notif/pandu/callback/${this.username}`);
        //       this._sql.saveSpkAndDetail(JSON.parse(payload)).then(()=>{
        //         this.events.publish('refresh:data', true);
        //       });
        //     }
        //   }
        // ],
        // enableBackdropDismiss: false
        // }).present()
    };
    MQTTService.prototype.setBadge = function () {
        var _this = this;
        this.vibration.vibrate(1000);
        this.badge.get().then(function (badge) {
            if (badge == 0) {
                _this.badge.set(1);
            }
            else if (badge >= 1) {
                _this.badge.increase(1);
            }
            _this.badgeTot = badge;
            _this.events.publish('notif:mqttbadge', badge);
            _this.debug("current badge", badge);
        }).catch(function (e) {
            _this.debug("error", e);
        });
    };
    MQTTService.prototype.parseTopicStatus = function (topic) {
        var delimiter = '/';
        var ar = topic.split(delimiter);
        var msgId = ar[5];
        this.debug(ar);
        return msgId;
    };
    MQTTService.prototype.monitoringIpadPandu = function () {
        var _this = this;
        this.monInterval = setInterval(function () {
            console.log("monitoringIpadPandu");
            //console.log("username: ", localStorage.getItem('username'));
            _this.publishTopic(localStorage.getItem('username'), "/status/ipad/pandu/" + localStorage.getItem('username'));
        }, 5 * 60 * 1000);
    };
    return MQTTService;
}());
MQTTService = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_local_notifications__["a" /* LocalNotifications */],
        __WEBPACK_IMPORTED_MODULE_9__ionic_native_badge__["a" /* Badge */],
        __WEBPACK_IMPORTED_MODULE_8__ionic_native_vibration__["a" /* Vibration */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_native_network__["a" /* Network */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_11__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_14__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
        __WEBPACK_IMPORTED_MODULE_15__ionic_native_device__["a" /* Device */],
        __WEBPACK_IMPORTED_MODULE_10__ionic_native_dialogs__["a" /* Dialogs */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* ModalController */]])
], MQTTService);

//# sourceMappingURL=mqtt.service.js.map

/***/ }),

/***/ 237:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TransportState; });
/** possible states for the message queue */
var TransportState;
(function (TransportState) {
    TransportState[TransportState["CLOSED"] = 0] = "CLOSED";
    TransportState[TransportState["TRYING"] = 1] = "TRYING";
    TransportState[TransportState["CONNECTED"] = 2] = "CONNECTED";
    TransportState[TransportState["SUBSCRIBED"] = 3] = "SUBSCRIBED";
    TransportState[TransportState["DISCONNECTING"] = 4] = "DISCONNECTING";
})(TransportState || (TransportState = {}));
//# sourceMappingURL=transport.service.js.map

/***/ }),

/***/ 242:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Geojson; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(42);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/*
  Generated class for the Geojson provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var Geojson = (function () {
    function Geojson(http, storage) {
        this.http = http;
        this.storage = storage;
        this.apiUrl = 'http://amsvasa.pelindo.co.id:8080/api';
        this.pilotUrl = 'http://apivasa.pelindo.co.id:8081/api/mobile';
        console.log('Hello Geojson Provider');
    }
    Geojson.prototype.getInfoLogin = function () {
        var body = JSON.stringify({
            "username": "891004820",
            "password": "surabaya191089"
        });
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json', });
        var options = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["d" /* RequestOptions */]({ headers: headers });
        return this.http.post(this.apiUrl + '/user/login', body, options)
            .map(function (res) {
            var hd = res.headers;
            localStorage.setItem('x-token-ams', res.headers.get('x-token'));
            console.log("result header geojson", res.headers.get('x-token'));
            return res.headers.get('x-token');
        }).toPromise();
    };
    Geojson.prototype.getShipPosition = function (xtoken) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]();
        headers.append('x-token', xtoken);
        var opt = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["d" /* RequestOptions */]({ headers: headers });
        console.log("REQUEST SHIP POSITION!!", opt);
        return this.http.get(this.apiUrl + "/vessels?type=inner&port=8", opt)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    Geojson.prototype.getPilotJsonPosition = function () {
        console.debug("REQUEST PILOT POSITION!!");
        return this.http.get(this.pilotUrl + "/lokasi_pandu/latest")
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    Geojson.prototype.getPilotPosition = function (xtoken) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'x-token': xtoken });
        return this.http.get(this.apiUrl + "/pilots?port=8", { headers: headers })
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    Geojson.prototype.getObjects = function (obj, key, val) {
        var objects = [];
        for (var i in obj) {
            if (!obj.hasOwnProperty(i))
                continue;
            if (typeof obj[i] == 'object') {
                objects = objects.concat(this.getObjects(obj[i], key, val));
            }
            else 
            //if key matches and value matches or if key matches and value is not passed (eliminating the case where key matches but passed value does not)
            if (i == key && obj[i] == val || i == key && val == '') {
                objects.push(obj);
            }
            else if (obj[i] == val && key == '') {
                //only add if the object is not already in the array
                if (objects.lastIndexOf(obj) == -1) {
                    objects.push(obj);
                }
            }
        }
        return objects;
    };
    Geojson.prototype.distance = function (lat1, lon1, lat2, lon2, unit) {
        var radlat1 = Math.PI * lat1 / 180;
        var radlat2 = Math.PI * lat2 / 180;
        var theta = lon1 - lon2;
        var radtheta = Math.PI * theta / 180;
        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
        dist = Math.acos(dist);
        dist = dist * 180 / Math.PI;
        dist = dist * 60 * 1.1515;
        if (unit == "K") {
            dist = dist * 1.609344;
        }
        if (unit == "N") {
            dist = dist * 0.8684;
        }
        return dist;
    };
    return Geojson;
}());
Geojson = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3__angular_http__["b" /* Http */], __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */]])
], Geojson);

//# sourceMappingURL=geojson.js.map

/***/ }),

/***/ 250:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HistoryRealisasiPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/*
  Generated class for the HistoryRealisasi page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var HistoryRealisasiPage = (function () {
    function HistoryRealisasiPage(navCtrl, spkData, navParam, loadingCtrl, storage, _sql) {
        this.navCtrl = navCtrl;
        this.spkData = spkData;
        this.navParam = navParam;
        this.loadingCtrl = loadingCtrl;
        this.storage = storage;
        this._sql = _sql;
        this.datas = [];
        this.profile = [];
        this.timeDiff = "";
        this.htmlText = "";
        this.detail = true;
        this.generate_wizard = [
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", tahapPandu: 6, title: "Ikat Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik", status: false, value: "00:00:00", },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", tahapPandu: 7, title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik", status: false, value: "00:00:00", },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik", status: false, value: "00:00:00", },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", tahapPandu: 7, title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", tahapPandu: 6, title: "Ikat Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", tahapPandu: 7, title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda2", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", tahapPandu: 6, title: "Ikat Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda2", title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ]
        ];
        this.loader = this.loadingCtrl.create({
            content: "Please wait...",
            duration: 5000
        });
    }
    HistoryRealisasiPage.prototype.ionViewDidLoad = function () {
        console.log('Hello HistoryRealisasiPage Page');
        this.noSpk = this.navParam.get('noSpk');
        this.detail = this.navParam.get('detail');
        console.log('load data history');
        this.loadDataHistory(this.noSpk, this.navParam.get('spkId'));
    };
    HistoryRealisasiPage.prototype.loadDataHistory = function (noSpk, spkId) {
        var _this = this;
        console.log("load no spk", noSpk, spkId);
        this.loader.present();
        if (spkId !== undefined) {
            this._sql.getRealisasiOffline(spkId).then(function (dataRea) {
                var progress = JSON.parse(dataRea['progress']);
                _this.databyId = JSON.parse(dataRea['vjson']);
                _this.datas = _this.databyId;
                console.log("offline data rea", _this.databyId);
                _this.generateStep(Number(_this.databyId['jenisDermaga']) - 1);
                progress['progressPemanduan'].forEach(function (data, i) {
                    _this.statusTemplate(data['title'], data['tglTahapan']);
                    if (i < progress['progressPemanduan'].length) {
                        if ((i + 1) !== progress['progressPemanduan'].length) {
                            _this.diffProgress(data['tglTahapan'], progress['progressPemanduan'][i + 1]['tglTahapan']);
                        }
                    }
                    _this.storage.get('profile').then(function (data) {
                        _this.profile = data;
                    });
                });
            }, function (err) {
                _this.onlineHistory(noSpk);
            }).catch(function (err) {
                _this.onlineHistory(noSpk);
            });
        }
        else {
            this.onlineHistory(noSpk);
        }
    };
    HistoryRealisasiPage.prototype.onlineHistory = function (noSpk) {
        var _this = this;
        this.spkData.loadHistorySpk(noSpk).subscribe(function (data) {
            _this.datas = [];
            _this.datas = data;
            _this.spkData.loadDetails(_this.datas['id']).then(function (data) {
                _this.databyId = data;
                _this.generateStep(Number(_this.databyId['jenisDermaga']) - 1);
                _this.datas['listProgress'].forEach(function (data, i) {
                    _this.statusTemplate(data['tahapanPandu'], data['tglTahapan']);
                    if (i <= _this.datas['listProgress'].length)
                        _this.diffProgress(data['tglTahapan'], _this.datas['listProgress'][i + 1]['tglTahapan']);
                    _this.storage.get('profile').then(function (data) {
                        _this.profile = data;
                    });
                });
            });
        }, function (err) {
            console.log("error load data spk");
        }, function () {
            console.log("success load data spk");
        });
    };
    HistoryRealisasiPage.prototype.statusTemplate = function (title, value) {
        this.htmlText = this.htmlText +
            "\n          <div class=\"ps_stat_left\">\n            " + title +
            "\n          </div>\n          <div class=\"ps_stat_right\">\n            " + __WEBPACK_IMPORTED_MODULE_3_moment__(value).format('HH:mm:ss') +
            "\n          </div>\n      ";
    };
    HistoryRealisasiPage.prototype.diffProgress = function (start, end) {
        console.debug('DEBUG', start, end);
        if (end > start) {
            var ms = __WEBPACK_IMPORTED_MODULE_3_moment__(end, "HH:mm:ss").diff(__WEBPACK_IMPORTED_MODULE_3_moment__(start, "HH:mm:ss"));
            var d = __WEBPACK_IMPORTED_MODULE_3_moment__["duration"](ms);
            var s = Math.floor(d.asHours()) + __WEBPACK_IMPORTED_MODULE_3_moment__["utc"](ms).format(":mm:ss");
            //console.log("from diff", this.timeDiff)
            if (this.timeDiff != 'undefined')
                this.timeDiff += "<li><div>" + s + "</div></li>";
        }
    };
    HistoryRealisasiPage.prototype.generateStep = function (id) {
        console.log("wizard used", id);
        var vData = [];
        this.generate_wizard[id].forEach(function (ret) {
            if (ret.id != 'isi_pin' && ret.id != 'keluar')
                vData.push(ret);
        });
        this.wizardStep = '<ol class="list-inline text-center step-indicator">';
        for (var i in vData) {
            this.wizardStep +=
                " <li class=\"i" + vData[i].id + " active\">\n              <div class=\"step\">" + (Number(i) + 1) + "</div>\n              <div class=\"caption hidden-xs hidden-sm\">\n              " + vData[i].title + "</div>\n            </li>\n        ";
        }
        this.wizardStep += '</ol>';
    };
    return HistoryRealisasiPage;
}());
HistoryRealisasiPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-history-realisasi',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\history-realisasi\history-realisasi.html"*/'<!--\n\n  Generated template for the HistoryRealisasi page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n  </ion-navbar>\n\n\n\n  <ion-toolbar color="primary" class="tb" *ngIf="detail">\n\n    <div text-center ><h4>HISTORY PELAYANAN</h4></div>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n\n\n\n\n<ion-content class="cpage">\n\n  <ion-grid class="gr-white">\n\n    <ion-card class="gr-card">\n\n\n\n      <ion-card-content no-padding>\n\n        <ion-row>\n\n          <ion-col>\n\n            <ion-row>\n\n              <ion-col>\n\n                <h2><b>{{datas?.namaKapal}}</b></h2>\n\n                <small>{{datas?.namaAgen}}</small>\n\n              </ion-col>\n\n              <ion-col align="right">\n\n                  {{datas?.created | idformat}}\n\n              </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col width-30>\n\n                <br> PPK1\n\n                <br> NO. SPK\n\n                <br *ngIf="datas?.asal"> ASAL\n\n                <br *ngIf="datas?.tujuan"> TUJUAN\n\n              </ion-col>\n\n              <ion-col width-70>\n\n                <br> {{datas?.noPpk1}}\n\n                <br> {{datas?.nomorSpk}}\n\n                <br *ngIf="datas?.asal != null"> {{datas?.asal}}\n\n                <br *ngIf="datas?.tujuan"> {{datas?.tujuan}}\n\n              </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <div [innerHtml]="wizardStep"></div>\n\n            </ion-row>\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-card-content>\n\n\n\n    </ion-card>\n\n  </ion-grid>\n\n\n\n\n\n  <ion-grid class="gr-white">\n\n    \n\n\n\n    <ion-card class="gr-card" padding>\n\n      <h2><b>Pandu Status</b></h2>\n\n\n\n      <div id="pandu_status">\n\n        <ion-grid>\n\n          <ion-row>\n\n            <ion-col width-100>\n\n              <div class="valueTime" [innerHtml]="htmlText"></div>\n\n              \n\n              <div class="resultTime">\n\n                <ul [innerHtml]="timeDiff">\n\n                  \n\n                </ul>\n\n              </div>\n\n            </ion-col>\n\n          </ion-row>\n\n        </ion-grid>\n\n      </div>\n\n\n\n    </ion-card>\n\n  </ion-grid>\n\n\n\n  <ion-grid class="gr-white">\n\n    <ion-card class="gr-card" *ngIf="profile.namaPetugas" padding>\n\n      <ion-grid>\n\n        <ion-row>\n\n          <ion-col>\n\n            <ion-row>\n\n\n\n            </ion-row>\n\n            Pandu Profile<br>\n\n            <ion-row align="center">\n\n              <ion-col align="center">\n\n                <ion-avatar>\n\n                  <div class="avatar">\n\n                    <img [src]=" profile.photo!=null ?  \'data:image/PNG;base64,\' + profile.photo : \'assets/img/person.png\'">\n\n                  </div>\n\n                </ion-avatar>\n\n              </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col align="center">\n\n                {{profile.namaPetugas}}<br>\n\n                {{profile.nipPandu}}<br>\n\n                {{profile.hp}}<br>\n\n              </ion-col>\n\n            </ion-row>\n\n\n\n          </ion-col>\n\n          <ion-col>\n\n            <div class="sign">\n\n              <img [src]="datas.sign">\n\n            </div>\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-grid>\n\n\n\n    </ion-card>\n\n\n\n    \n\n  </ion-grid>\n\n  \n\n</ion-content>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\history-realisasi\history-realisasi.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_4__providers_spk_data__["a" /* SpkData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_4__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_5__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */]])
], HistoryRealisasiPage);

//# sourceMappingURL=history-realisasi.js.map

/***/ }),

/***/ 251:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LoginPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__tabs_tabs__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_user_data__ = __webpack_require__(87);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




var LoginPage = (function () {
    function LoginPage(navCtrl, userData, menuCtrl, events, alertCtrl) {
        this.navCtrl = navCtrl;
        this.userData = userData;
        this.menuCtrl = menuCtrl;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.login = {};
        this.submitted = false;
        //this.userData.logout();
        this.menuCtrl.swipeEnable(false);
        this.menuCtrl.enable(false);
    }
    LoginPage.prototype.ionViewWillLeave = function () {
        this.menuCtrl.enable(true);
    };
    LoginPage.prototype.onLogin = function (form) {
        var _this = this;
        this.submitted = true;
        if (form.valid) {
            //this.navCtrl.setRoot(HomePage);
            this.userData.login(this.login.username, this.login.password);
            this.events.subscribe('user:erroruser', function (msg) {
                _this.erroruser = msg;
            });
            this.events.subscribe('user:successlogin', function (msg) {
                _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_2__tabs_tabs__["a" /* TabsPage */]);
            });
        }
        console.log('login');
    };
    return LoginPage;
}());
LoginPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-user',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\login\login.html"*/'<ion-content>\n\n	<div class="logo">\n\n		<img src="assets/img/logologin.jpg" alt="Ionic logo">\n\n	</div>\n\n	<div class="login-container">\n\n		<form #loginForm="ngForm" novalidate>\n\n			<ion-list no-lines>\n\n				<ion-item class="tp">\n\n					<ion-label stacked color="primary">Username</ion-label>\n\n					<ion-input [(ngModel)]="login.username" name="username" type="text" #username="ngModel" spellcheck="false" autocapitalize="off"\n\n						required>\n\n					</ion-input>\n\n				</ion-item>\n\n				<p [hidden]="username.valid || submitted == false" color="danger" padding-left>\n\n					Username is required\n\n				</p>\n\n\n\n				<ion-item class="tp">\n\n					<ion-label stacked color="primary">Password</ion-label>\n\n					<ion-input [(ngModel)]="login.password" name="password" type="password" #password="ngModel" required>\n\n					</ion-input>\n\n				</ion-item>\n\n				<p [hidden]="password.valid || submitted == false" color="danger" padding-left>\n\n					Password is required\n\n				</p>\n\n			</ion-list>\n\n				<p [hidden]="erroruser" color="danger" padding-left>\n\n					{{erroruser}}\n\n				</p>\n\n			<ion-row responsive-sm>\n\n				<ion-col>\n\n					<button ion-button (click)="onLogin(loginForm)" type="submit" color="oranye" block>Login</button>\n\n				</ion-col>\n\n			</ion-row>\n\n		</form>\n\n	</div>\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\login\login.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_3__providers_user_data__["a" /* UserData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* MenuController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */]])
], LoginPage);

//# sourceMappingURL=login.js.map

/***/ }),

/***/ 262:
/***/ (function(module, exports) {

function webpackEmptyAsyncContext(req) {
	// Here Promise.resolve().then() is used instead of new Promise() to prevent
	// uncatched exception popping up in devtools
	return Promise.resolve().then(function() {
		throw new Error("Cannot find module '" + req + "'.");
	});
}
webpackEmptyAsyncContext.keys = function() { return []; };
webpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;
module.exports = webpackEmptyAsyncContext;
webpackEmptyAsyncContext.id = 262;

/***/ }),

/***/ 305:
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"../pages/signature/signature.module": [
		1178,
		0
	]
};
function webpackAsyncContext(req) {
	var ids = map[req];
	if(!ids)
		return Promise.reject(new Error("Cannot find module '" + req + "'."));
	return __webpack_require__.e(ids[1]).then(function() {
		return __webpack_require__(ids[0]);
	});
};
webpackAsyncContext.keys = function webpackAsyncContextKeys() {
	return Object.keys(map);
};
webpackAsyncContext.id = 305;
module.exports = webpackAsyncContext;

/***/ }),

/***/ 48:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SpkData; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__ = __webpack_require__(101);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__config_app_config__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_device__ = __webpack_require__(122);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs_add_operator_timeout__ = __webpack_require__(395);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs_add_operator_timeout___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_rxjs_add_operator_timeout__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};









/*
  Generated class for the SpkData provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var SpkData = (function () {
    function SpkData(http, appConfig, storage, device, platform) {
        this.http = http;
        this.appConfig = appConfig;
        this.storage = storage;
        this.device = device;
        this.platform = platform;
        // private sufApi = "api/mobile";
        this.sufApi = "vasa-jboss-perencanaanPandu/mobile";
        this.sufApiRealisasi = "vasa-jboss-realisasi/mobile";
        this.sufApiMdm = "vasa-jboss-mdm/mobile";
        this.spkApiUrl = "";
        this.spkApiUrl = this.appConfig.apiBaseUrl + this.sufApi;
        if (this.platform.is('android') || this.platform.is('ios'))
            this.deviceId = this.device.uuid;
        else
            this.deviceId = "BrowserDev";
    }
    /**
     *  GET SPK data by Notification
     */
    // Load SPK data by Notification
    SpkData.prototype.load = function () {
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        var notifId = localStorage.getItem('notif_spk_id');
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/surat_perintah_kerja_pandu/" + notifId, { headers: headers })
            .map(function (res) { return res.json(); })
            .catch(this.handleError);
    };
    /**
     * load detail spk by id
     *
     * @param id
     */
    // Get Spk by providing spk id
    SpkData.prototype.loadDetails = function (id) {
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/surat_perintah_kerja_pandu/" + id)
            .map(function (res) { return (res.json()); })
            .toPromise();
    };
    /**
     * load realisasi by tglMulai & tglSelesai
     *
     * @param tglMulai
     * @param tglSelesai
     */
    SpkData.prototype.loadRealisasi = function (tglMulai, tglSelesai) {
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        var username = localStorage.getItem('username');
        console.log(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/username/" + username + "?tglMulai=" + tglMulai + "&tglSelesai=" + tglSelesai + "&jenisJasa=pandu&status=OHN");
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/username/" + username + "?tglMulai=" + tglMulai + "&tglSelesai=" + tglSelesai + "&jenisJasa=pandu&status=OHN", { headers: headers })
            .timeout(10000000)
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    /**
     * Load history realisasi by date
     *
     * @param tglMulai
     * @param tglSelesai
     */
    SpkData.prototype.loadHistoryRealisasi = function (tglMulai, tglSelesai) {
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        var username = localStorage.getItem('username');
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/username/" + username + "?tglMulai=" + tglMulai + "&tglSelesai=" + tglSelesai + "&jenisJasa=pandu&flagDone=2", { headers: headers })
            .map(function (res) { return res.json(); })
            .catch(this.handleError);
    };
    /**
     * Load history realisasi by nomor SPK (pandu, tunda, tambat)
     *
     * @param noSpk
     */
    SpkData.prototype.loadHistorySpk = function (noSpk) {
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        console.log(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/nomor_spk/" + noSpk);
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/nomor_spk/" + noSpk, { headers: headers })
            .map(function (res) { return res.json(); })
            .catch(this.handleError);
    };
    /**
     *
     * @param idTahapanPandu
     * @param nomorSpk
     */
    SpkData.prototype.postProgress = function (idTahapanPandu, nomorSpk, nomorSpkPandu, tglTahapan) {
        var body = JSON.stringify({
            idTahapanPandu: idTahapanPandu,
            nomorSpk: nomorSpk,
            nomorSpkPandu: nomorSpkPandu,
            tglTahapan: tglTahapan
        });
        console.log("post progress", body);
        var url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk";
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        return this.http.post(url, body, options)
            .map(function (res) { return res.json(); })
            .subscribe(function (data) {
            console.log("Response", data);
        }, function (err) {
            console.log("ERROR!: ", err);
        });
    };
    /**
     * Kirim progress tahapan pandu dengan manual input
     * @param progress data
     */
    SpkData.prototype.postProgressBulk = function (progress) {
        var body = JSON.stringify(progress);
        console.log("post progress", body);
        var url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/bulk";
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        return this.http.post(url, body, options)
            .map(function (res) { return res.json(); })
            .subscribe(function (data) {
            console.log("Response", data);
        }, function (err) {
            console.log("ERROR!: ", err);
        });
    };
    /**
     * Put Progress by idspk
     * @param id
     */
    SpkData.prototype.putProgressDone = function (id) {
        var url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/spk_pandu/" + id + "/set_as_done";
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        console.debug("DEBUG -> putProgressDone", url);
        return this.http
            .put(url, JSON.stringify(id), { headers: headers })
            .map(function (res) { return res; });
    };
    SpkData.prototype.handleError = function (error) {
        return __WEBPACK_IMPORTED_MODULE_3_rxjs_Rx__["Observable"].throw(error.json().error || 'Server error');
    };
    /**
     * Realisasi pandu tambat tunda
     *
     * @param kondisiFlow
     * @param data
     */
    SpkData.prototype.realisasiPandu = function (kondisiFlow, data) {
        var body = JSON.stringify(data);
        // let url = `${this.appConfig.apiBaseUrl}/${this.sufApi}/realisasi/rea_tambat_pandu_tunda`;
        var url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/rea_tambat_pandu_tunda";
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        if (kondisiFlow == 1 || kondisiFlow == 2 || kondisiFlow == 4) {
            // url = `${this.appConfig.apiBaseUrl}/${this.sufApi}/realisasi/rea_tambat_pandu_tunda`;
            url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/rea_tambat_pandu_tunda";
        }
        else if (kondisiFlow == 3) {
            // url = `${this.appConfig.apiBaseUrl}/${this.sufApi}/realisasi/rea_pandu`;
            url = this.appConfig.apiBaseUrl + "/" + this.sufApiRealisasi + "/realisasi/rea_pandu";
        }
        else {
            // url = `${this.appConfig.apiBaseUrl}/${this.sufApi}/realisasi/rea_pandu_tunda`;
            url = this.appConfig.apiBaseUrl + "/" + this.sufApiRealisasi + "/realisasi/rea_pandu_tunda";
        }
        console.debug("REALISASI DENGAN FLOW", kondisiFlow, url, body);
        return this.http.post(url, body, options)
            .map(function (res) { return res.json(); })
            .subscribe(function (data) {
            console.log("Response", data);
        }, function (err) {
            console.log("ERROR!: ", err);
        });
    };
    SpkData.prototype.searchMdmDermaga = function (namaDermaga) {
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        var cabang = localStorage.getItem('kodecabang');
        // console.log(`${this.appConfig.apiBaseUrl}/${this.sufApi}/mdm_dermaga/search?nama=${namaDermaga}&kodeCabang=${cabang}&limit=20`);
        console.log(this.appConfig.apiBaseUrl + "/" + this.sufApiMdm + "/mdm_dermaga/search?nama=" + namaDermaga + "&kodeCabang=" + cabang + "&limit=20");
        // return this.http.get(`${this.appConfig.apiBaseUrl}/${this.sufApi}/mdm_dermaga/search?nama=${namaDermaga}&kodeCabang=${cabang}&limit=20`, {headers:headers})
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApiMdm + "/mdm_dermaga/search?nama=" + namaDermaga + "&kodeCabang=" + cabang + "&limit=20", { headers: headers })
            .map(function (res) { return res.json(); })
            .catch(this.handleError);
    };
    /**
     *
     * @param logBatal data
     */
    SpkData.prototype.postLogPembatalanSpkPandu = function (logBatal) {
        var body = JSON.stringify(logBatal);
        console.log("post progress", body);
        var url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/log_pembatalan_spk_pandu";
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        return this.http.post(url, body, options)
            .map(function (res) { return res.json(); })
            .subscribe(function (data) {
            console.log("Response", data);
        }, function (err) {
            console.log("ERROR!: ", err);
        });
    };
    /**
     * Put Tolak SPK by noPpkJasa
     * @param noPpkJasa
     */
    SpkData.prototype.putTolakSpk = function (noPpkJasa) {
        console.debug("putTolakSpk");
        var url = this.appConfig.apiBaseUrl + "/" + this.sufApi + "/surat_perintah_kerja_pandu/tolak_spk/" + noPpkJasa;
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["d" /* RequestOptions */]({ headers: headers });
        console.debug("DEBUG -> putTolakSpk", url);
        return this.http
            .put(url, JSON.stringify(noPpkJasa), { headers: headers })
            .map(function (res) { return res; });
    };
    return SpkData;
}());
SpkData = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_6__config_app_config__["a" /* AppConfig */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_device__["a" /* Device */],
        __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["o" /* Platform */]])
], SpkData);

//  
//# sourceMappingURL=spk-data.js.map

/***/ }),

/***/ 49:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function(process) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppConfig; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__services_config_config_service__ = __webpack_require__(121);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


var AppConfig = (function () {
    function AppConfig(_configService) {
        var _this = this;
        this._configService = _configService;
        this._configService.getConfig('assets/api/config.json').then(function (config) {
            console.log("this debug", config);
            _this.apiBaseUrl = config.apiUrl;
            _this.amsUrl = config.amsUrl;
            _this.env = config.env;
        });
    }
    AppConfig.prototype._readString = function (key, defaultValue) {
        var v = process.env[key];
        return v === undefined ? defaultValue : String(v);
    };
    return AppConfig;
}());
AppConfig = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__services_config_config_service__["a" /* ConfigService */]])
], AppConfig);

//# sourceMappingURL=app.config.js.map
/* WEBPACK VAR INJECTION */}.call(__webpack_exports__, __webpack_require__(37)))

/***/ }),

/***/ 50:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SqliteServiceProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_sqlite__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_sqlite_porter__ = __webpack_require__(696);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_moment__);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};








var SqliteServiceProvider = (function () {
    function SqliteServiceProvider(_platform, sqlite, sqlitePorter, storage, http) {
        var _this = this;
        this._platform = _platform;
        this.sqlite = sqlite;
        this.sqlitePorter = sqlitePorter;
        this.storage = storage;
        this.http = http;
        this.db = null;
        console.log('Hello Database Provider');
        this._platform.ready().then(function () {
            if (_this._platform.is('android') || _this._platform.is('ios')) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    _this.db = db;
                    _this.storage.get('database_filled').then(function (val) {
                        if (val) {
                            _this.databaseReady.next(true);
                        }
                        else {
                            _this.fillDatabase();
                        }
                    });
                });
                _this.sqlite = new __WEBPACK_IMPORTED_MODULE_4__ionic_native_sqlite__["a" /* SQLite */]();
                _this.sqlite.create({ name: "spk.db", location: "default" }).then(function (db) {
                    //spk table
                    db.executeSql('CREATE TABLE IF NOT EXISTS spk (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT, vjson TEXT, status INTEGER, tgl_spk TEXT, timestamp TEXT)', {})
                        .then(function () { return console.log('Executed SQL - spk table'); })
                        .catch(function (e) { return console.log(e); });
                    //detail spk table
                    db.executeSql('CREATE TABLE IF NOT EXISTS detail_spk (detail_spk_id INTEGER PRIMARY KEY UNIQUE, vjson TEXT)', {})
                        .then(function () { return console.log('Executed SQL - detail table'); })
                        .catch(function (e) { return console.log(e); });
                    //detail spk table
                    db.executeSql('CREATE TABLE IF NOT EXISTS history (history_id INTEGER PRIMARY KEY UNIQUE, vjson TEXT)', {})
                        .then(function () { return console.log('Executed SQL - detail table'); })
                        .catch(function (e) { return console.log(e); });
                    //msg queue
                    db.executeSql('CREATE TABLE IF NOT EXISTS event (event_id INTEGER PRIMARY KEY UNIQUE, msg TEXT, state INTEGER)', {})
                        .then(function () { return console.log('Executed SQL - event table'); })
                        .catch(function (e) { return console.log(e); });
                    //VERSION
                    db.executeSql('CREATE TABLE IF NOT EXISTS version (versi_id INTEGER PRIMARY KEY UNIQUE, versi TEXT, tgl_versi TEXT, status INTEGER)', {})
                        .then(function () { return console.log('Executed SQL - version table'); })
                        .catch(function (e) { return console.log(e); });
                    //REALISASI
                    db.executeSql('CREATE TABLE IF NOT EXISTS realisasi (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT, vjson TEXT, status INTEGER, progress TEXT, tgl_spk TEXT, timestamp TEXT)', {})
                        .then(function () { return console.log('Executed SQL - realisasi table'); })
                        .catch(function (e) { return console.log(e); });
                    //REALISASI MQTT LOG
                    db.executeSql('CREATE TABLE IF NOT EXISTS realisasi_mqtt_log (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT,vjson TEXT, msg_state TEXT, tgl_spk TEXT)', {});
                    //adjusttime mqtt log table
                    db.executeSql('CREATE TABLE IF NOT EXISTS adjusttime_mqtt_log (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT,vjson TEXT, msg_state TEXT, tgl_spk TEXT)', {});
                    //add column msg_state 
                    db.executeSql('ALTER TABLE spk ADD COLUMN msg_state TEXT', {});
                })
                    .catch(function (e) { return console.log("error create spk.db", e); });
                // }
            }
            else {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                _this.webdb.transaction(function (trx) {
                    //spk table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS spk (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT, vjson TEXT, status INTEGER, tgl_spk TEXT, timestamp TEXT)');
                    //detail spk table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS detail_spk (detail_spk_id INTEGER PRIMARY KEY UNIQUE, vjson TEXT)');
                    //detail spk table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS history (history_id INTEGER PRIMARY KEY UNIQUE, vjson TEXT)');
                    //event table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS event (event_id INTEGER PRIMARY KEY UNIQUE, msg TEXT, state INTEGER)');
                    //version table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS version (versi_id INTEGER PRIMARY KEY UNIQUE, versi TEXT, tgl_versi TEXT, status INTEGER)');
                    //realisasi table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS realisasi (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT, vjson TEXT, status INTEGER, progress TEXT, tgl_spk TEXT, timestamp TEXT)');
                    //realisasi mqtt log table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS realisasi_mqtt_log (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT,vjson TEXT, msg_state TEXT, tgl_spk TEXT)');
                    //adjusttime mqtt log table
                    trx.executeSql('CREATE TABLE IF NOT EXISTS adjusttime_mqtt_log (spk_id INTEGER PRIMARY KEY UNIQUE,username TEXT,vjson TEXT, msg_state TEXT, tgl_spk TEXT)');
                    //add column msg_state
                    trx.executeSql('ALTER TABLE spk ADD COLUMN msg_state TEXT');
                });
            }
        });
    }
    SqliteServiceProvider.prototype.fillDatabase = function () {
        var _this = this;
        this.http.get('assets/sql/dermaga_offline.sql')
            .map(function (res) { return res.text(); })
            .subscribe(function (sql) {
            _this.sqlitePorter.importSqlToDb(_this.db, sql)
                .then(function (data) {
                _this.databaseReady.next(true);
                _this.storage.set('database_filled', true);
            })
                .catch(function (e) { return console.error(e); });
        });
    };
    SqliteServiceProvider.prototype.openDB = function () {
        var _this = this;
        return this.sqlite.create({
            name: 'spk.db',
            location: 'default'
        })
            .then(function (db) {
            //storage object to property
            _this.db = db;
        });
    };
    /**
     * Save data spk to sqlite
     * @param DataArray : Object
     */
    SqliteServiceProvider.prototype.saveSpkToSqlite = function (DataArray) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                // using sqlite
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    DataArray.forEach(function (element) {
                        var repQuery, query, arD;
                        query = "INSERT INTO spk (spk_id,tgl_spk,vjson,status,timestamp,username) VALUES (?,?,?,?,?,?)";
                        arD = [element.id, element.jamPenetapanPandu, JSON.stringify(element), element.flagDone, __WEBPACK_IMPORTED_MODULE_7_moment__(element.created).unix(), localStorage.getItem('username')];
                        // console.log("INSERT QUERY SPK",query, arD, element)
                        db.executeSql(query, arD).then(function (data) {
                            // console.log("INSERT NATIVE: spk data");
                        }, function (error) {
                            // console.log("ERROR insert spk: " + JSON.stringify(error.err));
                            if (element.flagDone == 2)
                                repQuery = "update spk set msg_state = 'C', status=2 where spk_id = ? ";
                            else if (element.flagDone == 1)
                                repQuery = "update spk set msg_state = 'P' where spk_id = ? ";
                            var repArD = [element.id];
                            // console.log(repQuery, element.id);
                            db.executeSql(repQuery, repArD).then(function (data) {
                                // console.log("update msg state WEB: data spk ");
                            });
                            reject("ERROR insert spk: " + JSON.stringify(error.err));
                        });
                    });
                    resolve("data inserted");
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                //using websql
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                DataArray.forEach(function (element) {
                    var repQuery, query, arD;
                    query = "INSERT INTO spk (spk_id,tgl_spk,vjson,status,timestamp,username) VALUES (?,?,?,?,?,?)";
                    arD = [element.id, element.jamPenetapanPandu, JSON.stringify(element), element.flagDone, __WEBPACK_IMPORTED_MODULE_7_moment__(element.created).unix(), localStorage.getItem('username')];
                    _this.webdb.transaction(function (trx) {
                        trx.executeSql(query, arD, function (data) {
                            // console.log("insert spk");
                        }, function (error, er) {
                            if (element.flagDone == 2)
                                repQuery = "update spk set msg_state = 'C', status=2 where spk_id = ?";
                            else if (element.flagDone == 1)
                                repQuery = "update spk set msg_state = 'P' where spk_id = ?";
                            var repArD = [element.id];
                            // console.log(repQuery, element.id);
                            trx.executeSql(repQuery, repArD, function (data) {
                                // console.log("update msg state WEB: data spk ");
                            }, function (error, er) {
                                // console.log("ERROR update msg detail spk: " + er);
                            });
                        });
                        resolve("data inserted");
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.getSpkOfflineData = function (tglMulai, tanggalAkhir) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                var query = "SELECT * FROM spk where datetime(tgl_spk) >= datetime('" + tglMulai + " 00:00:00') and datetime(tgl_spk) <= datetime('" + tanggalAkhir + " 23:59:59') and username='" + localStorage.getItem('username') + "' order by spk_id desc";
                var arr = [];
                // console.log("native array data", query);
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        if (data.rows.length > 0) {
                            for (var i = 0; i < data.rows.length; i++) {
                                var item = data.rows.item(i);
                                arr.push(item);
                            }
                        }
                        resolve(arr);
                    }, function (error) {
                        reject(error);
                        // console.log("error get spk", error);
                    });
                })
                    .catch(function (e) { return console.log("error get spk offline sqliteservice", e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var queryWeb = "SELECT a.* FROM spk a \n                                    where datetime(a.tgl_spk) >= datetime('" + tglMulai + " 00:00:00') \n                                    and datetime(a.tgl_spk) <= datetime('" + tanggalAkhir + " 23:59:59')  \n                                    and a.username='" + localStorage.getItem('username') + "' \n                                    order by a.spk_id desc";
                // console.log("web query",queryWeb);
                var arr = [];
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(queryWeb, [], function (t, data) {
                        // console.log("from select", data);
                        for (var i = 0; i < data.rows.length; i++) {
                            arr.push(data.rows.item(i));
                        }
                        //  console.log(arr);
                        resolve(arr);
                    }, function (error) {
                        // console.log(error);
                        reject(error);
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.deleteSpkOfflineData = function () {
        this.sqlite.create({
            name: 'spk.db',
            location: 'default'
        })
            .then(function (db) {
            db.executeSql("DELETE FROM spk", []).then(function (data) {
                // console.log("DELETED: " + JSON.stringify(data));
            }, function (error) {
                // console.log("ERROR kod brisanja: " + JSON.stringify(error.err));
            });
        })
            .catch(function (e) { return console.log(e); });
    };
    /**
     * update spk status
     * @param spk_id
     */
    SqliteServiceProvider.prototype.updateSpkStatus = function (spk_id, state) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    db.executeSql("UPDATE spk set status = 2, msg_state = '" + state + "' where spk_id = ?", [spk_id]).then(function (data) {
                        // console.log("update native spk status");
                        resolve("update status spk berhasil");
                    }, function (error) {
                        // console.log("error update spk status");
                        reject("gagal");
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                var query = "UPDATE spk set status = 2, msg_state = '" + state + "' where spk_id = ?";
                var arD = [spk_id];
                // console.log("INSERT QUERY DETAIL SPK",query, arD)
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        resolve("update status spk berhasil");
                        // console.log("update web spk status: ", spk_id);
                    }, function (error) {
                        reject("gagal");
                        console.log("ERROR update status spk: " + JSON.stringify(error.err));
                    });
                });
            });
        }
    };
    /**
     * update message status
     * @param spk_id
     * @param state
     */
    SqliteServiceProvider.prototype.updateMessageStatus = function (spk_id, state) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    db.executeSql("UPDATE spk set msg_state = '" + state + "', status=2 where spk_id = ?", [spk_id]).then(function (data) {
                        // console.log("update native spk message status");
                        resolve();
                    }, function (error) {
                        // console.log("error update spk message status");
                        // reject()
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                var query = "UPDATE spk set msg_state = '" + state + "', status=2 where spk_id = ?";
                var arD = [spk_id];
                // console.log(query);
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        // console.log("update web spk message status: ", spk_id);
                        resolve();
                    }, function (error) {
                        // console.log("ERROR update message status spk: " + JSON.stringify(error.err));
                        // reject()
                    });
                });
            });
        }
    };
    /**
     * Detail SPK
     * @param DataArrayTwo
     * @param detail_spk_id
     */
    SqliteServiceProvider.prototype.saveDetailSpkToSqlite = function (DataArrayTwo, detail_spk_id) {
        if (this._platform.is('android') || this._platform.is('ios')) {
            this.sqlite.create({
                name: 'spk.db',
                location: 'default'
            })
                .then(function (db) {
                db.executeSql("REPLACE INTO detail_spk (detail_spk_id,vjson) VALUES (?,?)", [detail_spk_id, DataArrayTwo]).then(function (data) {
                    // console.log("INSERT NATIVE");
                }, function (error) {
                    // console.log("ERROR insert detail spk: " + error);
                });
            })
                .catch(function (e) { return console.log(e); });
        }
        else {
            var query_1 = "REPLACE INTO detail_spk (detail_spk_id,vjson) VALUES (?,?)";
            var arD_1 = [detail_spk_id, DataArrayTwo];
            this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
            this.webdb.transaction(function (trx) {
                trx.executeSql(query_1, arD_1, function (data) {
                    // console.log("INSERT detail WEB")        
                }, function (error) {
                    // console.log("ERROR insert detail spk: " + JSON.stringify(error.err));
                });
            });
        }
    };
    SqliteServiceProvider.prototype.getDetailSpkOfflineData = function (detailSpkId) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var query = "SELECT vjson FROM detail_spk where detail_spk_id =" + detailSpkId;
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        var LocalArrayTwo;
                        if (data.rows.length > 0) {
                            // for(let i = 0; i < data.rows.length; i++) {
                            //     LocalArrayTwo.push(data.rows);
                            // }
                            LocalArrayTwo = data.rows.item(0);
                        }
                        // console.log("RESULT DETAIL: ", LocalArrayTwo);
                        resolve(LocalArrayTwo);
                    }, function (error) {
                        reject(error);
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var query = "SELECT vjson FROM detail_spk where detail_spk_id =" + detailSpkId;
                // console.log((query));
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, [], function (t, data) {
                        resolve(data.rows.item(0));
                    }, function (error) {
                        // console.log(error);
                        reject(error);
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.deleteDetailSpkOfflineData = function () {
        this.sqlite.create({
            name: 'spk.db',
            location: 'default'
        })
            .then(function (db) {
            db.executeSql("DELETE FROM detail_spk", []).then(function (data) {
                // console.log("DELETED: " + JSON.stringify(data));
            }, function (error) {
                // console.log("ERROR kod delete: " + JSON.stringify(error.err));
            });
        })
            .catch(function (e) { return console.log(e); });
    };
    /**
     * History data
     *
     * @param DataArrayTwo
     * @param history_id
     */
    SqliteServiceProvider.prototype.saveDetailHistoryToSqlite = function (DataArrayTwo, history_id) {
        if (this._platform.is('android') || this._platform.is('ios')) {
            this.sqlite.create({
                name: 'spk.db',
                location: 'default'
            })
                .then(function (db) {
                // console.log("INSERT INTO history (history_id,vjson) VALUES (?,?)", [history_id, DataArrayTwo]);
                db.executeSql("REPLACE INTO history (history_id,vjson) VALUES (?,?)", [history_id, DataArrayTwo]).then(function (data) {
                    // console.log("INSERTED QUERY history: " + JSON.stringify(data));
                }, function (error) {
                    // console.log("ERROR insert history spk: " + error);
                });
            })
                .catch(function (e) { return console.log(e); });
        }
        else {
            var query_2 = "REPLACE INTO history (detail_spk_id,vjson) VALUES (?,?)";
            var arD_2 = [history_id, DataArrayTwo];
            // console.log("INSERT QUERY HISTORY SPK",query, arD)
            this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
            this.webdb.transaction(function (trx) {
                trx.executeSql(query_2, arD_2, function (data) {
                    // console.log("INSERTED DETAIL: ", history_id);
                }, function (error) {
                    // console.log("ERROR insert history spk: " + JSON.stringify(error.err));
                });
            });
        }
    };
    /**
     * Detail History
     *
     * @param historyId
     */
    SqliteServiceProvider.prototype.getDetailHistoryOfflineData = function (historyId) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var query = "SELECT vjson FROM history where detail_spk_id =" + historyId;
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        var LocalArrayTwo;
                        if (data.rows.length > 0) {
                            // for(let i = 0; i < data.rows.length; i++) {
                            //     LocalArrayTwo.push(data.rows);
                            // }
                            LocalArrayTwo = data.rows.item(0);
                        }
                        // console.log("RESULT DETAIL: ", LocalArrayTwo);
                        resolve(LocalArrayTwo);
                    }, function (error) {
                        reject(error);
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var query = "SELECT vjson FROM history where detail_spk_id =" + historyId;
                // console.log((query));
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, [], function (t, data) {
                        resolve(data.rows.item(0));
                    }, function (error) {
                        // console.log(error);
                        reject(error);
                    });
                });
            });
        }
    };
    /**
     * Save Versi aplikasi
     *
     * @param DataArray
     */
    SqliteServiceProvider.prototype.saveVersiToSqlite = function (DataArray) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                // using sqlite
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    DataArray.forEach(function (element) {
                        var query = "REPLACE INTO version (versi_id,versi,tgl_versi,status) VALUES (?,?,?,?)";
                        var arD = [element.id, element.versi, element.tgl, element.status];
                        // console.log("INSERT QUERY version",query, arD, element)
                        db.executeSql(query, arD).then(function (data) {
                            // console.log("INSERTED: " + JSON.stringify(data), DataArray);
                        }, function (error) {
                            // console.log("ERROR insert version: " + JSON.stringify(error.err));
                            reject("ERROR insert version: " + JSON.stringify(error.err));
                        });
                    });
                    resolve("data versi inserted");
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                //using websql
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                DataArray.forEach(function (element) {
                    var query = "REPLACE INTO version (versi_id,versi,tgl_versi,status) VALUES (?,?,?,?)";
                    var arD = [element.id, element.versi, element.tgl, element.status];
                    // console.log("INSERT QUERY VERSION",query, arD, element)
                    _this.webdb.transaction(function (trx) {
                        trx.executeSql(query, arD, function (data) {
                            // console.log("INSERTED: " + JSON.stringify(data), DataArray);
                        }, function (error) {
                            // console.log("ERROR insert spk: " + JSON.stringify(error.err));
                            reject("ERROR insert spk: " + JSON.stringify(error.err));
                        });
                        resolve("data VERSION inserted");
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.saveRealisasiToSqlite = function (DataArray) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                // using sqlite
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var element = DataArray;
                    var query = "REPLACE INTO realisasi (spk_id,tgl_spk,vjson,status,timestamp,username) VALUES (?,?,?,?,?,?)";
                    var arD = [element.id, element.created, JSON.stringify(element), 2, __WEBPACK_IMPORTED_MODULE_7_moment__(element.created).unix(), localStorage.getItem('username')];
                    // console.log("INSERT QUERY SPK",query, arD, element)
                    db.executeSql(query, arD).then(function (data) {
                        // console.log("INSERTED: " + JSON.stringify(data), DataArray);
                        resolve("data inserted");
                    }, function (error) {
                        // console.log("ERROR insert realisasi: " + JSON.stringify(error.err));
                        reject("ERROR insert realisasi: " + JSON.stringify(error.err));
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                //using websql
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                // console.log('Data Array insert replace',DataArray)
                var element = DataArray;
                var query = "REPLACE INTO realisasi (spk_id,tgl_spk,vjson,status,timestamp,username) VALUES (?,?,?,?,?,?)";
                var arD = [element.id, element.created, JSON.stringify(element), 2, __WEBPACK_IMPORTED_MODULE_7_moment__(element.created).unix(), localStorage.getItem('username')];
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        // console.log("INSERT: Realisasi");
                        resolve("data inserted");
                    }, function (error) {
                        // console.log("ERROR insert spk: " + JSON.stringify(error.err));
                        reject("ERROR insert realisasi: " + JSON.stringify(error.err));
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.getRealisasiOffline = function (spk_id) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var query = "SELECT * FROM realisasi where spk_id =" + spk_id;
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        if (data.rows.length > 0)
                            resolve(data.rows.item(0));
                        else
                            reject(1);
                    }, function (error) {
                        // console.log("error sqlite offline history",error);
                        reject(1);
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var query = "SELECT * FROM realisasi where spk_id =" + spk_id;
                // console.log((query));
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, [], function (t, data) {
                        if (data.rows.length > 0)
                            resolve(data.rows.item(0));
                        else
                            reject(1);
                    }, function (error) {
                        // console.log("error sqlite offline history",error);
                        reject(error);
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.updateProgressRealisasi = function (spk_id, dataProgress) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    db.executeSql("UPDATE realisasi set status=2, progress='" + dataProgress + "' where spk_id = ?", [spk_id]).then(function (data) {
                        // console.log("update native realisasi");
                        resolve("berhasil update progress realisasi");
                    }, function (error) {
                        // console.log("update spk");
                        reject("error update progress realisasi");
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                var query = "UPDATE realisasi set status=2, progress = ? where spk_id = ?";
                var arD = [dataProgress, spk_id];
                // console.log("INSERT QUERY DETAIL SPK",query, arD)
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        // console.log("update web realisasi status: ", spk_id);
                        resolve("berhasil update progress realisasi");
                    }, function (error) {
                        // console.log("ERROR update realisasi status: " + JSON.stringify(error.err));
                        reject("error update progress realisasi");
                    });
                });
            });
        }
    };
    /**
     * Save data realisasi mqtt log to sqlite
     * @param DataArray : Object
     * @param state : String
     *  P = pendung
     *  C = Created
     */
    SqliteServiceProvider.prototype.saveRealisasiMqttLog = function (DataArray, state) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                // using sqlite
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var element = DataArray;
                    var query, arD;
                    query = "INSERT INTO realisasi_mqtt_log (spk_id,tgl_spk,vjson,msg_state) VALUES (?,?,?,?)";
                    arD = [element.id, element.jamPenetapanPandu, JSON.stringify(element), state];
                    db.executeSql(query, arD).then(function (data) {
                        resolve("data inserted");
                    }, function (error) {
                        reject("ERROR insert spk: " + JSON.stringify(error.err));
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                //using websql
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var element = DataArray;
                var query, arD;
                query = "INSERT INTO realisasi_mqtt_log (spk_id,tgl_spk,vjson,msg_state) VALUES (?,?,?,?)";
                arD = [element.id, element.jamPenetapanPandu, JSON.stringify(element), state];
                // console.log(query, arD);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        // console.log("insert spk");
                        resolve("data inserted");
                    }, function (error, er) {
                        reject();
                    });
                });
            });
        }
    };
    /**
     * Save data realisasi mqtt log to sqlite
     * @param DataArray : Object
     */
    SqliteServiceProvider.prototype.saveAddjusttimeMqttLog = function (DataArray) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                // using sqlite
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var element = DataArray;
                    var query, arD;
                    query = "REPLACE INTO adjusttime_mqtt_log (spk_id,tgl_spk,vjson,msg_state) VALUES (?,?,?,?)";
                    arD = [element.id, element.created, JSON.stringify(element), "P"];
                    db.executeSql(query, arD).then(function (data) {
                        resolve("data inserted");
                    }, function (error) {
                        reject("ERROR insert spk: " + JSON.stringify(error.err));
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                //using websql
                console.log("adjusttime", DataArray);
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var element = DataArray;
                var query, arD;
                query = "REPLACE INTO adjusttime_mqtt_log (spk_id,tgl_spk,vjson,msg_state) VALUES (?,?,?,?)";
                arD = [element.id, element.created, JSON.stringify(element), "P"];
                // console.log(query, arD);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        // console.log("insert spk");
                        resolve("data inserted");
                    }, function (error, er) {
                        reject();
                    });
                });
            });
        }
    };
    /**
     * Insert Data to spk and detail
     * from mqtt
     *
     * @param DataArray
     */
    SqliteServiceProvider.prototype.saveSpkAndDetail = function (DataArray) {
        var _this = this;
        return new Promise(function (resolve, reject) {
            var toSpk = [DataArray.detailFromList];
            var toDetail = DataArray.detailFromObject;
            // console.log("insert to spk", toSpk);
            // console.log("insert to detail", toDetail);
            _this.saveSpkToSqlite(toSpk);
            _this.saveDetailSpkToSqlite(JSON.stringify(toDetail), toDetail.id);
            resolve();
        });
    };
    SqliteServiceProvider.prototype.getRealisasiPending = function () {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                var query = 'select a.* from realisasi a, realisasi_mqtt_log b where a.spk_id = b.spk_id and b.msg_state = "P"';
                var arr = [];
                // console.log("native array data", query);
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        if (data.rows.length > 0) {
                            for (var i = 0; i < data.rows.length; i++) {
                                var item = data.rows.item(i);
                                arr.push(item);
                            }
                        }
                        resolve(arr);
                    }, function (error) {
                        reject(error);
                        // console.log("error get spk", error);
                    });
                })
                    .catch(function (e) { return console.log("error get spk offline sqliteservice", e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var queryWeb = "select a.* from realisasi a, realisasi_mqtt_log b where a.spk_id = b.spk_id and b.msg_state = \"P\"";
                // console.log("web query",queryWeb);
                var arr = [];
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(queryWeb, [], function (t, data) {
                        // console.log("from select", data);
                        for (var i = 0; i < data.rows.length; i++) {
                            arr.push(data.rows.item(i));
                        }
                        //  console.log(arr);
                        resolve(arr);
                    }, function (error) {
                        // console.log(error);
                        reject(error);
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.getRealisasiMqttLogOffline = function (spk_id) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var query = "SELECT * FROM realisasi_mqtt_log where spk_id =" + spk_id;
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        var LocalArrayTwo;
                        if (data.rows.length > 0)
                            resolve(data.rows.item(0));
                        else
                            reject(1);
                    }, function (error) {
                        // console.log("error sqlite offline history",error);
                        reject(1);
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var query = "SELECT * FROM realisasi_mqtt_log where spk_id =" + spk_id;
                // console.log((query));
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, [], function (t, data) {
                        var LocalArrayTwo = [];
                        // console.log("detail data history",data.rows, "length", data.rows.length, query);
                        if (data.rows.length > 0)
                            resolve(data.rows.item(0));
                        else
                            reject(1);
                    }, function (error) {
                        // console.log("error sqlite offline history",error);
                        reject(error);
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.updateRealisasiLog = function (spk_id) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    db.executeSql("UPDATE realisasi_mqtt_log set msg_state = 'C' where spk_id = ?", [spk_id]).then(function (data) {
                        // console.log("update native realisasi log");
                    }, function (error) {
                        // console.log("update spk");
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            var query_3 = "UPDATE realisasi_mqtt_log set msg_state = 'C' where spk_id = ?";
            var arD_3 = [spk_id];
            // console.log("INSERT QUERY DETAIL SPK",query, arD)
            this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
            this.webdb.transaction(function (trx) {
                trx.executeSql(query_3, arD_3, function (data) {
                    // console.log("update web realisasi log status: ", spk_id);
                }, function (error) {
                    // console.log("ERROR update realisasi status: " + JSON.stringify(error.err));
                });
            });
        }
    };
    SqliteServiceProvider.prototype.getLog = function (query, action) {
        var _this = this;
        var arr = [];
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    if (action == "GET")
                        db.executeSql(query, []).then(function (data) {
                            for (var i = 0; i < data.rows.length; i++) {
                                arr.push(data.rows.item(i));
                            }
                            resolve(arr);
                        }, function (error) {
                            reject("error get all log:" + error);
                        });
                    else if (action == "PUT" || action == "POST")
                        db.executeSql(query, []).then(function (data) {
                            resolve(data);
                        }, function (error) {
                            reject(error);
                        });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                var arr = [];
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                _this.webdb.transaction(function (trx) {
                    if (action == "GET")
                        _this.webdb.transaction(function (trx) {
                            trx.executeSql(query, [], function (t, data) {
                                for (var i = 0; i < data.rows.length; i++) {
                                    arr.push(data.rows.item(i));
                                }
                                resolve(arr);
                            }, function (error) {
                                reject("error get all log:" + error);
                            });
                        });
                    else if (action == "PUT" || action == "POST")
                        trx.executeSql(query, [], function (data) {
                            resolve(data);
                        }, function (error) {
                            reject(error);
                        });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.getDermagaOffline = function (namaDermanga, kodeCabang) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    var query = "select * from dermaga where kdCabang=" + kodeCabang + " and mdmgNama like '%" + namaDermanga + "%'";
                    // console.log(query);
                    db.executeSql(query, []).then(function (data) {
                        var LocalArrayTwo = [];
                        if (data.rows.length > 0) {
                            for (var i = 0; i < data.rows.length; i++) {
                                console.log("dermaga", data.rows.item(i), "index", i);
                                LocalArrayTwo.push(data.rows.item(i));
                            }
                            console.log("RESULT dermaga: ", LocalArrayTwo);
                            resolve(LocalArrayTwo);
                        }
                        else {
                            reject(1);
                        }
                    }, function (error) {
                        // console.log("error sqlite offline history",error);
                        reject(1);
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                var query = "select * from dermaga where kdCabang=" + kodeCabang + " and mdmgNama like '%" + namaDermanga + "%'";
                console.log(query);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, [], function (t, data) {
                        var LocalArrayTwo = [];
                        if (data.rows.length > 0) {
                            for (var i = 0; i < data.rows.length; i++) {
                                console.log("dermaga", data.rows.item(i), "index", i);
                                LocalArrayTwo.push(data.rows.item(i));
                            }
                            console.log("RESULT dermaga: ", LocalArrayTwo);
                            resolve(LocalArrayTwo);
                        }
                        else {
                            reject(1);
                        }
                    }, function (error) {
                        // console.log("error sqlite offline history",error);
                        reject(error);
                    });
                });
            });
        }
    };
    SqliteServiceProvider.prototype.deleteSpk = function (spk_id) {
        var _this = this;
        if (this._platform.is('android') || this._platform.is('ios')) {
            return new Promise(function (resolve, reject) {
                _this.sqlite.create({
                    name: 'spk.db',
                    location: 'default'
                })
                    .then(function (db) {
                    db.executeSql("DELETE FROM spk where spk_id = ?", [spk_id]).then(function (data) {
                        resolve(true);
                    }, function (error) {
                        reject("error");
                    });
                })
                    .catch(function (e) { return console.log(e); });
            });
        }
        else {
            return new Promise(function (resolve, reject) {
                var query = "DELETE FROM spk where spk_id = ?";
                var arD = [spk_id];
                _this.webdb = window.openDatabase('__vasaPanduDb', '', 'Mobile Pandu DB', 2 * 1024 * 1024);
                _this.webdb.transaction(function (trx) {
                    trx.executeSql(query, arD, function (data) {
                        resolve(true);
                    }, function (error) {
                        reject("error");
                    });
                });
            });
        }
    };
    return SqliteServiceProvider;
}());
SqliteServiceProvider = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_3_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_sqlite__["a" /* SQLite */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_sqlite_porter__["a" /* SQLitePorter */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_2__angular_http__["b" /* Http */]])
], SqliteServiceProvider);

//# sourceMappingURL=sqlite-service.js.map

/***/ }),

/***/ 51:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Pnetwork; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_network__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/*
  Generated class for the Pnetwork provider.

  See https://angular.io/docs/ts/latest/guide/dependency-injection.html
  for more info on providers and Angular 2 DI.
*/
var Pnetwork = (function () {
    function Pnetwork(http, events, storage, network, _sql) {
        this.http = http;
        this.events = events;
        this.storage = storage;
        this.network = network;
        this._sql = _sql;
        this.mqtt_state = false;
        this.network_state = true;
        this.gps_state = false;
        this.mqtt_title = null;
        this.network_title = null;
        console.log('Hello Pnetwork Provider');
        this.monConnection();
        /**
         * listen network status
         */
        this.listenNetworkEvents();
    }
    Pnetwork.prototype.monConnection = function () {
        var _this = this;
        this.disconnectSub = this.network.onDisconnect().subscribe(function () {
            console.log('network was disconnected :-(');
            _this.storage.set('network_status', false);
            _this.events.publish('network:state', false);
            console.log('you are offline');
        });
        this.connectSub = this.network.onConnect().subscribe(function () {
            console.log('network connected!');
            _this.storage.set('network_status', true);
            _this.events.publish('network:state', true);
            console.log('you are online');
        });
    };
    Pnetwork.prototype.listenNetworkEvents = function () {
        var _this = this;
        this.events.subscribe('mqtt:state', function (state) {
            console.log("mqtt state ", state);
            _this.mqtt_state = state;
            _this.changeStatus(_this.mqtt_state, 'mqtt_title');
        });
        this.events.subscribe('network:state', function (state) {
            console.log("network state ", state);
            _this.network_state = state;
            _this.changeStatus(_this.network_state, 'network_title');
        });
    };
    Pnetwork.prototype.changeStatus = function (status, title) {
        if (status)
            this[title] = "Connected..";
        else
            this[title] = "Disconnect..";
    };
    return Pnetwork;
}());
Pnetwork = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_network__["a" /* Network */],
        __WEBPACK_IMPORTED_MODULE_6__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */]])
], Pnetwork);

//# sourceMappingURL=pnetwork.js.map

/***/ }),

/***/ 676:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return LeafletView; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_leaflet__ = __webpack_require__(1093);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_leaflet___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_leaflet__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_geojson__ = __webpack_require__(1094);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_geojson___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_geojson__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_ionic_native__ = __webpack_require__(210);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_location_tracker__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_notification__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_geojson__ = __webpack_require__(242);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_pnetwork__ = __webpack_require__(51);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var PERMISSION_DENIED = 1;
var POSITION_UNAVAILABLE = 2;
var TIMEOUT = 3;
var LeafletView = (function () {
    function LeafletView(_nav, _events, _platform, _app, locationTracker, notification, geojs, loadingCtrl, toast, pnetwork) {
        this.locationTracker = locationTracker;
        this.notification = notification;
        this.geojs = geojs;
        this.loadingCtrl = loadingCtrl;
        this.toast = toast;
        this.pnetwork = pnetwork;
        this.refreshInterval = 1;
        this.searchName = [];
        this.tempSearchName = [];
        this.searchItem = false;
        this.loader = this.loadingCtrl.create({
            content: "Please wait...",
            duration: 5000
        });
    }
    LeafletView.prototype.ionViewDidLoad = function () {
        console.log("map enter");
        this.loader.present();
        this._map = L.map('map', { zoomControl: false }).setView([-7.135073, 112.681487], 13);
        // L.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png").addTo(this._map);
        L.tileLayer("http://140.211.167.105/{z}/{x}/{y}.png").addTo(this._map);
        // L.tileLayer("http://{s}.tiles.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoiZGVkZHlzaXAiLCJhIjoiY2l3eHE4Z256MDE0OTJ5bzBzNXdtaDFyNSJ9.8LE3GwYl3j5knjHY7dWRtw").addTo(this._map);
        this.loader.present();
        this.appendShip(1);
        this.currentLoc();
    };
    LeafletView.prototype.ionViewDidEnter = function () {
        var _this = this;
        document.querySelector('.leaflet-control-attribution')['style'] = "display:none";
        console.log('read intRefresh', this.intRefresh);
        console.log('initiate clear interval');
        clearInterval(this.intRefresh);
        console.log('initiate set interval');
        this.intRefresh = setInterval(function () {
            _this.setShip(_this.amsToken);
        }, this.refreshInterval * 60 * 1000);
    };
    LeafletView.prototype.ionViewDidLeave = function () {
        console.log('clear interval');
        clearInterval(this.intRefresh);
    };
    LeafletView.prototype.showToast = function (msg) {
        // let toast = new Toast(this.app);
        // toast.setMessage(msg);
        // toast.present();
    };
    // Update screen according to new location
    LeafletView.prototype.setCurrentLocation = function (location) {
        console.log("!!!DEMO : setCurrentLocation, location: { " + Number(location.latitude) + ", " + Number(location.longitude) + "}");
        // Update leaflet map
        this.locations.addLatLng([location.latitude, location.longitude]);
        this.map.fitBounds(this.locations.getBounds());
    };
    // Only used for non android device
    LeafletView.prototype.onGetLocations = function () {
        __WEBPACK_IMPORTED_MODULE_5_ionic_native__["a" /* BackgroundGeolocation */].getLocations()
            .then(function (res) {
            console.log(res);
        })
            .catch(function (err) {
            console.error("On Get Locations : error = " + err);
        });
    };
    LeafletView.prototype.onRefresh = function () {
        // this.loader.present()
        this.refreshShip();
    };
    LeafletView.prototype.onClickHome = function () {
        var _this = this;
        __WEBPACK_IMPORTED_MODULE_5_ionic_native__["d" /* Geolocation */].getCurrentPosition(this.options)
            .then(function (resp) {
            console.log("!!!DEMO : Geolocation : " + resp.coords.latitude + ", " + resp.coords.longitude);
            _this.showToast("Your location is : " + resp.coords.longitude + ", " + resp.coords.latitude);
            // center on the location
            _this._map.setView([resp.coords.latitude, resp.coords.longitude], 17);
            _this.setCurrentLocation(resp.coords);
        })
            .catch(function (error) {
            console.log("!!!DEMO : Failed to get Geolocation, errors :" + error);
            if (error.code == PERMISSION_DENIED) {
                console.log("!!!DEMO : On permission denied -> REPORT TO DEV");
            }
            else if (error.code == POSITION_UNAVAILABLE) {
                console.log("!!!DEMO : On position unavailable -> switch on location, activate gps, wifi network");
            }
            else if (error.code == TIMEOUT) {
                _this.showToast("On timeout -> switch on location, activate gps, wifi network -> wait");
            }
        });
    };
    LeafletView.prototype.currentLoc = function () {
        var _this = this;
        this.lat = this.locationTracker.lat;
        this.lon = this.locationTracker.lng;
        this._currentLatLng = [this.lat, this.lon];
        var pilotIcon = L.icon({
            iconUrl: 'assets/img/pilot.png',
            iconSize: [50, 50],
            iconAnchor: [16, 37],
            popupAnchor: [0, -28]
        });
        //console.log("Update position");
        if (!this._marker) {
            this._marker = __WEBPACK_IMPORTED_MODULE_3_leaflet__["marker"](this._currentLatLng, { icon: pilotIcon }).addTo(this._map);
        }
        this._marker.setLatLng(this._currentLatLng).update();
        setTimeout(function () {
            _this.currentLoc();
        }, 3000);
    };
    LeafletView.prototype.onEachFeature = function (feature, layer) {
        var html = "<table width=100%>\n                  <tbody>\n                    <tr >\n                      <td style=\"width:50px\">Name</td>\n                      <td style=\"width:50px\">" + feature.properties.name + "</td>\n                      <td style=\"width:50px\">Longitude</td>\n                      <td style=\"width:50px\">" + feature.geometry.coordinates[0] + "</td>\n                    </tr>\n                    <tr >\n                      <td>MMSI</td>\n                      <td>" + feature.properties.mmsi + "</td>\n                      <td>Latitude</td>\n                      <td>" + feature.geometry.coordinates[1] + "</td>\n                    </tr>\n                    <tr >\n                      <td>Call Sign</td>\n                      <td>" + feature.properties.callSign + "</td>\n                      <td>Speed</td>\n                      <td>" + feature.properties.speed + " kts</td>\n                    </tr>\n                    <tr >\n                      <td>IMO Number</td>\n                      <td>" + feature.properties.code + "</td>\n                      <td>Heading</td>\n                      <td>" + feature.properties.heading + "\u00B0</td>\n                    </tr>\n                  </tbody>\n                </table>";
        var popupContent = html;
        //console.log(feature, layer)
        if (feature.properties && feature.properties.popupContent) {
            popupContent += feature.properties.popupContent;
        }
        layer.bindPopup(popupContent);
    };
    LeafletView.prototype.onEachFeaturePilot = function (feature, layer) {
        var html = "<table width=100%>\n                  <tbody>\n                    <tr >\n                      <td style=\"width:100px\">Nama Petugas</td>\n                      <td style=\"width:150px\">" + feature.properties.namaPetugas + "</td>\n                    </tr>\n                    <tr >\n                      <td style=\"width:100px\">NIPP Petugas</td>\n                      <td >" + feature.properties.nipPandu + "</td>\n                    </tr>\n                    <tr >\n                      <td>Tgl Aktivitas</td>\n                      <td style=\"width:150px\">" + __WEBPACK_IMPORTED_MODULE_2_moment__(feature.properties.tglAktivitas).format('DD-MM-YYYY HH:mm') + "</td>\n                    </tr>\n                  </tbody>\n                </table>";
        var popupContent = html;
        //console.log(feature, layer)
        if (feature.properties && feature.properties.popupContent) {
            popupContent += feature.properties.popupContent;
        }
        layer.bindPopup(popupContent);
    };
    LeafletView.prototype.setColorShip = function (color) {
        var cl = "ship-gray.png";
        switch (color) {
            case "B":
                cl = "blue.png";
                break;
            case "Y":
                cl = "yellow.png";
                break;
            case "R":
                cl = "red.png";
                break;
            case "G":
                cl = "green.png";
                break;
        }
        return cl;
    };
    /**
     * set ship icon
     *
     * @param xtoken
     */
    LeafletView.prototype.setShip = function (xtoken) {
        var _this = this;
        var self = this;
        var pilotIcon = L.icon({
            iconUrl: 'assets/img/pilot.png',
            iconSize: [50, 50],
            iconAnchor: [16, 37],
            popupAnchor: [0, -28]
        });
        var pilotIconOff = L.icon({
            iconUrl: 'assets/img/pilot-off.png',
            iconSize: [50, 50],
            iconAnchor: [16, 37],
            popupAnchor: [0, -28]
        });
        var ArrowMarker = L.Marker.extend({
            _reset: function () {
                var pos = this._map.latLngToLayerPoint(this._latlng).round();
                //console.log("position", pos)
                L.DomUtil.setPosition(this._icon, pos);
                if (this._shadow) {
                    L.DomUtil.setPosition(this._shadow, pos);
                }
                if (this.options.iconAngle) {
                    this._icon.style.WebkitTransform = this._icon.style.WebkitTransform + ' rotate(' + this.options.iconAngle + 'deg)';
                    this._icon.style.MozTransform = 'rotate(' + this.options.iconAngle + 'deg)';
                    this._icon.style.MsTransform = 'rotate(' + this.options.iconAngle + 'deg)';
                    this._icon.style.OTransform = 'rotate(' + this.options.iconAngle + 'deg)';
                }
                this._icon.style.zIndex = pos.y;
            }
        });
        this.geojs.getShipPosition(xtoken).then(function (data) {
            _this.items = data.features;
            console.log("ship data", _this.items);
            _this.searchName = [];
            for (var i in _this.items) {
                _this.searchName.push(_this.items[i].properties.name);
            }
            // setTimeout(() => {
            //   console.log("test get object",this.geojs.getObjects(this.items,"name","ZALEHA FITRAT, KM"));
            //   var needle = "ZALEHA FITRAT, KM"
            //   let obj = this.items.find(x => x.properties.name === needle);
            //   let index = this.items.indexOf(obj);
            //   console.log(this.items[index].geometry);
            //   // array.fill(obj.name='some new string', index, index++);
            //   console.log(this.searchName);
            // }, 5000);
            _this.layerShip.clearLayers();
            _this.layerShip = __WEBPACK_IMPORTED_MODULE_3_leaflet__["geoJSON"](data, {
                pointToLayer: function (feature, latlng) {
                    //console.log("Color ship",self.setColorShip(feature.properties['status']));
                    return new ArrowMarker(latlng, {
                        icon: L.divIcon({
                            className: "css-icon",
                            iconSize: [50, 50],
                            iconAnchor: [16, 37],
                            popupAnchor: [0, -28],
                            html: '<img src="assets/img/' + self.setColorShip(feature.properties['status']) + '" style="-webkit-transform: rotate(' + feature.properties['heading'] + 'deg); -moz-transform:rotate(' + feature.properties['heading'] + 'deg);" />'
                        }),
                        iconAngle: feature.properties['heading']
                    });
                },
                onEachFeature: _this.onEachFeature
            }).addTo(_this._map);
        }, function (err) {
            console.log('err', err);
        }).catch(function (err) {
            console.log("Error load ship", err);
            _this.toast.create({
                closeButtonText: "Close",
                message: err
            });
        });
        var geoData;
        var selfs = this;
        this.geojs.getPilotJsonPosition().then(function (dataJson) {
            geoData = _this.toGeojsonFormat(dataJson);
            console.log("hasil convert", geoData);
            _this.layerPilot.clearLayers();
            _this.layerPilot = L.geoJSON(geoData, {
                pointToLayer: function (feature, latlng) {
                    if (feature.properties['nipPandu'] != localStorage.getItem('username') && feature.properties['nipPandu'] != localStorage.getItem('username').toUpperCase())
                        if (self.less1hour(feature.properties['tglAktivitas']))
                            return L.marker(latlng, { icon: pilotIconOff });
                        else
                            return L.marker(latlng, { icon: pilotIcon });
                },
                onEachFeature: _this.onEachFeaturePilot
            }).addTo(_this._map);
        });
    };
    LeafletView.prototype.less1hour = function (timestamp) {
        var less1fromnow = __WEBPACK_IMPORTED_MODULE_2_moment__().unix() - 3600;
        var ts = __WEBPACK_IMPORTED_MODULE_2_moment__(timestamp).unix();
        if (ts <= less1fromnow)
            return true;
        else
            return false;
    };
    /**
     * Append ship to map
     *
     * @param
     * interval in minute
     *
     */
    LeafletView.prototype.appendShip = function (refreshInterval) {
        var _this = this;
        this.layerShip = L.geoJSON();
        this.layerPilot = L.geoJSON();
        this.geojs.getInfoLogin().then(function (res) {
            console.log("before parse", res);
            // var result =JSON.parse(res);
            // console.log("result :", result['X-Token']);
            _this.amsToken = res;
            _this.setShip(res);
            _this.refreshInterval = refreshInterval;
            // this.intRefresh = setInterval( ()=>{
            //   this.setShip(this.amsToken)
            // }, refreshInterval * 10 * 1000)
        }, function (err) {
            console.log('err', err);
        }).catch(function (err) {
            console.log(err);
        });
    };
    /**
     * Refresh Ship
     */
    LeafletView.prototype.refreshShip = function () {
        this.setShip(this.amsToken);
    };
    /**
     * hitung jarak antara point 1 dan 2
     *
     * @param lat1
     * @param lon1
     * @param lat2
     * @param lon2
     * @param unit = the unit you desire for results                               :::
     *           where: 'M' is statute miles (default)                         :::
     *                  'K' is kilometers                                      :::
     *                  'N' is nautical miles
     */
    LeafletView.prototype.distance = function (lat1, lon1, lat2, lon2, unit) {
        var radlat1 = Math.PI * lat1 / 180;
        var radlat2 = Math.PI * lat2 / 180;
        var theta = lon1 - lon2;
        var radtheta = Math.PI * theta / 180;
        var dist = Math.sin(radlat1) * Math.sin(radlat2) + Math.cos(radlat1) * Math.cos(radlat2) * Math.cos(radtheta);
        dist = Math.acos(dist);
        dist = dist * 180 / Math.PI;
        dist = dist * 60 * 1.1515;
        if (unit == "K") {
            dist = dist * 1.609344;
        }
        if (unit == "N") {
            dist = dist * 0.8684;
        }
        return dist;
    };
    LeafletView.prototype.toGeojsonFormat = function (obj) {
        return __WEBPACK_IMPORTED_MODULE_4_geojson__["parse"](obj, { Point: ['latitude', 'longitude'] });
    };
    LeafletView.prototype.getItems = function (ev) {
        // set val to the value of the searchbar
        this.searchItem = true;
        var val = ev.target.value;
        this.tempSearchName = this.searchName;
        console.log("temporari", this.tempSearchName);
        if (val && val.trim() != '') {
            // return this.tempSearchName = this.tempSearchName.filter(ship => ship.toLowerCase().indexOf(val.toLowerCase()) > -1)
            this.tempSearchName = this.tempSearchName.filter(function (item) {
                try {
                    console.log("mapview", item);
                    console.log("search by nama kapal", (item.toLowerCase().indexOf(val.toLowerCase()) > -1), "items:", item, "index of", item.toLowerCase().indexOf(val.toLowerCase()));
                    return (item.toLowerCase().indexOf(val.toLowerCase()) > -1);
                }
                catch (e) {
                    console.log("ERROR", e);
                }
            });
        }
    };
    LeafletView.prototype.getIndexItem = function (item) {
        console.log(item);
        this.searchItem = false;
        var needle = item;
        var obj = this.items.find(function (x) { return x.properties.name === needle; });
        var index = this.items.indexOf(obj);
        console.log("get index items search", this.items[index].geometry);
        var resp = this.items[index].geometry;
        console.log("pointing to: ", resp.coordinates[1], resp.coordinates[0]);
        this._map.setView([resp.coordinates[1], resp.coordinates[0]], 18);
    };
    LeafletView.prototype.onCancel = function (ev) {
        console.log("on cancel");
        this.searchItem = false;
        // this.tempSearchName = [];
        // console.log(this.tempSearchName);
    };
    LeafletView.prototype.getObjects = function (obj, key, val) {
        var objects = [];
        for (var i in obj) {
            if (!obj.hasOwnProperty(i))
                continue;
            if (typeof obj[i] == 'object') {
                objects = objects.concat(this.getObjects(obj[i], key, val));
            }
            else 
            //if key matches and value matches or if key matches and value is not passed (eliminating the case where key matches but passed value does not)
            if (i == key && obj[i] == val || i == key && val == '') {
                objects.push(obj);
            }
            else if (obj[i] == val && key == '') {
                //only add if the object is not already in the array
                if (objects.lastIndexOf(obj) == -1) {
                    objects.push(obj);
                }
            }
        }
        return objects;
    };
    return LeafletView;
}());
LeafletView = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-mapview',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\mapview\mapview.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n    <span [class]="pnetwork.network_state==true ? \'network_state_on\':\'network_state_off\'"></span>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content>\n\n  \n\n  <div style="height: 100%;width:100%;">\n\n    <div id="maplog" style="text-align:right;width:100%">\n\n        <div style="height:56px;width:100%">\n\n          <ion-toolbar no-border-top color="white">\n\n            <ion-searchbar \n\n              (ionInput)="getItems($event)" \n\n              (ionCancel)="onCancel($event)"\n\n              [showCancelButton]="true"\n\n              autocomplete="off"\n\n              placeholder="Pencarian berdasarkan nama kapal">\n\n            </ion-searchbar>\n\n          </ion-toolbar>\n\n          <div>\n\n            <ion-list [hidden]="!searchItem" >\n\n              <ion-item (click)="getIndexItem(item)" *ngFor="let item of tempSearchName">\n\n                {{item}} \n\n              </ion-item>\n\n            </ion-list>\n\n          </div>\n\n        </div>\n\n<!--         \n\n      Current Latitude: {{locationTracker.lat}}\n\n      <p>Current Longitude: {{locationTracker.lng}} -->\n\n          <!-- <ion-list>\n\n              <ion-item *ngFor="let item of searchName">\n\n                {{ item }}\n\n              </ion-item>\n\n            </ion-list> -->\n\n    </div>\n\n    <ion-fab right bottom class="buttonFab">\n\n      <button ion-fab color="oranye"><ion-icon name="arrow-dropup"></ion-icon></button>\n\n      <ion-fab-list side="top">\n\n        <button ion-fab (click)="onClickHome()"><ion-icon name="locate"></ion-icon></button>\n\n        <button ion-fab (click)="onRefresh()"><ion-icon name="refresh"></ion-icon></button>\n\n      </ion-fab-list>\n\n    </ion-fab>\n\n    <div style="height: 100%;width:100%;" id="map"></div>\n\n\n\n  </div>\n\n  \n\n  <ion-item>\n\n    <h2>Locations</h2>\n\n  </ion-item>\n\n</ion-content>\n\n\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\mapview\mapview.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_8__providers_geojson__["a" /* Geojson */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* App */],
        __WEBPACK_IMPORTED_MODULE_6__providers_location_tracker__["a" /* LocationTracker */],
        __WEBPACK_IMPORTED_MODULE_7__providers_notification__["a" /* Notification */],
        __WEBPACK_IMPORTED_MODULE_8__providers_geojson__["a" /* Geojson */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_9__providers_pnetwork__["a" /* Pnetwork */]])
], LeafletView);

//# sourceMappingURL=mapview.js.map

/***/ }),

/***/ 694:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AlertTolakSpkComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_tolak_spk_pandu_tolak_spk_pandu__ = __webpack_require__(695);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






/**
 * Generated class for the BatalPanduComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var AlertTolakSpkComponent = (function () {
    function AlertTolakSpkComponent(view, params, alertCtrl, storage, spkData, modal) {
        var _this = this;
        this.view = view;
        this.params = params;
        this.alertCtrl = alertCtrl;
        this.storage = storage;
        this.spkData = spkData;
        this.modal = modal;
        this.profile = [];
        this.data = params.get('toDetail');
        console.log("toDetail: ", this.data);
        this.namaKapal = this.data.namaKapal;
        this.noPpk1 = this.data.noPpk1;
        this.nomorSpk = this.data.nomorSpkPandu;
        this.asal = this.data.namaLokasiPanduAsal;
        this.tujuan = this.data.namaLokasiPanduTujuan;
        this.tanggal = __WEBPACK_IMPORTED_MODULE_3_moment__(this.data.jamPenetapanPandu).format('DD/MM/YYYY HH:mm');
        this.storage.ready().then(function () {
            _this.storage.get('profile').then(function (data) {
                _this.profile = data;
                console.log("profile. ", _this.profile);
            });
        });
    }
    AlertTolakSpkComponent.prototype.tolak = function () {
        var _this = this;
        console.log("alert tolak spk pandu ");
        var modalTolakSpkPandu = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__components_tolak_spk_pandu_tolak_spk_pandu__["a" /* TolakSpkPanduComponent */], { toDetail: this.data }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        });
        modalTolakSpkPandu.onDidDismiss(function (data) {
            if (data == false) {
                console.log("pop up tolak spk pandu ", false);
                _this.view.dismiss(false);
            }
            else if (data == true) {
                console.log("pop up terima spk pandu ", true);
                // this.view.dismiss(true)
            }
        });
        modalTolakSpkPandu.present();
    };
    AlertTolakSpkComponent.prototype.terima = function () {
        console.log("alert terima spk pandu ");
        this.view.dismiss(true);
    };
    return AlertTolakSpkComponent;
}());
AlertTolakSpkComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'alert-tolak-spk',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\alert-tolak-spk\alert-tolak-spk.html"*/'<ion-header>\n\n    <ion-navbar>\n\n      <div class="hdAlert">\n\n        Notifikasi Baru\n\n      </div>\n\n    </ion-navbar>\n\n  </ion-header>\n\n    \n\n  <ion-content>\n\n    <ion-grid>\n\n        <ion-row>\n\n            <ion-col >\n\n                <h1>\n\n                    Pemberitahuan Baru untuk OHN\n\n                </h1>\n\n            </ion-col>\n\n        </ion-row>\n\n        <br>\n\n        <ion-row>\n\n            <ion-col col-1></ion-col>\n\n            <ion-col col-5>\n\n                <ion-text style="font-weight: bold" class="isi">\n\n                    {{namaKapal}}\n\n                </ion-text>\n\n            </ion-col>\n\n            <ion-col col-6>\n\n                <ion-text style="font-weight: bold" class="isi">\n\n                    {{tanggal}}\n\n                </ion-text>\n\n            </ion-col>\n\n        </ion-row>\n\n        <ion-row>\n\n            <ion-col col-1></ion-col>\n\n            <ion-col col-5>\n\n                <ion-text class="isi">\n\n                    PPK1\n\n                </ion-text>\n\n            </ion-col>\n\n            <ion-col col-6>\n\n                <ion-text class="isi">\n\n                    {{noPpk1}}\n\n                </ion-text>\n\n            </ion-col>\n\n        </ion-row>\n\n        <ion-row>\n\n            <ion-col col-1></ion-col>\n\n            <ion-col col-5>\n\n                <ion-text class="isi">\n\n                    NO. SPK\n\n                </ion-text>\n\n            </ion-col>\n\n            <ion-col col-6>\n\n                <ion-text class="isi">\n\n                    {{nomorSpk}}\n\n                </ion-text>\n\n            </ion-col>\n\n        </ion-row>\n\n        <ion-row>\n\n            <ion-col col-1></ion-col>\n\n            <ion-col col-5>\n\n                <ion-text class="isi">\n\n                    ASAL\n\n                </ion-text>\n\n            </ion-col>\n\n            <ion-col col-6>\n\n                <ion-text class="isi">\n\n                    {{asal}}\n\n                </ion-text>\n\n            </ion-col>\n\n        </ion-row>\n\n        <ion-row>\n\n            <ion-col col-1></ion-col>\n\n            <ion-col col-5>\n\n                <ion-text class="isi">\n\n                    TUJUAN\n\n                </ion-text>\n\n            </ion-col>\n\n            <ion-col col-6>\n\n                <ion-text class="isi">\n\n                    {{tujuan}}\n\n                </ion-text>\n\n            </ion-col>\n\n        </ion-row>\n\n    </ion-grid>\n\n  </ion-content>\n\n  \n\n  <ion-footer no-border>\n\n    <ion-toolbar>\n\n      <ion-row>\n\n        <ion-col col-6>\n\n          <button color="oranye" ion-button full (click)="tolak()">TOLAK</button>\n\n        </ion-col>\n\n        <ion-col col-6>\n\n          <button color="ijo-tua" ion-button full (click)="terima()">TERIMA</button>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-toolbar>\n\n  </ion-footer>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\alert-tolak-spk\alert-tolak-spk.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_4__providers_spk_data__["a" /* SpkData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_4__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* ModalController */]])
], AlertTolakSpkComponent);

//# sourceMappingURL=alert-tolak-spk.js.map

/***/ }),

/***/ 695:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return TolakSpkPanduComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_spk_data__ = __webpack_require__(48);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the BatalPanduComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var TolakSpkPanduComponent = (function () {
    function TolakSpkPanduComponent(view, params, alertCtrl, storage, spkData) {
        var _this = this;
        this.view = view;
        this.params = params;
        this.alertCtrl = alertCtrl;
        this.storage = storage;
        this.spkData = spkData;
        this.profile = [];
        this.data = params.get('toDetail');
        this.storage.ready().then(function () {
            _this.storage.get('profile').then(function (data) {
                _this.profile = data;
                console.log("profile. ", _this.profile);
            });
        });
    }
    TolakSpkPanduComponent.prototype.postPembatalanSpkPandu = function () {
        console.log("data. ", this.data);
        var data_format = {
            "alasan": this.alasan,
            "nipPandu": this.profile.nipPandu,
            "nomorSpk": this.data.nomorSpk,
            "nomorSpkPandu": this.data.nomorSpkPandu
        };
        console.log("data format. ", data_format);
        /**
         * kirim pembatalan spk pandu
         * menggunakan HTTP
         */
        this.spkData.postLogPembatalanSpkPandu(data_format);
    };
    TolakSpkPanduComponent.prototype.putTolakSpkPandu = function () {
        console.log("noPpkJasa. ", this.data.noPpkJasaPandu);
        console.log("put tolak spk.");
        this.spkData.putTolakSpk(this.data.noPpkJasaPandu).subscribe(function (resp) {
            console.log("Tolak SPK done", resp);
        });
    };
    TolakSpkPanduComponent.prototype.cancel = function () {
        console.log("pop up isi terima spk pandu ");
        this.view.dismiss(true);
    };
    TolakSpkPanduComponent.prototype.ok = function () {
        console.log("pop up isi tolak spk pandu ");
        this.postPembatalanSpkPandu();
        this.putTolakSpkPandu();
        this.view.dismiss(false);
    };
    return TolakSpkPanduComponent;
}());
TolakSpkPanduComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'tolak-spk-pandu',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\tolak-spk-pandu\tolak-spk-pandu.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <div class="hdAlasan">\n\n      ALASAN TOLAK SPK\n\n    </div>\n\n  </ion-navbar>\n\n</ion-header>\n\n  \n\n<ion-content>\n\n  <div class="divAlasan">\n\n    <textarea class="textAlasan" [(ngModel)]="alasan"></textarea>\n\n  </div>\n\n</ion-content>\n\n\n\n<ion-footer no-border>\n\n  <ion-toolbar>\n\n    <ion-row>\n\n      <ion-col col-6>\n\n        <button color="oranye" ion-button full (click)="cancel()">CANCEL</button>\n\n      </ion-col>\n\n      <ion-col col-6>\n\n        <button color="ijo-tua" ion-button full (click)="ok()">OK</button>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-toolbar>\n\n</ion-footer>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\tolak-spk-pandu\tolak-spk-pandu.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_3__providers_spk_data__["a" /* SpkData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_3__providers_spk_data__["a" /* SpkData */]])
], TolakSpkPanduComponent);

//# sourceMappingURL=tolak-spk-pandu.js.map

/***/ }),

/***/ 697:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export MyComponent */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AbsensiPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment_src_locale_id__ = __webpack_require__(1126);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__components_list_petugas_pandu_list_petugas_pandu__ = __webpack_require__(726);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_absensi_data__ = __webpack_require__(1165);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_user_data__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_timers__ = __webpack_require__(109);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_timers___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_timers__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_date_picker__ = __webpack_require__(727);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};











/*
  Generated class for the Absensi page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var MyComponent = (function () {
    function MyComponent() {
    }
    return MyComponent;
}());
MyComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'my-component',
        template: "I'm a direct child of body <br>",
    })
], MyComponent);

var AbsensiPage = (function () {
    function AbsensiPage(navCtrl, userData, absensiData, storage, modal, loading, alertCtrl, pnetwork, datePicker) {
        this.navCtrl = navCtrl;
        this.userData = userData;
        this.absensiData = absensiData;
        this.storage = storage;
        this.modal = modal;
        this.loading = loading;
        this.alertCtrl = alertCtrl;
        this.pnetwork = pnetwork;
        this.datePicker = datePicker;
        this.portalProfile = {};
        this.dataPetugas = [];
        __WEBPACK_IMPORTED_MODULE_3_moment__["locale"]('id');
    }
    // ionViewDidLoad() {
    //   console.log('Hello AbsensiPage Page');
    //   let cekAbsen = JSON.parse(localStorage.getItem('mulaiAbsen'));
    //   console.log("DEBUG: Waiting network condition");
    //   setTimeout( ()=>{
    //     this.pnetwork.monConnection()
    //     console.log("DEBUG:","isConnect:", this.pnetwork.connectSub, "isDisconnect:",this.pnetwork.disconnectSub);
    //   },5000);
    //   this.storage.get('profile').then( (profile) => {
    //     console.log("Profile Petugas Pandu", profile);
    //     this.fullname = profile.namaPetugas;
    //     this.email = profile.emailPetugas;
    //     this.hp = profile.hp;
    //     this.photo = profile.photo;
    //     this.username = profile.username;
    //     this.userData.getAbsen(profile.username).then(data => {
    //       console.log(data);
    //       if(data.statusKesediaan == "1"){
    //         this.btnAbsenOn = true;
    //         this.btnAbsenOff = false;
    //         this.mulaiJamAbsen = cekAbsen['mulaiJamAbsen'];
    //         this.mulaiTglAbsen = cekAbsen['mulaiTglAbsen'];
    //       }else{
    //         this.btnAbsenOn = false;
    //         this.btnAbsenOff = true;
    //       }
    //       this.absenStatus = cekAbsen['absenStatus'];
    //     }, err => {
    //       console.log("error", err)
    //     }).catch(err =>{
    //       console.log("Error getting absen", err);
    //     })
    //   })
    //   this.storage.get('portalProfile').then(portalPorfile => {
    //     this.portalProfile = portalPorfile
    //   })
    // }
    AbsensiPage.prototype.ionViewDidEnter = function () {
        var _this = this;
        this.storage.get('jadwalGroupPandu').then(function (jadwalGroupPandu) {
            console.log("Jadwal Group Pandu Storage", jadwalGroupPandu);
            _this.ketShift = jadwalGroupPandu;
        });
        this.storage.get('listPetugasPandu').then(function (listPetugasPandu) {
            console.log("List Petugas Pandu Storage", listPetugasPandu);
            if (listPetugasPandu != null) {
                for (var _i = 0, listPetugasPandu_1 = listPetugasPandu; _i < listPetugasPandu_1.length; _i++) {
                    var i = listPetugasPandu_1[_i];
                    var groupName = i.namaPetugas + " " + i.kode;
                    i.groupName = groupName;
                    _this.dataPetugas.push(i);
                }
            }
        });
    };
    AbsensiPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        console.log('Hello AbsensiPage Page');
        console.log("DEBUG: Waiting network condition");
        Object(__WEBPACK_IMPORTED_MODULE_9_timers__["setTimeout"])(function () {
            _this.pnetwork.monConnection();
            console.log("DEBUG:", "isConnect:", _this.pnetwork.connectSub, "isDisconnect:", _this.pnetwork.disconnectSub);
        }, 5000);
        this.storage.get('portalProfile').then(function (portalPorfile) {
            _this.portalProfile = portalPorfile;
        });
        this.storage.get('profile').then(function (profile) {
            console.log("Profile Petugas Pandu", profile);
            _this.fullname = profile.namaPetugas;
            _this.email = profile.emailPetugas;
            _this.hp = profile.hp;
            _this.photo = profile.photo;
            _this.username = profile.username;
            _this.userData.getAbsenPanduMyIntan(_this.username).then(function (data) {
                console.log(data);
                _this.absenStatus = "ON";
                console.log("Absen");
                _this.mulaiJamAbsen = __WEBPACK_IMPORTED_MODULE_3_moment__(data.tglMasuk).format('YYYY-MM-DD');
                _this.mulaiTglAbsen = __WEBPACK_IMPORTED_MODULE_3_moment__(data.tglMasuk).format('YYYY-MM-DD');
                _this.mulaiTglAbsen = __WEBPACK_IMPORTED_MODULE_3_moment__(data.tglMasuk).locale('id').format('dddd, LL');
                _this.mulaiJamAbsen = __WEBPACK_IMPORTED_MODULE_3_moment__(data.tglMasuk).locale('id').format('hh:mm:ss');
                _this.akhirTglAbsen = __WEBPACK_IMPORTED_MODULE_3_moment__(data.tglKeluar).locale('id').format('dddd, LL');
                _this.akhirJamAbsen = __WEBPACK_IMPORTED_MODULE_3_moment__(data.tgKeluar).locale('id').format('hh:mm:ss');
                var va = {
                    'idAbsensiMyPelindo': data.id,
                    'status': true,
                    'time': _this.now,
                    'mulaiTglAbsen': data.tglMasuk,
                    'selesaiTglAbsen': data.tglKeluar,
                    'absenStatus': 'ON'
                };
                localStorage.setItem('absensiPanduMyPelindo', JSON.stringify(va));
                localStorage.setItem('kesediaan', data.kesediaan);
                if (data.kesediaan === 1) {
                    console.log("Yes");
                    _this.ketSilahkanAbsen = '';
                    _this.ketAvaiAbsen = 'AVAILABLE SPK';
                    _this.ketUnavaiAbsen = '';
                    _this.btnAbsenOn = true;
                    _this.btnAbsenOff = false;
                }
                else {
                    console.log("No");
                    _this.ketSilahkanAbsen = '';
                    _this.ketAvaiAbsen = '';
                    _this.ketUnavaiAbsen = 'UNAVAILABLE SPK';
                    _this.btnAbsenOn = false;
                    _this.btnAbsenOff = true;
                }
            }, function (err) {
                console.log("Error absen");
                _this.absenStatus = "OFF";
                var va = {
                    'idAbsensiMyPelindo': 0,
                    'status': false,
                    'time': _this.now,
                    'absenStatus': 'OFF'
                };
                localStorage.setItem('absensiPanduMyPelindo', JSON.stringify(va));
                localStorage.setItem('kesediaan', '0');
                _this.ketSilahkanAbsen = 'SILAHKAN ABSEN DI MY PELINDO!';
                _this.ketAvaiAbsen = '';
                _this.ketUnavaiAbsen = '';
                _this.btnAbsenOn = true;
                _this.btnAbsenOff = true;
            }).catch(function (err) {
                console.log("Error getting absen", err);
            });
            _this.getListPetugasPandu(_this.username);
            _this.getJadwalGroupPandu(_this.username);
        });
    };
    AbsensiPage.prototype.getListPetugasPandu = function (username) {
        var _this = this;
        this.userData.getListPetugasPandu(this.username).then(function (data) {
            console.log("List Petugas Pandu", data);
            for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {
                var i = data_1[_i];
                var groupName = i.namaPetugas + " " + i.kode;
                i.groupName = groupName;
                _this.dataPetugas.push(i);
            }
            localStorage.setItem('listPetugasPandu', JSON.stringify(_this.dataPetugas));
        }, function (err) {
            console.log("error", err);
            _this.alertPresent(err);
        }).catch(function (err) {
            console.log("Error getting list petugas pandu", err);
        });
    };
    AbsensiPage.prototype.getJadwalGroupPandu = function (username) {
        var _this = this;
        this.userData.getJadwalShiftGroupPandu(this.username).then(function (data) {
            console.log("Jadwal Shift Pandu", data);
            _this.ketShift = 'Shift ' + data.jamMulai + ' - ' + data.jamSelesai + ' ' + data.namaGroup;
            localStorage.setItem('jadwalGroupPandu', _this.ketShift);
        }, function (err) {
            console.log("error", err);
            _this.alertPresent(err);
        }).catch(function (err) {
            console.log("Error getting jadwal pandu", err);
        });
    };
    AbsensiPage.prototype.refreshAbsensiPandu = function () {
        var _this = this;
        console.log("tgl masuk : ", __WEBPACK_IMPORTED_MODULE_3_moment__().format('MM/DD/YYYY'));
        this.loadingPresent();
        this.absensiData.refreshAbsensi(this.username, __WEBPACK_IMPORTED_MODULE_3_moment__().format('MM/DD/YYYY')).then(function (data) {
            console.log("Refresh Absensi Pandu", data);
            _this.ionViewDidEnter();
            _this.ionViewDidLoad();
            _this.loader.dismiss();
        }, function (err) {
            console.log("error", err);
            _this.loader.dismiss();
            _this.alertPresent(err);
        }).catch(function (err) {
            _this.loader.dismiss();
            console.log("Error refresh absensi pandu", err);
        });
    };
    AbsensiPage.prototype.showListPetugasPandu = function () {
        var modalBatalPandu = this.modal.create(__WEBPACK_IMPORTED_MODULE_5__components_list_petugas_pandu_list_petugas_pandu__["a" /* ListPetugasPanduComponent */], { dataPetugas: this.dataPetugas }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        });
        modalBatalPandu.onDidDismiss(function (data) {
        });
        modalBatalPandu.present();
    };
    AbsensiPage.prototype.loadingPresent = function () {
        this.loader = this.loading.create({
            spinner: 'hide',
            content: "Sedang koneksi ke server.."
        });
        this.loader.present();
    };
    AbsensiPage.prototype.alertPresent = function (msg) {
        this.alert = this.alertCtrl.create({
            title: 'Error..!!',
            subTitle: "Gagal koneksi ke server, cek koneksi internet anda..",
            buttons: ['OK']
        });
        this.alert.present();
    };
    AbsensiPage.prototype.absenOn = function () {
        var _this = this;
        var absensiMyPelindo = JSON.parse(localStorage.getItem('absensiPanduMyPelindo'));
        var id = absensiMyPelindo['idAbsensiMyPelindo'];
        if (id != 0) {
            this.loadingPresent();
            this.userData.putKesediaanPanduOn(id).then(function (data) {
                console.log('kesediaan pandu on. ', data);
                _this.absenStatus = "ON";
                _this.btnAbsenOn = true;
                _this.btnAbsenOff = false;
                _this.ketAvaiAbsen = 'AVAILABLE SPK';
                _this.ketUnavaiAbsen = '';
                _this.ketSilahkanAbsen = '';
                localStorage.setItem('kesediaan', '1');
                _this.loader.dismiss();
            }, function (err) {
                console.log("error", err);
                _this.loader.dismiss();
                _this.alertPresent(err);
            }).catch(function (err) {
                _this.loader.dismiss();
                _this.alertPresent(err);
            });
        }
    };
    AbsensiPage.prototype.absenOff = function () {
        var _this = this;
        var absensiMyPelindo = JSON.parse(localStorage.getItem('absensiPanduMyPelindo'));
        var id = absensiMyPelindo['idAbsensiMyPelindo'];
        if (id != 0) {
            this.loadingPresent();
            this.userData.putKesediaanPanduOff(id).then(function (data) {
                console.log('kesediaan pandu off. ', data);
                _this.absenStatus = "ON";
                _this.btnAbsenOn = false;
                _this.btnAbsenOff = true;
                _this.ketAvaiAbsen = '';
                _this.ketUnavaiAbsen = 'UNAVAILABLE SPK';
                _this.ketSilahkanAbsen = '';
                localStorage.setItem('kesediaan', '0');
                _this.loader.dismiss();
            }, function (err) {
                console.log("error", err);
                _this.loader.dismiss();
                _this.alertPresent(err);
            }).catch(function (err) {
                _this.loader.dismiss();
                _this.alertPresent(err);
            });
        }
    };
    // absenOn(){
    //   this.now = moment().format();
    //   this.mulaiTglAbsen = moment(this.now).locale('id').format('dddd, LL');
    //   this.mulaiJamAbsen = moment(this.now).locale('id').format('hh:mm:ss');
    //   this.akhirTglAbsen = moment(moment(this.now).add(1, 'day')).locale('id').format('dddd, LL');
    //   this.akhirJamAbsen = moment(moment(this.now).add(1, 'day')).locale('id').format('hh:mm:ss');
    //   this.loadingPresent()
    //   this.toDb(this.username, true);
    // }
    // absenOff(){
    //   this.loadingPresent()
    //   this.toDb(this.username, false, "Izin")
    // }
    /**
     *
     * @param username
     */
    AbsensiPage.prototype.getAbsenStatus = function (username) {
        this.userData.getAbsen(username);
    };
    AbsensiPage.prototype.toDb = function (username, param, alasanOff) {
        var _this = this;
        if (alasanOff === void 0) { alasanOff = ""; }
        if (param) {
            this.userData.absenMasuk(username).then(function (data) {
                console.log(data);
                _this.absenStatus = "ON";
                _this.btnAbsenOff = false;
                _this.btnAbsenOn = true;
                var va = {
                    'status': true,
                    'time': _this.now,
                    'mulaiTgllAbsen': _this.mulaiTglAbsen,
                    'mulaiJamAbsen': _this.mulaiJamAbsen,
                    'absenStatus': 'ON'
                };
                localStorage.setItem('mulaiAbsen', JSON.stringify(va));
                _this.loader.dismiss();
            }, function (err) {
                console.log("error", err);
                _this.loader.dismiss();
                _this.alertPresent(err);
            }).catch(function (err) {
                console.log("error absen masuk", err);
                _this.loader.dismiss();
                _this.alertPresent(err);
            });
        }
        else {
            this.userData.absenOff(username, alasanOff).then(function (data) {
                console.log(data);
                _this.absenStatus = "OFF";
                _this.btnAbsenOff = true;
                _this.btnAbsenOn = false;
                var va = {
                    'status': false,
                    'time': _this.now,
                    'username': username,
                    'absenStatus': 'OFF'
                };
                localStorage.setItem('mulaiAbsen', JSON.stringify(va));
                _this.loader.dismiss();
            }, function (err) {
                console.log("error", err);
                _this.loader.dismiss();
                _this.alertPresent(err);
            }).catch(function (err) {
                _this.loader.dismiss();
                _this.alertPresent(err);
            });
        }
    };
    return AbsensiPage;
}());
AbsensiPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-absensi',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\absensi\absensi.html"*/'<!--\n\n  Generated template for the Absensi page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <!--<ion-title>Daftar Absensi</ion-title>-->\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n    <span [class]="pnetwork.network_state==true ? \'network_state_on\':\'network_state_off\'"></span>\n\n    \n\n  </ion-navbar>\n\n\n\n</ion-header>\n\n\n\n\n\n<ion-content>\n\n  <ion-fab right top class="buttonFab">\n\n    <button ion-fab (click)="refreshAbsensiPandu()" ><ion-icon name="sync"></ion-icon></button>  \n\n  </ion-fab>\n\n  \n\n  <ion-grid class="blue-bg">\n\n    <h3>{{fullname}}</h3>\n\n    <ion-avatar>\n\n      <div class="avatar">\n\n        <img [src]=" photo!=null ?  \'data:image/PNG;base64,\' + photo : \'assets/img/person.png\'">\n\n      </div>\n\n    </ion-avatar>\n\n    <br>\n\n      <h3>{{ portalProfile.namadit }} </h3>\n\n      <h3>{{ portalProfile.namasub }}</h3>\n\n      <h3>{{ portalProfile.namacabang }}</h3>\n\n    <br>\n\n    \n\n    <div>\n\n      <span>{{mulaiTglAbsen}}</span>\n\n      <br>\n\n      <h3>Jam Kehadiran</h3>\n\n      <h1>{{mulaiJamAbsen}}</h1>\n\n      <span *ngIf="absenStatus" class="upper">status</span>\n\n      <span>{{absenStatus}}</span>\n\n      <h3 class="ket1">{{ketSilahkanAbsen}}</h3>\n\n      <h3 class="ket2">{{ketAvaiAbsen}}</h3>\n\n      <h3 class="ket3">{{ketUnavaiAbsen}}</h3>\n\n      <h3 class="ketShift">{{ketShift}}</h3>\n\n    </div>\n\n    <!-- <network-state></network-state> -->\n\n  </ion-grid>\n\n  <ion-grid style="padding-bottom:15px;">\n\n    <button style="width:50%; margin: auto;" ion-button color="blue-off" (click)="showListPetugasPandu()">\n\n      <span >List Petugas Pandu</span>\n\n    </button>\n\n  </ion-grid>\n\n</ion-content>\n\n\n\n<ion-footer no-border>\n\n  <ion-grid class="blue-pandu">\n\n    <ion-row>\n\n      <ion-col><button ion-button block color="blue-off" (click)="absenOff()" [disabled]="btnAbsenOff">OFF</button></ion-col>\n\n      <ion-col><button ion-button block color="pink-on" (click)="absenOn()" [disabled]="btnAbsenOn">ON</button></ion-col>\n\n    </ion-row>\n\n  </ion-grid>\n\n</ion-footer>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\absensi\absensi.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_7__providers_user_data__["a" /* UserData */], __WEBPACK_IMPORTED_MODULE_6__providers_absensi_data__["a" /* AbsensiData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_7__providers_user_data__["a" /* UserData */],
        __WEBPACK_IMPORTED_MODULE_6__providers_absensi_data__["a" /* AbsensiData */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* ModalController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_8__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_10__ionic_native_date_picker__["a" /* DatePicker */]])
], AbsensiPage);

//# sourceMappingURL=absensi.js.map

/***/ }),

/***/ 726:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return ListPetugasPanduComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the BatalPanduComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var ListPetugasPanduComponent = (function () {
    function ListPetugasPanduComponent(view, params, alertCtrl) {
        this.view = view;
        this.params = params;
        this.alertCtrl = alertCtrl;
        this.dataPetugas = [];
        this.dataPetugas = params.get('dataPetugas');
    }
    ListPetugasPanduComponent.prototype.dismiss = function () {
        this.view.dismiss();
    };
    return ListPetugasPanduComponent;
}());
ListPetugasPanduComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'list-petugas-pandu',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\list-petugas-pandu\list-petugas-pandu.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <div class="hdPetugasPandu">\n\n      PETUGAS PANDU\n\n    </div>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content>\n\n <ion-list>\n\n    <ion-item *ngFor="let data of dataPetugas; let i=index" >\n\n      <span>{{data.groupName}}</span>\n\n    </ion-item>\n\n  </ion-list>\n\n  <ion-toolbar>\n\n    <ion-row>\n\n      <ion-col>\n\n          <button color="ijo-tua" ion-button full (click)="dismiss()">DISMISS</button>\n\n      </ion-col>\n\n    </ion-row>\n\n  </ion-toolbar>\n\n</ion-content>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\list-petugas-pandu\list-petugas-pandu.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */]])
], ListPetugasPanduComponent);

//# sourceMappingURL=list-petugas-pandu.js.map

/***/ }),

/***/ 728:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DetailSpkPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__pemanduan_pemanduan__ = __webpack_require__(729);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__history_realisasi_history_realisasi__ = __webpack_require__(250);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_geojson__ = __webpack_require__(242);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_location_tracker__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










/*
  Generated class for the DetailSpk page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var DetailSpkPage = (function () {
    function DetailSpkPage(navCtrl, params, spkData, storage, alertCtrl, pnetwork, geojson, locationTracker, loading, _sql, _spk, events) {
        this.navCtrl = navCtrl;
        this.params = params;
        this.spkData = spkData;
        this.storage = storage;
        this.alertCtrl = alertCtrl;
        this.pnetwork = pnetwork;
        this.geojson = geojson;
        this.locationTracker = locationTracker;
        this.loading = loading;
        this._sql = _sql;
        this._spk = _spk;
        this.events = events;
        this.datas = [];
        this.wizardStep = null;
        this.tundas = {};
        this.status = 1;
        this.msg_state = "P";
        this.generate_wizard = [
            [
                { id: "pemanduan_start", map: "jamNaik", title: "Pandu Naik", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", title: "Ikat Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", title: "Pandu Naik", status: false, value: "00:00:00", },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", title: "Pandu Naik", status: false, value: "00:00:00", },
                { id: "kapal_bergerak", map: "jamKapalGerak", title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", title: "Pandu Naik", status: false, value: "00:00:00", },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", title: "Ikat Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", title: "Pandu Naik", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", title: "Kapal Bergerak", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda2", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", title: "Ikat Tali Kapal", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda2", title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
                { id: "isi_pin", map: "", title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", title: "Selesai Pandu", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar" }
            ]
        ];
        this.datas = JSON.parse(params.get('datas'));
        this.tundas = params.get('tundas');
        this.status = params.get('status');
        this.msg_state = params.get('msg_state');
        this.generateStep(this.datas['jenisDermaga'] - 1);
        if (this.status == 1)
            this.startProgress = "MULAI KERJAKAN";
        else
            this.startProgress = "LIHAT HISTORI REALISASI";
        console.log("data tundas", this.tundas);
    }
    DetailSpkPage.prototype.ionViewDidLoad = function () {
        console.log('Hello DetailSpkPage Page');
    };
    DetailSpkPage.prototype.ionVieWillEnter = function () {
        // this.presentLoadingDefault()
    };
    DetailSpkPage.prototype.ionViewDidEnter = function () {
        // this.loader.dismiss();
    };
    DetailSpkPage.prototype.presentLoadingDefault = function () {
        this.loader = this.loading.create({
            content: 'Please wait...'
        });
        this.loader.present();
    };
    DetailSpkPage.prototype.pemanduan = function () {
        var _this = this;
        this.storage.get('panduid').then(function (panduid) {
            console.log(panduid);
            if (panduid == null) {
                _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__pemanduan_pemanduan__["a" /* PemanduanPage */], { data: _this.datas });
            }
            else {
                console.log("cek working", panduid, _this.datas['id']);
                if (panduid == _this.datas['id']) {
                    _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__pemanduan_pemanduan__["a" /* PemanduanPage */], { data: _this.datas });
                }
                else {
                    var confirm_1 = _this.alertCtrl.create({
                        title: 'Pemanduan Error !!',
                        message: 'Anda memiliki pekerjaan yang belum terselesaikan, mohon selesaikan pemanduan sebelumnya !',
                        buttons: [{
                                text: 'OK',
                                handler: function () {
                                },
                            }],
                    });
                    confirm_1.present();
                }
            }
        });
    };
    DetailSpkPage.prototype.mulaiPandu = function () {
        var _this = this;
        if (this.datas['status'] == 'SPK') {
            var confirm_2 = this.alertCtrl.create({
                title: 'Pemanduan Error !!',
                message: 'Maaf belum bisa dilakukan pekerjaan dikarenakan Status belum OHN',
                buttons: [{
                        text: 'OK',
                        handler: function () {
                        },
                    }],
            });
            confirm_2.present();
        }
        else if ('OHN') {
            if (this.status == 2) {
                this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__history_realisasi_history_realisasi__["a" /* HistoryRealisasiPage */], {
                    noSpk: this.datas['nomorSpkPandu'],
                    detail: false,
                    spkId: this.datas['id']
                });
            }
            else {
                var self_1 = this;
                this.storage.get('panduid').then(function (panduid) {
                    console.log(panduid);
                    self_1.navCtrl.push(__WEBPACK_IMPORTED_MODULE_3__pemanduan_pemanduan__["a" /* PemanduanPage */], { datas: self_1.datas, tundas: _this.tundas });
                    /**
                     * dicoment dulu karena bikin pandu marah :D
                     * alasan karena pandu tidak menyelesaikan SPK sampai akhir
                     * akhirnya terblok
                     */
                    // if(panduid == null){
                    //   self.navCtrl.push(PemanduanPage, { datas: self.datas});
                    //   console.log("panduid null",self.datas);
                    // }else{
                    //   console.log("cek working",panduid,self.datas['id']);
                    //   if(panduid == self.datas['id']){
                    //     console.log("cek working",panduid,self.datas['id']);
                    //     // self.navCtrl.push(PemanduanPage, { data: self.datas, wizard:self.wizardOption});
                    //     self.navCtrl.push(PemanduanPage, { datas: self.datas, wizard:self.wizardOption});
                    //   }else{
                    //     let confirm = self.alertCtrl.create({
                    //       title: 'Pemanduan Error !!',
                    //       message: 'Anda memiliki pekerjaan yang belum terselesaikan, mohon selesaikan pemanduan sebelumnya !',
                    //       buttons: [{
                    //         text: 'OK',
                    //         handler: () => {
                    //         },
                    //       }],
                    //     });
                    //     confirm.present();
                    //   }
                    // }
                });
            }
        }
    };
    DetailSpkPage.prototype.generateStep = function (id) {
        console.log("Generate Step by id", id);
        var vData = [];
        this.generate_wizard[id].forEach(function (ret) {
            if (ret.id != 'isi_pin' && ret.id != 'keluar')
                vData.push(ret);
        });
        this.wizardStep = '<ol class="list-inline text-center step-indicator">';
        for (var i in vData) {
            this.wizardStep +=
                " <li class=\"" + vData[i].id + " active\">\n              <div class=\"step\">" + (Number(i) + 1) + "</div>\n              <div class=\"caption hidden-xs hidden-sm\">\n              " + vData[i].title + "</div>\n            </li>\n        ";
        }
        this.wizardStep += '</ol>';
    };
    DetailSpkPage.prototype.runPendingState = function () {
        var _this = this;
        console.log("Calling DataPending");
        this._sql.getRealisasiPending().then(function (data) {
            console.log("DataPending", data);
            var _loop_1 = function (i) {
                console.log("DEBUG: Run Data Pending from detail", i);
                var flow = JSON.parse(data[i].vjson);
                _this._spk.realisasiPandu(flow.jenisDermaga, JSON.parse(data[i].vjson));
                _this._spk.postProgressBulk(JSON.parse(data[i].progress));
                _this._spk.putProgressDone(data[i].spk_id).subscribe(function (resp) {
                    console.log("DEBUG: Progress done", resp);
                    if (resp.status == 200) {
                        _this._sql.updateRealisasiLog(data[i].spk_id);
                        _this.events.publish('refresh:data', true);
                    }
                });
            };
            for (var i in data) {
                _loop_1(i);
            }
        });
    };
    return DetailSpkPage;
}());
DetailSpkPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-detail-spk',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\detail-spk\detail-spk.html"*/'<!--\n\n  Generated template for the DetailSpk page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <ion-title>\n\n      <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n\n\n    <!-- <span [class]="pnetwork.network_state==true ? \'network_state_on\':\'network_state_off\'"></span> -->\n\n\n\n  </ion-navbar>\n\n\n\n</ion-header>\n\n\n\n\n\n<ion-content class="cpage">\n\n  <ion-grid class="gr-white">\n\n    <ion-card class="gr-card">\n\n\n\n      <ion-card-content no-padding>\n\n        <ion-row>\n\n          <ion-col>\n\n            <ion-row>\n\n              <ion-col>\n\n                <h2><b>{{datas.namaKapal}}</b></h2>\n\n                <small>{{datas.namaAgen}}</small>\n\n              </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col width-30>\n\n                <br> PPK1\n\n                <br> NO. SPK Pandu\n\n                <br> PPK JASA\n\n                <br> ASAL\n\n                <br> TUJUAN\n\n                <br> STATUS\n\n              </ion-col>\n\n              <ion-col width-70>\n\n                <br> {{datas.noPpk1}}\n\n                <br> {{datas.nomorSpkPandu}}\n\n                <br> {{datas.noPpkJasaPandu}}\n\n                <br> {{datas.namaLokasiPanduAsal}}\n\n                <br> {{datas.namaLokasiPanduTujuan}}\n\n                <br> {{ (datas.status == \'OHN\' && datas.flagDone == 2) ? \'SUDAH REALISASI\' : datas.status }}\n\n              </ion-col>\n\n            </ion-row>\n\n            \n\n            \n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-card-content>\n\n    \n\n    </ion-card>\n\n\n\n    <ion-card class="gr-card">\n\n      <ion-row>\n\n        <div [innerHtml]="wizardStep"></div>\n\n      </ion-row>\n\n    </ion-card>\n\n    \n\n    <ion-card class="gr-card">\n\n      <div text-center>\n\n        <button ion-button icon-left color="ijo-tua" (click)="mulaiPandu()">\n\n          <ion-icon name="paper-plane"></ion-icon>\n\n          {{startProgress}}\n\n        </button>\n\n\n\n        <button ion-button icon-left color="oranye" *ngIf="msg_state == \'P\' && status == 2" (click)="runPendingState()">\n\n          <ion-icon name="paper-plane"></ion-icon>\n\n          Kirim Ulang Realisasi\n\n        </button>\n\n      </div>\n\n    </ion-card>\n\n  </ion-grid>\n\n\n\n\n\n  <ion-grid class="gr-white">\n\n    <ion-card class="gr-card">\n\n      <!-- <div style="height:400px;width:100%;margin:0" id="map-detail"></div> -->\n\n      <ion-row>\n\n        <h2><b>Informasi Kapal Tunda</b></h2>\n\n      </ion-row>\n\n      <div *ngFor="let dataTunda of tundas">\n\n        <ion-row>\n\n            <ion-col width-30>\n\n                Nama Kapal Tunda<br>\n\n                Kode Kapal Tunda<br>\n\n                Horse Power<br>\n\n            </ion-col>\n\n            <ion-col width-70>\n\n                {{dataTunda.namaKapal}}<br>\n\n                {{dataTunda.kodeKapal}}<br>\n\n                {{dataTunda.horsePower}}<br>\n\n            </ion-col>\n\n        </ion-row>\n\n      </div>\n\n    </ion-card>\n\n  </ion-grid>\n\n\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\detail-spk\detail-spk.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_5__providers_spk_data__["a" /* SpkData */], __WEBPACK_IMPORTED_MODULE_7__providers_geojson__["a" /* Geojson */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_5__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_6__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_7__providers_geojson__["a" /* Geojson */],
        __WEBPACK_IMPORTED_MODULE_8__providers_location_tracker__["a" /* LocationTracker */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_9__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
        __WEBPACK_IMPORTED_MODULE_5__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */]])
], DetailSpkPage);

//# sourceMappingURL=detail-spk.js.map

/***/ }),

/***/ 729:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PemanduanPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__realisasi_pandu_realisasi_pandu__ = __webpack_require__(163);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_signature_pad__ = __webpack_require__(730);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_signature_pad___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_signature_pad__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment_locale_id__ = __webpack_require__(233);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_moment_locale_id___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_moment_locale_id__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__providers_notification__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__providers_location_tracker__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__components_remark_remark__ = __webpack_require__(731);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__components_batal_pandu_batal_pandu__ = __webpack_require__(732);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__components_adjust_time_adjust_time__ = __webpack_require__(733);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__config_app_config__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_sqlite__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};

















/*
  Generated class for the Pemanduan page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var PemanduanPage = (function () {
    /**
     * kondisi flow
     * 1. area labuh ke tambatan API 1 (Pandu Tunda Tambat)
     * 2. tambatan ke area labuh API 1 (Pandu Tunda Tambat)
     * 3. area labuh ke area labuh (Pandu)
     * 4. tambatan ke tambatan dalam 1 wilayah (Pandu Tunda Tambat)
     * 5. dari tambatan ke tambatan tapi beda wilayah
     */
    function PemanduanPage(navCtrl, storage, alertCtrl, params, pnetwork, notification, spkData, tracker, modal, view, loadingCtrl, appConfig, _sql, sqlite) {
        var _this = this;
        this.navCtrl = navCtrl;
        this.storage = storage;
        this.alertCtrl = alertCtrl;
        this.params = params;
        this.pnetwork = pnetwork;
        this.notification = notification;
        this.spkData = spkData;
        this.tracker = tracker;
        this.modal = modal;
        this.view = view;
        this.loadingCtrl = loadingCtrl;
        this.appConfig = appConfig;
        this._sql = _sql;
        this.sqlite = sqlite;
        this.profile = [];
        this.isPin = false;
        this.v_pandu_status = true;
        this.v_pemanduan_start = false;
        this.v_save_call = false;
        this.v_kapal_bergerak = false;
        this.v_selesai_pandu = false;
        this.v_ikat_tali_tunda = false;
        this.v_ikat_tali_kapal = false;
        this.v_lepas_tali_tunda = false;
        this.v_lepas_tali_kapal = false;
        this.v_isi_pin = false;
        this.v_pandu_turun = false;
        this.v_pemanduan_stop = false;
        this.v_pemanduan_selesai = false;
        this.v_sign = false;
        this.htmlText = "";
        this.last_state = null;
        this.wizard = null;
        this.showWizard = false;
        this.currentWizard = 0;
        this.showButton = "pemanduan_start";
        this.showButtonBatal = false;
        this.timeDiff = "";
        this.manualText = "";
        this.kapalTunda = [];
        this.flag_state = {
            pemanduan_start: { tahapPandu: 1, title: "Pandu Naik (Pilot Get On)", map: "jamNaik", status: false, value: "00:00:00" },
            kapal_bergerak: { tahapPandu: 2, title: "Kapal Bergerak", map: "jamKapalGerak", status: false, value: "00:00:00" },
            ikat_tali_tunda: { tahapPandu: 4, title: "Ikat Tali Tunda", map: "tglMulaiTunda", status: false, value: "00:00:00" },
            ikat_tali_kapal: { tahapPandu: 6, title: "Ikat Tali Kapal", map: "tglMulaiTambat", status: false, value: "00:00:00" },
            lepas_tali_tunda: { tahapPandu: 5, title: "Lepas Tali Tunda", map: "tglSelesaiTunda", status: false, value: "00:00:00" },
            lepas_tali_tunda2: { tahapPandu: 0, title: "Lepas Tali Tunda", status: false, value: "00:00:00" },
            lepas_tali_kapal: { tahapPandu: 7, title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
            lepas_tali_kapal2: { tahapPandu: 0, title: "Lepas Tali Kapal", status: false, value: "00:00:00" },
            // isi_pin: {           tahapPandu:0,   title: "Isi Pin ",             status: false, value: "00:00:00" },
            selesai_pandu: { tahapPandu: 3, title: "Selesai Pandu", map: "tglSelesaiPandu", status: false, value: "00:00:00" },
            keluar: { tahapPandu: 0, title: "Keluar (Close)", status: false, value: "00:00:00" }
        };
        this.generate_wizard = [
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik (Pilot Get On)", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak (Start Ship)", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda (Tug Fast)", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", tahapPandu: 6, title: "Ikat Tali Kapal (Fast Line)", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda (Tug Off)", status: false, value: "00:00:00" },
                // { id:"isi_pin",           map:"",                                     title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu (Pilot Get Off)", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar (Close)" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik (Pilot Get On)", status: false, value: "00:00:00", },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda (Tug Fast)", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", tahapPandu: 7, title: "Lepas Tali Kapal (Last Line)", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak (Start Ship)", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda (Tug Off)", status: false, value: "00:00:00" },
                // { id:"isi_pin",           map:"",                                     title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu (Pilot Get Off)", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar (Close)" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik (Pilot Get On)", status: false, value: "00:00:00", },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak (Start Ship)", status: false, value: "00:00:00" },
                // { id:"isi_pin",           map:"",                                     title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu (Pilot Get Off)", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar (Close)" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik (Pilot Get On)", status: false, value: "00:00:00", },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda (Tug Fast)", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", tahapPandu: 7, title: "Lepas Tali Kapal (Last Line)", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak (Start Ship)", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", tahapPandu: 6, title: "Ikat Tali Kapal (Fast Line)", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda (Tug Off)", status: false, value: "00:00:00" },
                // { id:"isi_pin",           map:"",                                     title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu (Pilot Get Off)", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar (Close)" }
            ],
            [
                { id: "pemanduan_start", map: "jamNaik", tahapPandu: 1, title: "Pandu Naik (Pilot Get On)", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda", map: "tglMulaiTunda", tahapPandu: 4, title: "Ikat Tali Tunda (Tug Fast)", status: false, value: "00:00:00" },
                { id: "lepas_tali_kapal", map: "tglSelesaiTambat", tahapPandu: 7, title: "Lepas Tali Kapal (Last Line)", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda", map: "tglSelesaiTunda", tahapPandu: 5, title: "Lepas Tali Tunda (Tug Fast)", status: false, value: "00:00:00" },
                { id: "kapal_bergerak", map: "jamKapalGerak", tahapPandu: 2, title: "Kapal Bergerak (Start Ship)", status: false, value: "00:00:00" },
                { id: "ikat_tali_tunda2", title: "Ikat Tali Tunda", status: false, value: "00:00:00" },
                { id: "ikat_tali_kapal", map: "tglMulaiTambat", tahapPandu: 6, title: "Ikat Tali Kapal (Fast Line)", status: false, value: "00:00:00" },
                { id: "lepas_tali_tunda2", title: "Lepas Tali Tunda (Tug Off)", status: false, value: "00:00:00" },
                // { id:"isi_pin",           map:"",                                     title: "Isi Pin ", status: false, value: "00:00:00" },
                { id: "selesai_pandu", map: "tglSelesaiPandu", tahapPandu: 3, title: "Selesai Pandu (Pilot Get Off)", status: false, value: "00:00:00" },
                { id: "keluar", status: false, title: "Keluar (Close)" }
            ]
        ];
        this.data = params.get('datas');
        this.kapalTunda = params.get('tundas');
        console.log(this.data);
        this.paramWizard = (this.data.jenisDermaga - 1);
        this.v_pandu_status = true;
        console.log("generate wizard flow", this.paramWizard);
        //this.fetchingWorker();
        console.log('Hello PemanduanPage Page');
        this.storage.ready().then(function () {
            _this.storage.get('profile').then(function (data) {
                _this.profile = data;
                console.log(_this.profile);
            });
            _this.firstLoad();
        });
    }
    PemanduanPage.prototype.ionViewDidLoad = function () {
    };
    PemanduanPage.prototype.firstLoad = function () {
        this.generateStep(this.paramWizard);
        this.current_state();
    };
    PemanduanPage.prototype.presentLoadingDefault = function () {
        this.loader = this.loadingCtrl.create({
            content: 'Please wait...'
        });
        this.loader.present();
    };
    PemanduanPage.prototype.resizeCanvas = function () {
        var ratio = Math.max(window.devicePixelRatio || 1, 1);
        this.canvas.width = this.canvas.offsetWidth * ratio;
        this.canvas.height = this.canvas.offsetHeight * ratio;
        this.canvas.getContext("2d").scale(ratio, ratio);
    };
    PemanduanPage.prototype.current_state = function () {
        var _this = this;
        console.log("Current State.....");
        this.storage.get('last_state2').then(function (state) {
            console.log('state', state);
            _this.storage.get('panduid').then(function (panduid) {
                if (panduid != null && panduid == _this.data.id) {
                    _this.last_state = state;
                    _this.showButtonBatal = true;
                    console.log("storage", state);
                    if (_this.last_state == null) {
                        _this.v_pemanduan_start = true;
                        _this.showWizard = true;
                    }
                    else if (_this.last_state == 'pemanduan_stop') {
                        _this.v_pemanduan_selesai = true;
                    }
                    else {
                        var next_state = _this.getNextStep(_this.last_state);
                        _this["v_" + next_state] = true;
                    }
                    _this.fetchingWorker();
                    _this.index = _this.getIndexbyObject(_this.wizard, _this.last_state);
                    _this.nextAction(_this.last_state, _this.index);
                    if (_this.last_state == "selesai_pandu") {
                        _this.v_sign = true;
                        _this.showButtonBatal = false;
                        setTimeout(function () {
                            _this.canvas = document.querySelector("canvas");
                            _this.signaturePad = new __WEBPACK_IMPORTED_MODULE_5_signature_pad__(_this.canvas);
                        }, 2000);
                    }
                }
                else {
                    _this.last_state = null;
                    _this.storage.remove('last_state2');
                    _this.storage.remove('last_state');
                    _this.storage.remove('panduid');
                    _this.storage.remove('v_worker2');
                    _this.storage.remove('notif_spk');
                    _this.storage.remove('notifWorking');
                    localStorage.removeItem('v_worker2');
                    localStorage.removeItem('notifWorking');
                    localStorage.removeItem('last_state2');
                    console.log("storage", state);
                    if (_this.last_state == null) {
                        _this.v_pemanduan_start = true;
                        _this.showWizard = true;
                    }
                    else if (_this.last_state == 'pemanduan_stop') {
                        _this.v_pemanduan_selesai = true;
                    }
                    else {
                        var next_state = _this.getNextStep(_this.last_state);
                        _this["v_" + next_state] = true;
                    }
                    _this.fetchingWorker();
                    _this.index = _this.getIndexbyObject(_this.wizard, _this.last_state);
                    _this.nextAction(_this.last_state, _this.index);
                    if (_this.last_state == "selesai_pandu") {
                        _this.v_sign = true;
                        setTimeout(function () {
                            _this.canvas = document.querySelector("canvas");
                            _this.signaturePad = new __WEBPACK_IMPORTED_MODULE_5_signature_pad__(_this.canvas);
                        }, 2000);
                    }
                }
            });
        });
    };
    PemanduanPage.prototype.fetchingWorker = function () {
        console.debug("fetchingWorker.....");
        // console.log("before this working", this.s_working);
        this.s_working = [];
        this.s_working = localStorage.getItem('v_worker2');
        console.log("after this working", this.s_working);
        if (this.s_working != null)
            this.wizard = JSON.parse(this.s_working);
        else
            this.wizard = this.generate_wizard[this.paramWizard];
        console.log("Wizard used..", this.wizard);
        for (var v_data in this.wizard) {
            console.log("title:", this.wizard[v_data]['title'], "status:", this.wizard[v_data]['status'], "V:", __WEBPACK_IMPORTED_MODULE_4_moment__(this.wizard[v_data]['value']).format("HH:mm:ss"));
            if (this.wizard[v_data]['status'] == true) {
                this.stepComplete(this.wizard[v_data]['id']);
                //if(Number(v_data) >= 1 && Number(v_data) < Number(this.wizard.length)){
                //console.log('start', this.wizard[v_data]['value'], 'end', this.wizard[Number(v_data)+1]['value'])
                this.diffProgress(this.wizard[v_data]['value'], this.wizard[Number(v_data) + 1]['value']);
                //}
                console.debug("title:", this.wizard[v_data]['title'], "status:", this.wizard[v_data]['status'], "status:", this.wizard[v_data]['value']);
                this.statusTemplate(this.wizard[v_data]['title'], this.wizard[v_data]['value'], this.wizard[v_data]['tahapPandu']);
            }
        }
        this.showWizard = true;
    };
    PemanduanPage.prototype.stepComplete = function (elm) {
        try {
            var el = document.getElementsByClassName("i" + elm)[0];
            if (elm != 'isi_pin' && elm != 'keluar')
                el.setAttribute('class', 'complete');
        }
        catch (e) {
            console.log("wizard step was completed");
        }
    };
    PemanduanPage.prototype.getIndexbyObject = function (Ar, id) {
        return Ar.map(function (e) { return e.id; }).indexOf(id);
    };
    PemanduanPage.prototype.timer = function (worker, title, status) {
        if (status === void 0) { status = true; }
        this.last_state = worker;
        this.flag_state[worker].status = status;
        this.wizard[this.getIndexbyObject(this.wizard, worker)].status = status;
        console.log(this.flag_state[worker].status, worker);
        this.flag_state[worker].value = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm');
        this.wizard[this.getIndexbyObject(this.wizard, worker)].value = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm');
        this.storage.set('last_state', worker);
        this.storage.set('last_state2', worker);
        this.storage.set('v_worker2', this.flag_state);
        localStorage.setItem('last_state2', worker);
        localStorage.setItem('notifWorking', 'true');
        localStorage.setItem('v_worker2', JSON.stringify(this.wizard));
        this.v_timer = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm');
        //add progress to template
        this.statusTemplate(title, this.v_timer, this.wizard[this.getIndexbyObject(this.wizard, worker)]['tahapPandu']);
        //replace color step wizard to complete
        this.stepComplete(worker);
        if (this.index > 0) {
            var v1 = this.wizard[this.index].value;
            var v2 = this.wizard[this.index - 1].value;
            console.warn(v2, v1);
            this.diffProgress(v2, v1);
        }
        if (worker != 'isi_pin' && worker != 'keluar') {
            var postParam = {
                idTahapanPandu: this.flag_state[worker].tahapPandu,
                nomorSpk: this.data.nomorSpk,
                nomorSpkPandu: this.data.nomorSpkPandu,
                tglTahapan: this.v_timer,
                title: title
            };
            console.debug("POST PROGRESS", postParam);
            /**
             * post progres using http
             *
             */
            // this.spkData.postProgress(
            //   postParam.idTahapanPandu,
            //   postParam.nomorSpk,
            //   postParam.nomorSpkPandu, 
            //   postParam.tglTahapan
            // );
            /**
             * post progress menggunakan MQTT
             *
             * topic /progress/rea/pandu
             */
            this.notification.sendMessage(JSON.stringify(postParam), '/progress/rea/pandu');
            /**
             * post progress ke mobile tunda dan tambat
             *
             * @topic /notif/progress/pandu/${nomorSpkPandu}
             */
            this.notification.sendMessage(JSON.stringify(postParam), "/notif/progress/pandu/" + this.data.nomorSpkPandu);
            /**
             * notif ketika user tidak melakukan pekerjaan
             * true = apabila alert sudah ditampilkan 1x
             * false = alert belum ditampilkan
             */
            this.storage.set('notifWorking', 'false');
        }
        //push to data
        if (worker != 'isi_pin') {
            console.log(this.wizard[this.getIndexbyObject(this.wizard, worker)].map, __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm'));
            this.data[this.wizard[this.getIndexbyObject(this.wizard, worker)].map] = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm:ss');
            //handling tglMulaiPandu disamakan dengan kapal bergerak.. 
            if (worker == 'kapal_bergerak') {
                this.data['tglMulaiPandu'] = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm');
            }
            else if (worker == 'selesai_pandu') {
                this.data['jamTurun'] = __WEBPACK_IMPORTED_MODULE_4_moment__().format('YYYY-MM-DD[T]HH:mm');
            }
        }
    };
    PemanduanPage.prototype.getNextStep = function (current) {
        var aData = [];
        for (var data in this.flag_state) {
            aData.push(data);
        }
        var currentIndex = aData.indexOf(current);
        return aData[currentIndex + 1];
    };
    PemanduanPage.prototype.statusTemplate = function (title, value, wizardId) {
        var vVal = __WEBPACK_IMPORTED_MODULE_4_moment__(value).format('HH:mm');
        this.htmlText = this.htmlText +
            "\n          <div class=\"ps_stat_left\">\n            " + title +
            "\n          </div>\n          <div class=\"ps_stat_right\">\n            " + vVal +
            "\n          </div>\n      ";
    };
    PemanduanPage.prototype.pemanduan_start = function () {
        this.v_pandu_status = true;
        this.storage.set('panduid', this.data.id);
        this.tracker.startTracking();
        this.tracker.startPanduLocation(true, this.data.nomorSpkPandu);
        this.timer('pemanduan_start', 'Pandu Naik (Pilot Get On)');
        this.showButtonBatal = true;
    };
    PemanduanPage.prototype.kapal_bergerak = function () {
        this.timer('kapal_bergerak', 'Kapal Bergerak (Start Ship)');
        this.showButtonBatal = true;
    };
    PemanduanPage.prototype.selesai_pandu = function () {
        this.timer('selesai_pandu', 'Selesai Pandu (Pilot Get Off)');
        this.showButtonBatal = false;
    };
    PemanduanPage.prototype.ikat_tali_kapal = function () {
        this.timer('ikat_tali_kapal', 'Ikat Tali Kapal (Fast Line)');
        this.showButtonBatal = true;
    };
    PemanduanPage.prototype.ikat_tali_tunda = function () {
        this.timer('ikat_tali_tunda', 'Ikat Tali Tunda (Tug Fast)');
        this.showButtonBatal = true;
    };
    PemanduanPage.prototype.ikat_tali_tunda2 = function () {
        this.timer('ikat_tali_tunda2', 'Ikat Tali Tunda 2');
    };
    PemanduanPage.prototype.lepas_tali_kapal = function () {
        this.timer('lepas_tali_kapal', 'Lepas Tali Kapal (Last Line)');
        this.showButtonBatal = true;
    };
    PemanduanPage.prototype.lepas_tali_tunda = function () {
        this.timer('lepas_tali_tunda', 'Lepas Tali Tunda (Tug Off)');
        this.showButtonBatal = true;
    };
    PemanduanPage.prototype.lepas_tali_tunda2 = function () {
        this.timer('lepas_tali_tunda2', 'Lepas Tali Tunda 2');
    };
    PemanduanPage.prototype.isi_pin = function () {
        /**
         * show pin container
         */
        this.isPin = true;
        this.timer('isi_pin', 'Isi Pin');
    };
    PemanduanPage.prototype.pandu_turun = function () {
        this.timer('pandu_turun', 'Pandu Turun ');
    };
    PemanduanPage.prototype.pemanduan_stop = function () {
        this.timer('pemanduan_stop', 'Stop');
    };
    PemanduanPage.prototype.pemanduan_selesai = function () {
        this.showButtonBatal = false;
        this.timer('selesai_pandu', 'Selesai Pandu');
    };
    PemanduanPage.prototype.clearSignature = function () {
        this.signaturePad.clear();
    };
    PemanduanPage.prototype.nextAction = function (workId, index) {
        var _this = this;
        this.index = index;
        if (this.last_state != workId) {
            switch (workId) {
                case 'pemanduan_start':
                    this.pemanduan_start();
                    break;
                case 'kapal_bergerak':
                    this.kapal_bergerak();
                    break;
                case 'ikat_tali_tunda':
                    this.ikat_tali_tunda();
                    break;
                case 'ikat_tali_kapal':
                    this.ikat_tali_kapal();
                    break;
                case 'lepas_tali_kapal':
                    this.lepas_tali_kapal();
                    break;
                case 'lepas_tali_tunda':
                    this.lepas_tali_tunda();
                    break;
                case 'ikat_tali_tunda2':
                    this.ikat_tali_tunda2();
                    break;
                case 'lepas_tali_tunda2':
                    this.lepas_tali_tunda2();
                    break;
                case 'isi_pin':
                    this.isi_pin();
                    break;
                case 'selesai_pandu':
                    this.v_sign = true;
                    this.isPin = false;
                    setTimeout(function () {
                        _this.canvas = document.querySelector("canvas");
                        _this.signaturePad = new __WEBPACK_IMPORTED_MODULE_5_signature_pad__(_this.canvas);
                    }, 2000);
                    this.pemanduan_selesai();
                    break;
                case 'keluar':
                    if (this.signaturePad.isEmpty()) {
                        var notifAlert = this.alertCtrl.create({
                            title: 'Error..!!',
                            subTitle: 'Mohon isi tanda tangan nahkoda kapal"',
                            buttons: ['OK']
                        });
                        notifAlert.present();
                        return false;
                    }
                    this.showButton = this.wizard[index].id;
                    this.presentLoadingDefault();
                    /**
                    * update progress to done when progress pemanduan selesai
                    */
                    console.log("PUT PROGRESS DONE", this.data.id);
                    console.log("master data", this.data);
                    /**
                     * put progress using http
                     */
                    // this.spkData.putProgressDone(this.data.id);
                    /**
                     * topic : /mobile/spk/pandu/done
                     * payload: idspk
                     */
                    this.notification.sendMessage(JSON.stringify(this.data.id), '/mobile/spk/pandu/done');
                    /**
                     * publish to API
                     */
                    this.pubToApi();
                    /**
                     * kriim tahapan pandu manual
                     *
                     */
                    // this.postTahapanBulk(this.data.nomorSpk, this.data.nomorSpkPandu, this.data.id)
                    setTimeout(function () {
                        /**
                        * remove all key from storage
                        */
                        _this.removeStorage();
                        _this.loader.dismiss();
                        _this.navCtrl.setRoot(__WEBPACK_IMPORTED_MODULE_3__realisasi_pandu_realisasi_pandu__["a" /* RealisasiPanduPage */]);
                        /**
                         * stop kirim lokasi pandu
                         */
                        _this.tracker.stopTracking();
                        _this.tracker.startPanduLocation(false);
                        clearInterval(_this.tracker.intMulaiPandu);
                        // this.navCtrl.setRoot(RealisasiPanduPage);
                    }, 5000);
                    break;
            }
        }
        if (workId != 'keluar')
            this.showButton = this.wizard[index + 1].id;
        console.log("must be shown", this.showButton);
    };
    PemanduanPage.prototype.pubToApi = function () {
        var data_format = {
            "remark": this.remark,
            "asalDermaga": 0,
            "catatan": this.remark,
            "flagApbs": 0,
            "flagRampdoor": 0,
            "nipPandu": this.profile.nipPandu,
            "username": this.profile.nipPandu,
            "jenisKep": "normal",
            "jenisRealisasi": 0,
            "namaPandu": this.profile.namaPetugas,
            "mobileAppVersion": this.appConfig['version'],
            "posisiKapal": "1",
            "status": 0,
            "statusPelaksanaan": 0,
            "statusSiklusPandu": 1,
            "sign": this.signaturePad.toDataURL(),
            "msgId": this.data.id
        };
        for (var i in data_format) {
            this.data[i] = data_format[i];
        }
        /**
         * post realisasi pandu
         */
        console.debug("POST REA", this.data);
        if (this.pnetwork.network_state) {
            console.log("DEBUG REALISASI: online");
            this.spkData.realisasiPandu(this.data.jenisDermaga, this.data);
            this.realisasiAction("C");
        }
        else {
            console.log("DEBUG REALISASI: offline");
            this.realisasiAction("P");
        }
        /**
         * topic realisasi
         * /mobile/rea/pandu
         */
        this.notification.sendMessage(JSON.stringify(this.data), '/mobile/rea/pandu/log');
        /**
         * Jika menggunakan offline data
         */
        // this._sql.saveRealisasiToSqlite(this.data)
        // this._sql.saveRealisasiMqttLog(this.data)
    };
    /**
     *
     * @param state {P | C} string
     */
    PemanduanPage.prototype.realisasiAction = function (state) {
        var _this = this;
        this._sql.saveRealisasiToSqlite(this.data).then(function () {
            _this._sql.saveRealisasiMqttLog(_this.data, state).then(function () {
                /**
                * Jika menggunakan offline data
                */
                _this._sql.updateSpkStatus(_this.data.id, state);
            });
        });
        /**
         * kriim tahapan pandu manual
         *
         */
        this.postTahapanBulk(this.data.nomorSpk, this.data.nomorSpkPandu, this.data.id);
    };
    PemanduanPage.prototype.generateStep = function (id) {
        console.log("wizard used", id);
        var vData = [];
        this.generate_wizard[id].forEach(function (ret) {
            if (ret.id != 'isi_pin' && ret.id != 'keluar')
                vData.push(ret);
        });
        this.wizardStep = '<ol class="list-inline text-center step-indicator">';
        for (var i in vData) {
            this.wizardStep +=
                " <li class=\"i" + vData[i].id + " active\">\n              <div class=\"step\">" + (Number(i) + 1) + "</div>\n              <div class=\"caption hidden-xs hidden-sm\">\n              " + vData[i].title + "</div>\n            </li>\n        ";
        }
        this.wizardStep += '</ol>';
    };
    PemanduanPage.prototype.diffProgress = function (start, end) {
        if (end > start) {
            // var ms = moment(end,"HH:mm:ss").diff(moment(start,"HH:mm:ss"));
            // var d = moment.duration(ms);
            // var s = Math.floor(d.asHours()) + moment.utc(ms).format(":mm");
            var date1 = __WEBPACK_IMPORTED_MODULE_4_moment__(start, 'YYYY-MM-DDTHH:mm'), date2 = __WEBPACK_IMPORTED_MODULE_4_moment__(end, 'YYYY-MM-DDTHH:mm');
            var duration = __WEBPACK_IMPORTED_MODULE_4_moment__["duration"](date2.diff(date1));
            var ms = __WEBPACK_IMPORTED_MODULE_4_moment__(end, "HH:mm").diff(__WEBPACK_IMPORTED_MODULE_4_moment__(start, "HH:mm"));
            var d = __WEBPACK_IMPORTED_MODULE_4_moment__["duration"](ms);
            var s = __WEBPACK_IMPORTED_MODULE_4_moment__["utc"](ms).format(":mm");
            var res;
            if (Math.floor(d.asHours()) > 24)
                res = Math.floor(duration.asHours()) + s;
            else
                res = Math.floor(d.asHours()) + __WEBPACK_IMPORTED_MODULE_4_moment__["utc"](ms).format(":mm");
            if (this.timeDiff != 'undefined')
                this.timeDiff += "<li><div>" + res + "</div></li>";
        }
    };
    PemanduanPage.prototype.removeStorage = function () {
        this.storage.remove('v_worker');
        localStorage.removeItem('v_worker');
        this.storage.remove('v_worker2');
        localStorage.removeItem('v_worker2');
        localStorage.removeItem('last_state2');
        this.storage.remove('last_state');
        this.storage.remove('last_state2');
        this.storage.remove('panduid');
    };
    PemanduanPage.prototype.drawComplete = function () {
        // will be notified of szimek/signature_pad's onEnd event
        console.log(this.signaturePad.toDataURL());
    };
    PemanduanPage.prototype.drawStart = function () {
        // will be notified of szimek/signature_pad's onBegin event
        console.log('begin drawing');
    };
    PemanduanPage.prototype.presentPopover = function (ev) {
        var _this = this;
        var modal = this.modal.create(__WEBPACK_IMPORTED_MODULE_11__components_remark_remark__["a" /* RemarkComponent */], { remark: this.remark }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        });
        modal.onDidDismiss(function (data) {
            console.log("Dismiss from modal", data);
            _this.remark = data;
        });
        modal.present();
    };
    PemanduanPage.prototype.showBatalPandu = function (index) {
        var _this = this;
        var modalBatalPandu = this.modal.create(__WEBPACK_IMPORTED_MODULE_12__components_batal_pandu_batal_pandu__["a" /* BatalPanduComponent */], { index: index }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        });
        modalBatalPandu.onDidDismiss(function (data) {
            _this.showButtonBatal = true;
            console.log("batal pandu dismiss", data);
            _this.data["namaLokasiPanduTujuan"] = data.namaDermaga;
            _this.data["kodeLokasiPanduTujuan"] = data.kodeDermaga;
            _this.data["kendalaOperasional"] = data.kendalaOperasional;
            var c = data.index;
            var _loop_1 = function (v_val) {
                setTimeout(function () {
                    if (c == v_val && _this.wizard[c].id !== 'keluar') {
                        _this.nextAction(_this.wizard[c].id, c);
                        c++;
                    }
                }, 2000);
            };
            for (var v_val in _this.wizard) {
                _loop_1(v_val);
            }
        });
        modalBatalPandu.present();
    };
    PemanduanPage.prototype.showAdjustTime = function () {
        var _this = this;
        var modalAdjustTime = this.modal.create(__WEBPACK_IMPORTED_MODULE_13__components_adjust_time_adjust_time__["a" /* AdjustTimeComponent */], { index: "" }, {
            showBackdrop: true,
            enableBackdropDismiss: false
        });
        modalAdjustTime.onDidDismiss(function (data) {
            if (data) {
                _this.htmlText = '';
                _this.timeDiff = '';
                setTimeout(function () {
                    _this.firstLoad();
                }, 1000);
            }
        });
        modalAdjustTime.present();
    };
    PemanduanPage.prototype.postTahapanBulk = function (nomorSpk, nomorSpkPandu, spkId) {
        var data_format = {
            "nomorSpk": nomorSpk,
            "nomorSpkPandu": nomorSpkPandu,
            "userCreated": this.profile.nipPandu,
            "progressPemanduan": []
        };
        var tanggalTahapan = JSON.parse(localStorage.getItem('v_worker2'));
        var v;
        for (var i in tanggalTahapan) {
            data_format.progressPemanduan.push({
                "idTahapanPandu": tanggalTahapan[i].tahapPandu,
                "tglTahapan": tanggalTahapan[i].value,
                "title": tanggalTahapan[i].title
            });
        }
        /**
         * kirim progress bulk manual input
         * menggunakn HTTP
         */
        this.spkData.postProgressBulk(data_format);
        /**
         * kirim progress bulk manual input
         * menggunakan mqtt
         * @topic /progress/manual/pandu
         */
        // this.notification.sendMessage(JSON.stringify(data_format), '/progress/manual/pandu');
        this._sql.updateProgressRealisasi(spkId, JSON.stringify(data_format));
        this._sql.saveAddjusttimeMqttLog(this.data);
    };
    PemanduanPage.prototype.appendComponent = function () {
    };
    return PemanduanPage;
}()); //end of class
PemanduanPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-pemanduan',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\pemanduan\pemanduan.html"*/'<!--\n\n  Generated template for the pemanduan page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <ion-title>\n\n      <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n\n\n    <span [class]="pnetwork.network_state==true ? \'network_state_on\':\'network_state_off\'"></span>\n\n    \n\n  </ion-navbar>\n\n\n\n</ion-header>\n\n\n\n\n\n<ion-content class="cpage">\n\n\n\n    <ion-fab right top class="buttonFab">\n\n      <button ion-fab color="oranye" (click)="presentPopover($event)"><ion-icon name="create"></ion-icon></button>\n\n    </ion-fab>\n\n\n\n  <ion-grid class="gr-white">\n\n    <ion-card  class="gr-card">\n\n      \n\n      <ion-card-content no-padding>\n\n        <ion-row>\n\n          <ion-col>\n\n            <ion-row>\n\n              <ion-col>\n\n                <h2><b>{{data.namaKapal}}</b></h2>\n\n                <small>{{data.namaAgen}}</small>\n\n              </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n                <ion-col col-8>\n\n                    <ion-row class="text-body">\n\n                      <ion-col col-5>\n\n                        <br> PPK1\n\n                        <br> No. SPK Pandu\n\n                        <br> ASAL <i><small>From</small></i>\n\n                        <br> TUJUAN <i><small>To</small></i>\n\n                        <br> STATUS <i><small>State</small></i>\n\n                      </ion-col>\n\n                      <ion-col col-7>\n\n                        <br> {{data.noPpk1}}\n\n                        <br> {{data.nomorSpkPandu}}\n\n                        <br> {{data.namaLokasiPanduAsal}}\n\n                        <br> {{data.namaLokasiPanduTujuan}}\n\n                        <br> {{data.status}}\n\n                      </ion-col>\n\n                    </ion-row>\n\n                </ion-col>\n\n                <ion-col col-4>\n\n                  <ion-row>\n\n                    <ion-col align="right"><b>Informasi Kapal Tunda</b></ion-col>\n\n                  </ion-row>\n\n                  <ion-row *ngFor="let tunda of kapalTunda">\n\n                    <ion-col col-12 align="right"><i>{{tunda.namaKapal}} ( {{tunda.kodeKapal}} )</i></ion-col>\n\n                    <!-- <ion-col col-12 align="right">Kode Kapal:{{tunda.kodeKapal}}</ion-col> -->\n\n                  </ion-row>\n\n                </ion-col>\n\n            </ion-row>\n\n            \n\n\n\n            <ion-row>\n\n              <div [innerHtml]="wizardStep"></div>\n\n            </ion-row>\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-card-content>\n\n\n\n    </ion-card>\n\n  </ion-grid>\n\n  \n\n  \n\n  <ion-grid class="gr-white">\n\n    <ion-card class="gr-card" *ngIf="isPin">\n\n      <ion-item>\n\n        <ion-label>Isi Pin Nahkoda</ion-label>\n\n        <ion-input type="text" [(ngModel)]="v_pin_nahkoda"></ion-input>\n\n      </ion-item>\n\n    </ion-card>\n\n\n\n    <ion-card class="gr-card" *ngIf="showWizard">\n\n      <div *ngFor="let data of wizard; let i=index ">\n\n        <button color="oranye" class="btnPemanduans" *ngIf="showButton == data.id && data.status == false" ion-button  (press)="nextAction(data.id, i)">  {{ data.title }} </button>\n\n        <button color="danger" class="btnBatalPemanduan" *ngIf="(showButton == data.id && data.status == false ) " ion-button [disabled]="!showButtonBatal"  (click)="showBatalPandu(i)"> PANDU TURUN </button>\n\n      </div>\n\n    </ion-card>\n\n\n\n    <ion-card class="gr-card" *ngIf="v_pandu_status" padding>\n\n      <h2><b>Pandu Status</b></h2>\n\n      <div id="pandu_status">\n\n        <ion-grid>\n\n          <ion-row>\n\n            <ion-col col-md-7 col-sm-12>\n\n              <ion-row>\n\n                <ion-col>\n\n                  <div class="valueTime" [innerHtml]="htmlText"></div>\n\n                  <!-- <div class="manualTime" [innerHtml]="manualText | sanitizeHtml"></div> -->\n\n                  \n\n                  <div class="resultTime">\n\n                    <ul class="ulTimeDiff" [innerHtml]="timeDiff"></ul>\n\n                  </div>\n\n                </ion-col>\n\n              </ion-row>\n\n            </ion-col>\n\n            <ion-col col-md-5>\n\n              <div class="manual">\n\n                <div>\n\n                  <b>Ubah Jam Tahapan Pandu</b>\n\n                  <p>\n\n                    <span><small>Anda memungkinkan untuk mengubah jam/tanggal tahapan pengerjaan yang sudah anda kerjakan setelah proses tahapan <b>Selesai Pandu</b></small></span>\n\n                  </p>\n\n                </div>\n\n                <button *ngIf="v_sign" ion-button color="blue-off" (click)="showAdjustTime()">Ubah Jam Tahapan</button>\n\n              </div>\n\n            </ion-col>\n\n          </ion-row>\n\n        </ion-grid>\n\n      </div>\n\n\n\n    </ion-card>\n\n  </ion-grid>\n\n\n\n  <ion-grid class="gr-white">\n\n    <ion-card class="gr-card" *ngIf="v_sign" padding>\n\n      <ion-grid>\n\n        <ion-row>\n\n          <ion-col>\n\n            <ion-row>\n\n\n\n            </ion-row>\n\n            Pandu Profile<br>\n\n            <ion-row align="center">\n\n              <ion-col align="center">\n\n                <ion-avatar>\n\n                  <div class="avatar">\n\n                    <img [src]=" profile.photo!=null ?  \'data:image/PNG;base64,\' + profile.photo : \'assets/img/person.png\'">\n\n                  </div>\n\n                </ion-avatar>\n\n              </ion-col>\n\n            </ion-row>\n\n            <ion-row>\n\n              <ion-col align="center">profile \n\n                {{profile.namaPetugas}}<br>\n\n                {{profile.nipPandu}}<br>\n\n                {{profile.hp}}<br>\n\n              </ion-col>\n\n            </ion-row>\n\n\n\n          </ion-col>\n\n          <ion-col>\n\n            Tanda Tangan Nahkoda Kapal <br> (Vessel master signature)\n\n            <button ion-button color="danger" clear icon-only (click)="clearSignature()">\n\n              <ion-icon name=\'trash\' is-active="false"></ion-icon>\n\n            </button>\n\n            <canvas></canvas>\n\n            <!--<signature-pad [options]="signaturePadOptions"></signature-pad>-->\n\n          </ion-col>\n\n        </ion-row>\n\n      </ion-grid>\n\n\n\n    </ion-card>\n\n\n\n    \n\n  </ion-grid>\n\n  <!--\n\n  *ngIf="showButton == data.id && data.status == false"\n\n-->\n\n  \n\n\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\pemanduan\pemanduan.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_7__providers_spk_data__["a" /* SpkData */], __WEBPACK_IMPORTED_MODULE_10__providers_location_tracker__["a" /* LocationTracker */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_8__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_9__providers_notification__["a" /* Notification */],
        __WEBPACK_IMPORTED_MODULE_7__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_10__providers_location_tracker__["a" /* LocationTracker */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["k" /* ModalController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_14__config_app_config__["a" /* AppConfig */],
        __WEBPACK_IMPORTED_MODULE_16__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
        __WEBPACK_IMPORTED_MODULE_15__ionic_native_sqlite__["a" /* SQLite */]])
], PemanduanPage);

//# sourceMappingURL=pemanduan.js.map

/***/ }),

/***/ 731:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RemarkComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};


/**
 * Generated class for the RemarkComponent component.
 *
 * See https://angular.io/docs/ts/latest/api/core/index/ComponentMetadata-class.html
 * for more info on Angular Components.
 */
var RemarkComponent = (function () {
    function RemarkComponent(view, params) {
        this.view = view;
        this.params = params;
        this.remark = this.params.get('remark');
    }
    RemarkComponent.prototype.dismiss = function () {
        this.view.dismiss(this.remark);
    };
    return RemarkComponent;
}());
RemarkComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'remark',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\remark\remark.html"*/'<!-- <ion-content class="main-view">\n\n    <div class="overlay"></div>\n\n    <div class="modal_content">\n\n      <h2>Catatan Pemanduan:</h2>\n\n      <br>\n\n      <br>\n\n      <textarea style="margin: 0px;width: 280px;height: 154px"></textarea>\n\n      <ion-footer>\n\n        <ion-toolbar>\n\n            <button ion-button full (click)="dismiss()">SUBMIT</button>\n\n        </ion-toolbar>\n\n      </ion-footer>\n\n    </div>\n\n    \n\n  </ion-content> -->\n\n\n\n  \n\n  \n\n  <ion-content>\n\n    <ion-list>\n\n      <div text-center>\n\n        <h2>Catatan Pemanduan:</h2>\n\n      </div>\n\n    </ion-list>\n\n    \n\n    <br>\n\n    <br>\n\n    <textarea id="remark-text" [(ngModel)]="remark">\n\n      {{remark}}\n\n    </textarea>\n\n    <ion-footer>\n\n      <ion-toolbar>\n\n          <button ion-button full (click)="dismiss()">SUBMIT</button>\n\n      </ion-toolbar>\n\n    </ion-footer>\n\n  </ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\remark\remark.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */], __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */]])
], RemarkComponent);

//# sourceMappingURL=remark.js.map

/***/ }),

/***/ 732:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return BatalPanduComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the BatalPanduComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var BatalPanduComponent = (function () {
    function BatalPanduComponent(view, params, _spkData, sqlService, alertCtrl) {
        this.view = view;
        this.params = params;
        this._spkData = _spkData;
        this.sqlService = sqlService;
        this.alertCtrl = alertCtrl;
        this.items = [];
        this.workId = params.get('index');
        this.cabang = localStorage.getItem('kodeterminal');
    }
    BatalPanduComponent.prototype.searchDermaga = function (namaDermaga) {
        var _this = this;
        console.log("Nama Dermaga", namaDermaga);
        // this._spkData.searchMdmDermaga(namaDermaga).subscribe( data => {
        //   this.items = data;
        //   console.log("Data dermaga tujuan pandu: ",data);
        // })
        this.sqlService.getDermagaOffline(namaDermaga, this.cabang).then(function (data) {
            _this.items = data;
            console.log("Data dermaga tujuan pandu: ", JSON.stringify(data));
        });
    };
    BatalPanduComponent.prototype.getItem = function (item) {
        console.log("item index", "item", item);
        this.kodeDermaga = item.mdmgKode;
        this.namaDermaga = item.mdmgNama;
        this.items = [];
    };
    BatalPanduComponent.prototype.onCancel = function (ev) {
        console.log("on cancel");
        this.items = [];
    };
    BatalPanduComponent.prototype.dismiss = function () {
        if (this.kodeDermaga === undefined || this.kendalaOperasional === undefined) {
            var Alert = this.alertCtrl.create({
                title: 'Error..!!',
                subTitle: 'Mohon isi lokasi pandu tujuan dan alasan kendala operasional.."',
                buttons: ['OK']
            }).present();
        }
        else {
            var data = {
                kodeDermaga: this.kodeDermaga,
                namaDermaga: this.namaDermaga,
                kendalaOperasional: this.kendalaOperasional,
                index: this.workId
            };
            this.view.dismiss(data);
        }
    };
    BatalPanduComponent.prototype.cancel = function () {
        this.view.dismiss();
    };
    return BatalPanduComponent;
}());
BatalPanduComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'batal-pandu',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\batal-pandu\batal-pandu.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <div class="hdBatal">\n\n      BATAL PEMANDUAN\n\n    </div>\n\n  </ion-navbar>\n\n  <ion-toolbar no-border-top color="white">\n\n    <ion-searchbar #q\n\n      (search)="searchDermaga(q.value)"\n\n      (ionCancel)="onCancel($event)"\n\n      [showCancelButton]="true"\n\n      autocomplete="off"\n\n      placeholder="Cari lokasi batal tujuan pandu">\n\n    </ion-searchbar>\n\n  </ion-toolbar>\n\n\n\n  <ion-list *ngIf="items.length > 0">\n\n    <ion-item *ngFor="let item of items; let i=index" (click)="getItem(item)">\n\n      <span>{{ item.mdmgNama }}</span>\n\n    </ion-item>\n\n  </ion-list>\n\n</ion-header>\n\n\n\n<ion-content>\n\n  <ion-list>\n\n    <ion-item>\n\n      <ion-label>\n\n        Lokasi batal tujuan\n\n      </ion-label>\n\n      <ion-note item-end> {{namaDermaga}} </ion-note>\n\n    </ion-item>\n\n    <ion-item>\n\n      <ion-label>Kendala Operasional</ion-label>\n\n      <ion-select [(ngModel)]="kendalaOperasional">\n\n        <ion-option value="1">Awak Kapal Belum Siap</ion-option>\n\n        <ion-option value="2">Dokument Kapal Belum Siap</ion-option>\n\n        <ion-option value="3">Faktor Alam</ion-option>\n\n        <ion-option value="4">Faktor Teknis</ion-option>\n\n        <ion-option value="5">Pemeriksaan Imigrasi atau Karantina</ion-option>\n\n        <ion-option value="6">Sarana Sedang Dipakai</ion-option>\n\n        <ion-option value="7">Tidak Ada Sarana</ion-option>\n\n        <ion-option value="9">Tunggu atau Antri pelayanan</ion-option>\n\n      </ion-select>\n\n    </ion-item>\n\n  </ion-list>\n\n  <ion-footer>\n\n    <ion-toolbar>\n\n      <ion-row>\n\n        <ion-col>\n\n            <button color="oranye" ion-button full (click)="cancel()">CANCEL</button>\n\n        </ion-col>\n\n        <ion-col>\n\n            <button color="ijo-tua" ion-button full (click)="dismiss()">SUBMIT</button>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-toolbar>\n\n  </ion-footer>\n\n</ion-content>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\batal-pandu\batal-pandu.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_2__providers_spk_data__["a" /* SpkData */], __WEBPACK_IMPORTED_MODULE_3__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_2__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_3__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */]])
], BatalPanduComponent);

//# sourceMappingURL=batal-pandu.js.map

/***/ }),

/***/ 733:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AdjustTimeComponent; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_forms__ = __webpack_require__(33);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




/**
 * Generated class for the BatalPanduComponent component.
 *
 * See https://angular.io/api/core/Component for more info on Angular
 * Components.
 */
var AdjustTimeComponent = (function () {
    function AdjustTimeComponent(view, params, _spkData, alertCtrl, formBuilder) {
        this.view = view;
        this.params = params;
        this._spkData = _spkData;
        this.alertCtrl = alertCtrl;
        this.formBuilder = formBuilder;
        // this.workId = params.get('index');
        this.workId = JSON.parse(localStorage.getItem('v_worker2'));
        console.log(this.workId);
    }
    AdjustTimeComponent.prototype.onCancel = function (ev) {
    };
    AdjustTimeComponent.prototype.dismiss = function (form) {
        var dataTahapan = [];
        var v;
        for (var _i = 0, _a = this.workId; _i < _a.length; _i++) {
            var tahapan = _a[_i];
            tahapan.value = form.value[tahapan.id];
            // console.log("data parsing", this.rmZone(v), moment(v).format());
            dataTahapan.push(tahapan);
        }
        console.log("To localDB", dataTahapan);
        v = JSON.stringify(dataTahapan);
        localStorage.setItem('v_worker2', this.rmZone(v));
        this.view.dismiss(true);
    };
    AdjustTimeComponent.prototype.rmZone = function (str) {
        return str.replace(/([Z+])/g, "");
    };
    AdjustTimeComponent.prototype.cancel = function () {
        this.view.dismiss(false);
    };
    return AdjustTimeComponent;
}());
AdjustTimeComponent = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'adjust-time',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\adjust-time\adjust-time.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <div class="hdBatal">\n\n      ADJUST TIME\n\n    </div>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content>\n\n  <div class="info">\n\n    Silahkan sesuaikan tanggal dan jam tahapan pemanduan\n\n  </div>\n\n  <form #adjustTime="ngForm" novalidate>\n\n    <div class="md-content">\n\n      <ion-list *ngFor="let item of workId">\n\n          <ion-item *ngIf="item.status">\n\n            <ion-label>\n\n                {{item.title}} : \n\n            </ion-label>\n\n            <ion-datetime name="{{item.id}}" #{{item.id}}="ngModel" displayFormat="DD/MM/YYYY HH:mm" [(ngModel)]="item.value"></ion-datetime>\n\n          </ion-item>\n\n      </ion-list>\n\n    </div>\n\n  <ion-footer>\n\n    <ion-toolbar>\n\n      <ion-row>\n\n        <ion-col>\n\n            <button color="oranye" ion-button full (click)="cancel()">CANCEL</button>\n\n        </ion-col>\n\n        <ion-col>\n\n            <button color="ijo-tua" type="submit" ion-button full (click)="dismiss(adjustTime)">SUBMIT</button>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-toolbar>\n\n  </ion-footer>\n\n  </form>\n\n</ion-content>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\components\adjust-time\adjust-time.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_2__providers_spk_data__["a" /* SpkData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["q" /* ViewController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */],
        __WEBPACK_IMPORTED_MODULE_2__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_3__angular_forms__["a" /* FormBuilder */]])
], AdjustTimeComponent);

//# sourceMappingURL=adjust-time.js.map

/***/ }),

/***/ 734:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return SpkOfflineProvider; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_BehaviorSubject__ = __webpack_require__(108);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_BehaviorSubject___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_BehaviorSubject__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__config_app_config__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_device__ = __webpack_require__(122);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_sqlite__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__sqlite_service_sqlite_service__ = __webpack_require__(50);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};










var SpkOfflineProvider = (function () {
    function SpkOfflineProvider(http, appConfig, storage, device, platform, sqlite, _sql) {
        this.http = http;
        this.appConfig = appConfig;
        this.storage = storage;
        this.device = device;
        this.platform = platform;
        this.sqlite = sqlite;
        this._sql = _sql;
        // private sufApi = "api/mobile";
        this.sufApi = "vasa-jboss-perencanaanPandu/mobile";
        this.spkApiUrl = "";
        this.data = new __WEBPACK_IMPORTED_MODULE_4_rxjs_BehaviorSubject__["BehaviorSubject"]([]);
        this.packageData = new __WEBPACK_IMPORTED_MODULE_4_rxjs_BehaviorSubject__["BehaviorSubject"]([]);
        this.cast = this.packageData.asObservable();
        console.log('Hello SpkOfflineProvider Provider');
    }
    /**
       * load realisasi by tglMulai & tglSelesai
       *
       * @param tglMulai
       * @param tglSelesai
       */
    SpkOfflineProvider.prototype.loadRealisasi = function (tglMulai, tglSelesai) {
        var _this = this;
        var headers = new __WEBPACK_IMPORTED_MODULE_1__angular_http__["a" /* Headers */]();
        var username = localStorage.getItem('username');
        console.log(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/username/" + username + "?tglMulai=" + tglMulai + "&tglSelesai=" + tglSelesai + "&jenisJasa=pandu&status=OHN");
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/progress_spk/username/" + username + "?tglMulai=" + tglMulai + "&tglSelesai=" + tglSelesai + "&jenisJasa=pandu&status=OHN", { headers: headers })
            .map(function (res) { return res.json(); })
            .subscribe(function (data) {
            _this.packageData.next(data);
        });
    };
    /**
     * Offline data from sqlite
     *
     */
    SpkOfflineProvider.prototype.getMyOfflineData = function (tglMulai, tglSelesai) {
        var _this = this;
        this._sql.getSpkOfflineData(tglMulai, tglSelesai).then(function (data) {
            /**
             * push to datas object
             * variable datas pada directive realisasi-pandu.html
             * mengacu pada index array disini.
             */
            var datas = [];
            var v_offline = [];
            for (var i in data) {
                // console.log(data);
                datas.push([
                    { 'data': JSON.parse(data[i]['vjson']) },
                    { 'spk_id': data[i]['spk_id'] },
                    { 'status': data[i]['status'] },
                    { 'msg_state': data[i]['msg_state'] }
                ]);
            }
            _this.packageData.next(datas);
        });
    };
    return SpkOfflineProvider;
}());
SpkOfflineProvider = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_5__config_app_config__["a" /* AppConfig */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_native_device__["a" /* Device */],
        __WEBPACK_IMPORTED_MODULE_2_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_8__ionic_native_sqlite__["a" /* SQLite */],
        __WEBPACK_IMPORTED_MODULE_9__sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */]])
], SpkOfflineProvider);

//# sourceMappingURL=spk-offline.js.map

/***/ }),

/***/ 735:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AccountPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__login_login__ = __webpack_require__(251);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_user_data__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_notification__ = __webpack_require__(77);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};






var AccountPage = (function () {
    function AccountPage(alertCtrl, nav, userData, notification, storage) {
        this.alertCtrl = alertCtrl;
        this.nav = nav;
        this.userData = userData;
        this.notification = notification;
        this.storage = storage;
        this.profile = {};
    }
    AccountPage.prototype.ionViewDidLoad = function () {
        var _this = this;
        this.storage.get('profile').then(function (dataProfile) {
            _this.profile = dataProfile;
        });
        this.getUsername();
    };
    AccountPage.prototype.updatePicture = function () {
        console.log('Clicked to update picture');
    };
    // Present an alert with the current username populated
    // clicking OK will update the username and display it
    // clicking Cancel will close the alert and do nothing
    AccountPage.prototype.changeUsername = function () {
        var _this = this;
        var alert = this.alertCtrl.create({
            title: 'Change Username',
            buttons: [
                'Cancel'
            ]
        });
        alert.addInput({
            name: 'username',
            value: this.username,
            placeholder: 'username'
        });
        alert.addButton({
            text: 'Ok',
            handler: function (data) {
                _this.userData.setUsername(data.username);
                _this.getUsername();
            }
        });
        alert.present();
    };
    AccountPage.prototype.getUsername = function () {
        var _this = this;
        this.storage.get('username').then(function (username) {
            _this.username = username;
        });
    };
    AccountPage.prototype.changePassword = function () {
        console.log('Clicked to change password');
    };
    AccountPage.prototype.logout = function () {
        this.userData.logout();
        this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_3__login_login__["a" /* LoginPage */]);
    };
    return AccountPage;
}());
AccountPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-account',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\account\account.html"*/'<ion-header>\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n<ion-content class="cpage" *ngIf="username">\n\n  <ion-card class="md-card-color cl-30">\n\n      <div class="hd-title">\n\n      <img class="avt" src="assets/img/person.png" alt="avatar">        \n\n        <h1>{{profile.namaPetugas}}</h1>\n\n      </div>\n\n  </ion-card>\n\n  <ion-card class="md-card-color cl-70">\n\n      <ion-list inset>\n\n        <ion-item>\n\n          <ion-icon name=\'person\' item-left></ion-icon>\n\n          Nip Pandu\n\n          <ion-note item-right>\n\n          {{profile.nipPandu}}\n\n          </ion-note>\n\n        </ion-item>\n\n        <ion-item>\n\n          <ion-icon name=\'contact\' item-left></ion-icon>\n\n          Real name\n\n          <ion-note item-right>\n\n          {{profile.namaPetugas}}\n\n          </ion-note>\n\n        </ion-item>\n\n        <ion-item>\n\n          <ion-icon name=\'mail\' item-left></ion-icon>\n\n          Email\n\n          <ion-note item-right>\n\n          {{profile.emailPetugas}}\n\n          </ion-note>\n\n        </ion-item>\n\n        <ion-item>\n\n          <ion-icon name=\'phone-portrait\' item-left></ion-icon>\n\n          Telephone\n\n          <ion-note item-right>\n\n          {{profile.hp}}\n\n          </ion-note>\n\n        </ion-item>\n\n        <ion-item>\n\n          <button class="btnLogout" ion-item (click)="logout()">Logout</button>\n\n        </ion-item>\n\n      </ion-list>\n\n    </ion-card>\n\n  \n\n\n\n\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\account\account.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_4__providers_user_data__["a" /* UserData */],
        __WEBPACK_IMPORTED_MODULE_5__providers_notification__["a" /* Notification */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */]])
], AccountPage);

//# sourceMappingURL=account.js.map

/***/ }),

/***/ 736:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PerencanaanPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__providers_rencana_data__ = __webpack_require__(1166);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};





/*
  Generated class for the Perencanaan page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var PerencanaanPage = (function () {
    function PerencanaanPage(navCtrl, loadingCtrl, pnetwork, rencanaData, events, alertCtrl, toastCtrl, storage) {
        this.navCtrl = navCtrl;
        this.loadingCtrl = loadingCtrl;
        this.pnetwork = pnetwork;
        this.rencanaData = rencanaData;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.storage = storage;
        this.datas = [];
    }
    PerencanaanPage.prototype.ionViewDidLoad = function () {
        console.log('Hello PerencanaanPage Page');
        this.pnetwork.listenNetworkEvents();
        this.firstLoad();
    };
    PerencanaanPage.prototype.firstLoad = function () {
        var _this = this;
        this.rencanaData.load().subscribe(function (data) {
            _this.datas = data;
            console.log(_this.datas);
        }, function (err) {
            console.log("error load data spk");
            _this.events.publish('refresh:state', false);
        }, function () {
            console.log("success load data spk");
            _this.events.publish('refresh:state', true);
        });
    };
    PerencanaanPage.prototype.doRefresh = function (refresher) {
        var _this = this;
        this.firstLoad();
        this.events.subscribe('refresh:state', function (refstate) {
            if (refstate == true)
                refresher.complete();
            else {
                _this.toastCtrl.create({
                    message: 'Error load data..',
                    duration: 3000,
                    position: 'bottom'
                }).present().then(function (ev) {
                    console.log(ev);
                    refresher.complete();
                    return false;
                });
            }
        });
        //refresher.preventDefault();
        //refresher.stopPropagation();
    };
    return PerencanaanPage;
}());
PerencanaanPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-perencanaan',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\perencanaan\perencanaan.html"*/'<!--\n\n  Generated template for the perencanaan page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n    <!--<span [class]="pnetwork.mqtt_state==true ? \'network_state_on\':\'network_state_off\'"></span>-->\n\n    \n\n  </ion-navbar>\n\n  <ion-toolbar color="primary" class="tb">\n\n    <div text-center ><h4>RENCANA HARI INI</h4></div>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n\n\n<ion-content  class="cpage">\n\n  <ion-card *ngFor="let data of datas">\n\n    <ion-card-content no-padding>\n\n      <ion-row>\n\n        <ion-col col-4 [ngClass]="(data.flagDone == 1 ? \'mint-green-box\' : \'green-box\')">\n\n          <img [src]="data.flagDone == 1 ? \'assets/img/unfinished.png\':\'assets/img/on-going.png\'">\n\n        </ion-col>\n\n        <ion-col >\n\n          <ion-row>\n\n            <ion-col><h2>{{ data.namaKapal}}</h2></ion-col>\n\n            <ion-col align="right">\n\n                {{data.tglMulaiPenetapan | idformat}}\n\n            </ion-col>\n\n          </ion-row>\n\n          <ion-row>\n\n            <ion-col col-8>\n\n              <ion-row>\n\n                <ion-col>\n\n                  PPK1<br>\n\n                  ASAL<br>\n\n                  TUJUAN<br>\n\n                  AGEN\n\n                </ion-col>\n\n                <ion-col>\n\n                  {{data.noPpk1}}<br>\n\n                  {{data.namaLokasiAsal}}<br>\n\n                  {{data.namaLokasiTujuan}}<br>\n\n                  {{data.namaAgen}}\n\n                </ion-col>\n\n              </ion-row>\n\n            </ion-col>\n\n            <ion-col col-4>\n\n              <ion-row>\n\n                <ion-col align="right"><b>Informasi Pandu</b></ion-col>\n\n              </ion-row>\n\n              <ion-row>\n\n                <ion-col align="right">{{data.namaPandu}}</ion-col>\n\n              </ion-row>\n\n            </ion-col>\n\n          </ion-row>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-card-content>\n\n  </ion-card>\n\n  \n\n\n\n\n\n  <ion-refresher (ionRefresh)="doRefresh($event)">\n\n    <ion-refresher-content\n\n      pullingIcon="arrow-dropdown"\n\n      pullingText="Pull to refresh"\n\n      refreshingSpinner="circles"\n\n      refreshingText="Refreshing...">\n\n    </ion-refresher-content>\n\n  </ion-refresher>\n\n</ion-content>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\perencanaan\perencanaan.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_4__providers_rencana_data__["a" /* RencanaData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_3__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_4__providers_rencana_data__["a" /* RencanaData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */]])
], PerencanaanPage);

//# sourceMappingURL=perencanaan.js.map

/***/ }),

/***/ 737:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return HistoryPelayananPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__detail_history_pelayanan_detail_history_pelayanan__ = __webpack_require__(738);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__providers_pnetwork__ = __webpack_require__(51);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/*
  Generated class for the HistoryPelayanan page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var HistoryPelayananPage = (function () {
    function HistoryPelayananPage(navCtrl, loadingCtrl, pnetwork, storage, events, alertCtrl, toastCtrl, spkData) {
        this.navCtrl = navCtrl;
        this.loadingCtrl = loadingCtrl;
        this.pnetwork = pnetwork;
        this.storage = storage;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.toastCtrl = toastCtrl;
        this.spkData = spkData;
        this.datas = [];
        this.loader = this.loadingCtrl.create({
            content: "Please wait...",
            duration: 5000
        });
        var now = __WEBPACK_IMPORTED_MODULE_3_moment__().format('YYYY-MM-DD');
        this.tglAwal = now;
        this.tglAkhir = now;
    }
    HistoryPelayananPage.prototype.openDetail = function () {
        this.loadData(this.tglAwal, this.tglAkhir);
    };
    HistoryPelayananPage.prototype.loadData = function (tglMulai, tglSelesai) {
        var _this = this;
        this.loader.present();
        this.spkData.loadHistoryRealisasi(tglMulai, tglSelesai).subscribe(function (data) {
            _this.datas = data;
            console.log(_this.datas);
            _this.loader.dismiss();
            _this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_4__detail_history_pelayanan_detail_history_pelayanan__["a" /* DetailHistoryPelayananPage */], { datas: _this.datas });
        }, function (err) {
            console.log("error load data spk");
            _this.loader.dismiss();
            _this.events.publish('refresh:state', false);
        }, function () {
            console.log("success load data spk");
            _this.events.publish('refresh:state', true);
        });
    };
    return HistoryPelayananPage;
}());
HistoryPelayananPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-history-pelayanan',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\history-pelayanan\history-pelayanan.html"*/'<!--\n\n  Generated template for the HistoryPelayanan page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n  <ion-navbar>\n\n    <button ion-button icon-only menuToggle>\n\n      <ion-icon name="menu"></ion-icon>\n\n    </button>\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n  </ion-navbar>\n\n</ion-header>\n\n\n\n\n\n<ion-content class="cpage">\n\n  <ion-card class="md-card-color cl-30">\n\n    <div class="hd-title">\n\n      <h1>History Pelayanan</h1>\n\n    </div>\n\n  </ion-card>\n\n  <ion-card class="md-card-color cl-70">\n\n    <ion-fab  right edge> \n\n      <button ion-fab color="oranye" (click)="openDetail()">GO</button>\n\n    </ion-fab>\n\n    <ion-card-content padding>\n\n      <div>\n\n        <h2> Pilih Tanggal Mulai dan Akhir</h2>\n\n      </div>\n\n      <div>\n\n        <ion-list inset>\n\n          <ion-item>\n\n            <ion-label stacked>Tanggal Mulai</ion-label>\n\n            <ion-icon name="calendar" item-right></ion-icon>\n\n            <ion-datetime \n\n              mode = "ios"\n\n              displayFormat="YYYY-MM-DD" \n\n              pickerFormat="D MMMM YYYY" [(ngModel)]="tglAwal">\n\n            </ion-datetime>\n\n          </ion-item>\n\n\n\n          <ion-item>\n\n            <ion-label stacked>Tanggal Akhir</ion-label>\n\n            <ion-icon name="calendar" item-right></ion-icon>\n\n            <ion-datetime \n\n               mode = "ios"\n\n              displayFormat="YYYY-MM-DD" \n\n              pickerFormat="D MMMM YYYY" [(ngModel)]="tglAkhir"></ion-datetime>\n\n          </ion-item>\n\n        </ion-list>\n\n      </div>\n\n    </ion-card-content>\n\n  </ion-card>\n\n  \n\n\n\n\n\n</ion-content>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\history-pelayanan\history-pelayanan.html"*/,
        providers: [__WEBPACK_IMPORTED_MODULE_5__providers_spk_data__["a" /* SpkData */]]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["i" /* LoadingController */],
        __WEBPACK_IMPORTED_MODULE_6__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["p" /* ToastController */],
        __WEBPACK_IMPORTED_MODULE_5__providers_spk_data__["a" /* SpkData */]])
], HistoryPelayananPage);

//# sourceMappingURL=history-pelayanan.js.map

/***/ }),

/***/ 738:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return DetailHistoryPelayananPage; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__history_realisasi_history_realisasi__ = __webpack_require__(250);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};



/*
  Generated class for the DetailHistoryPelayanan page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
*/
var DetailHistoryPelayananPage = (function () {
    function DetailHistoryPelayananPage(navCtrl, params) {
        this.navCtrl = navCtrl;
        this.params = params;
        this.datas = [];
    }
    DetailHistoryPelayananPage.prototype.ionViewDidLoad = function () {
        console.log('Hello DetailHistoryPelayananPage Page');
        this.datas = this.params.get('datas');
    };
    DetailHistoryPelayananPage.prototype.openHistoryDetail = function (noSpk) {
        this.navCtrl.push(__WEBPACK_IMPORTED_MODULE_2__history_realisasi_history_realisasi__["a" /* HistoryRealisasiPage */], { noSpk: noSpk, detail: true });
    };
    return DetailHistoryPelayananPage;
}());
DetailHistoryPelayananPage = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({
        selector: 'page-detail-history-pelayanan',template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\detail-history-pelayanan\detail-history-pelayanan.html"*/'<!--\n\n  Generated template for the DetailHistoryPelayanan page.\n\n\n\n  See http://ionicframework.com/docs/v2/components/#navigation for more info on\n\n  Ionic pages and navigation.\n\n-->\n\n<ion-header>\n\n\n\n  <ion-navbar>\n\n    <ion-title>\n\n        <img src="assets/img/pandulogo.png">\n\n    </ion-title>\n\n  </ion-navbar>\n\n\n\n  <ion-toolbar color="primary" class="tb">\n\n    <div text-center ><h4>HISTORY PELAYANAN</h4></div>\n\n  </ion-toolbar>\n\n</ion-header>\n\n\n\n\n\n<ion-content class="cpage">\n\n  <ion-card *ngFor="let data of datas" (click)="openHistoryDetail(data.nomorSpkPandu)">\n\n    <ion-card-content no-padding >\n\n      <ion-row>\n\n        <ion-col col-4 width-25 [ngClass]="(data.flagDone == 1 ? \'mint-green-box\' : \'green-box\')">\n\n          <img [src]="data.flagDone == 1 ? \'assets/img/unfinished.png\':\'assets/img/finished.png\'">\n\n        </ion-col>\n\n        <ion-col width-75>\n\n          <ion-row>\n\n            <ion-col>\n\n              <h2>{{ data.namaKapal}}</h2>\n\n              <small>{{data.namaAgen}}</small>\n\n            </ion-col>\n\n            <ion-col align="right">{{ data.created | idformat }}</ion-col>\n\n          </ion-row>\n\n          <ion-row>\n\n            <ion-col col-4>\n\n              PPK1<br>\n\n              ASAL<br>\n\n              TUJUAN\n\n            </ion-col>\n\n            <ion-col col-8>\n\n              {{data.noPpk1}}<br>\n\n              {{data.asal}}<br>\n\n              {{data.tujuan}}\n\n            </ion-col>\n\n          </ion-row>\n\n        </ion-col>\n\n      </ion-row>\n\n    </ion-card-content>\n\n  </ion-card>\n\n</ion-content>\n\n'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\pages\detail-history-pelayanan\detail-history-pelayanan.html"*/
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["m" /* NavController */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["n" /* NavParams */]])
], DetailHistoryPelayananPage);

//# sourceMappingURL=detail-history-pelayanan.js.map

/***/ }),

/***/ 739:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__ = __webpack_require__(740);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__app_module__ = __webpack_require__(744);


Object(__WEBPACK_IMPORTED_MODULE_0__angular_platform_browser_dynamic__["a" /* platformBrowserDynamic */])().bootstrapModule(__WEBPACK_IMPORTED_MODULE_1__app_module__["a" /* AppModule */]);
//# sourceMappingURL=main.js.map

/***/ }),

/***/ 744:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export SanitizeHtml */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return AppModule; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__ = __webpack_require__(55);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__app_component__ = __webpack_require__(780);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_angular2_signaturepad__ = __webpack_require__(1167);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_angular2_signaturepad___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_angular2_signaturepad__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_native_background_geolocation__ = __webpack_require__(678);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_native_local_notifications__ = __webpack_require__(146);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__ionic_cloud_angular__ = __webpack_require__(351);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__ionic_native_badge__ = __webpack_require__(100);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__ionic_native_vibration__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__ionic_native_network__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__ionic_native_background_mode__ = __webpack_require__(350);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__ionic_native_geolocation__ = __webpack_require__(677);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__ionic_native_status_bar__ = __webpack_require__(346);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__ionic_native_splash_screen__ = __webpack_require__(349);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__ionic_native_sqlite__ = __webpack_require__(123);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__ionic_native_sqlite_porter__ = __webpack_require__(696);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__ionic_native_device__ = __webpack_require__(122);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__ionic_native_date_picker__ = __webpack_require__(727);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__ionic_native_dialogs__ = __webpack_require__(241);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__pages_account_account__ = __webpack_require__(735);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__pages_login_login__ = __webpack_require__(251);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__pages_absensi_absensi__ = __webpack_require__(697);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_25__pages_realisasi_pandu_realisasi_pandu__ = __webpack_require__(163);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_26__pages_detail_spk_detail_spk__ = __webpack_require__(728);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_27__pages_pemanduan_pemanduan__ = __webpack_require__(729);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_28__pages_settings_settings__ = __webpack_require__(1169);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_29__pages_mapview_mapview__ = __webpack_require__(676);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_30__pages_perencanaan_perencanaan__ = __webpack_require__(736);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_31__pages_history_pelayanan_history_pelayanan__ = __webpack_require__(737);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_32__pages_detail_history_pelayanan_detail_history_pelayanan__ = __webpack_require__(738);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_33__pages_history_realisasi_history_realisasi__ = __webpack_require__(250);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_34__pages_tabs_tabs__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_35__providers_location_tracker__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_36__providers_notification__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_37__providers_user_data__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_38__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_39__providers_geojson__ = __webpack_require__(242);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_40__services_config_config_service__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_41__services_mqtt_mqtt_service__ = __webpack_require__(236);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_42__pipes_idformat__ = __webpack_require__(1170);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_43__components_components_module__ = __webpack_require__(1171);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_44__components_remark_remark_module__ = __webpack_require__(1175);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_45__config_app_config__ = __webpack_require__(49);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_46__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_47_ngx_mask__ = __webpack_require__(1176);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_48__providers_spk_offline_spk_offline__ = __webpack_require__(734);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







/**
 * Ionic native declaration
 */
















/**
 * Pages declaration
 */













/**
 * Providers declaration
 */




//import { Config } from '../providers/config';

/**
 * Service declaration
 */


/**
 * Pipes declaration
 */







var cloudSettings = {
    'core': {
        'app_id': '8d8175b5'
    },
    'push': {
        'pluginConfig': {
            'ios': {
                'badge': true,
                'sound': true
            }
        }
    }
};
var SanitizeHtml = (function () {
    function SanitizeHtml(_sanitizer) {
        this._sanitizer = _sanitizer;
    }
    SanitizeHtml.prototype.transform = function (v) {
        return this._sanitizer.bypassSecurityTrustHtml(v);
    };
    return SanitizeHtml;
}());
SanitizeHtml = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Pipe"])({
        name: 'sanitizeHtml'
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["c" /* DomSanitizer */]])
], SanitizeHtml);

var AppModule = (function () {
    function AppModule() {
    }
    return AppModule;
}());
AppModule = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["NgModule"])({
        declarations: [
            __WEBPACK_IMPORTED_MODULE_4__app_component__["a" /* PanduApp */],
            __WEBPACK_IMPORTED_MODULE_22__pages_account_account__["a" /* AccountPage */],
            __WEBPACK_IMPORTED_MODULE_23__pages_login_login__["a" /* LoginPage */],
            __WEBPACK_IMPORTED_MODULE_24__pages_absensi_absensi__["a" /* AbsensiPage */],
            __WEBPACK_IMPORTED_MODULE_25__pages_realisasi_pandu_realisasi_pandu__["a" /* RealisasiPanduPage */],
            __WEBPACK_IMPORTED_MODULE_26__pages_detail_spk_detail_spk__["a" /* DetailSpkPage */],
            __WEBPACK_IMPORTED_MODULE_27__pages_pemanduan_pemanduan__["a" /* PemanduanPage */],
            __WEBPACK_IMPORTED_MODULE_28__pages_settings_settings__["a" /* SettingsPage */],
            __WEBPACK_IMPORTED_MODULE_29__pages_mapview_mapview__["a" /* LeafletView */],
            __WEBPACK_IMPORTED_MODULE_30__pages_perencanaan_perencanaan__["a" /* PerencanaanPage */],
            __WEBPACK_IMPORTED_MODULE_34__pages_tabs_tabs__["a" /* TabsPage */],
            __WEBPACK_IMPORTED_MODULE_31__pages_history_pelayanan_history_pelayanan__["a" /* HistoryPelayananPage */],
            __WEBPACK_IMPORTED_MODULE_32__pages_detail_history_pelayanan_detail_history_pelayanan__["a" /* DetailHistoryPelayananPage */],
            __WEBPACK_IMPORTED_MODULE_33__pages_history_realisasi_history_realisasi__["a" /* HistoryRealisasiPage */],
            __WEBPACK_IMPORTED_MODULE_42__pipes_idformat__["a" /* Idformat */],
            SanitizeHtml
        ],
        imports: [
            __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["g" /* IonicModule */].forRoot(__WEBPACK_IMPORTED_MODULE_4__app_component__["a" /* PanduApp */], {
                mode: 'md',
                tabsPlacement: "top",
                tabsHighlight: "true",
                tabsLayout: "icon-hide",
                color: "primary"
            }, {
                links: [
                    { loadChildren: '../pages/signature/signature.module#SignatureModule', name: 'Signature', segment: 'signature', priority: 'low', defaultHistory: [] }
                ]
            }),
            __WEBPACK_IMPORTED_MODULE_2__angular_platform_browser__["a" /* BrowserModule */],
            __WEBPACK_IMPORTED_MODULE_3__angular_http__["c" /* HttpModule */],
            __WEBPACK_IMPORTED_MODULE_5_angular2_signaturepad__["SignaturePadModule"],
            __WEBPACK_IMPORTED_MODULE_6__ionic_storage__["a" /* IonicStorageModule */].forRoot({
                name: '__vasaPanduDb',
                driverOrder: ['websql', 'sqlite']
            }),
            __WEBPACK_IMPORTED_MODULE_9__ionic_cloud_angular__["a" /* CloudModule */].forRoot(cloudSettings),
            __WEBPACK_IMPORTED_MODULE_47_ngx_mask__["a" /* NgxMaskModule */],
            __WEBPACK_IMPORTED_MODULE_43__components_components_module__["a" /* ComponentsModule */],
            __WEBPACK_IMPORTED_MODULE_44__components_remark_remark_module__["a" /* RemarkComponentModule */]
        ],
        bootstrap: [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["e" /* IonicApp */]],
        entryComponents: [
            __WEBPACK_IMPORTED_MODULE_4__app_component__["a" /* PanduApp */],
            __WEBPACK_IMPORTED_MODULE_22__pages_account_account__["a" /* AccountPage */],
            __WEBPACK_IMPORTED_MODULE_23__pages_login_login__["a" /* LoginPage */],
            __WEBPACK_IMPORTED_MODULE_24__pages_absensi_absensi__["a" /* AbsensiPage */],
            __WEBPACK_IMPORTED_MODULE_25__pages_realisasi_pandu_realisasi_pandu__["a" /* RealisasiPanduPage */],
            __WEBPACK_IMPORTED_MODULE_26__pages_detail_spk_detail_spk__["a" /* DetailSpkPage */],
            __WEBPACK_IMPORTED_MODULE_27__pages_pemanduan_pemanduan__["a" /* PemanduanPage */],
            __WEBPACK_IMPORTED_MODULE_28__pages_settings_settings__["a" /* SettingsPage */],
            __WEBPACK_IMPORTED_MODULE_29__pages_mapview_mapview__["a" /* LeafletView */],
            __WEBPACK_IMPORTED_MODULE_30__pages_perencanaan_perencanaan__["a" /* PerencanaanPage */],
            __WEBPACK_IMPORTED_MODULE_34__pages_tabs_tabs__["a" /* TabsPage */],
            __WEBPACK_IMPORTED_MODULE_31__pages_history_pelayanan_history_pelayanan__["a" /* HistoryPelayananPage */],
            __WEBPACK_IMPORTED_MODULE_32__pages_detail_history_pelayanan_detail_history_pelayanan__["a" /* DetailHistoryPelayananPage */],
            __WEBPACK_IMPORTED_MODULE_33__pages_history_realisasi_history_realisasi__["a" /* HistoryRealisasiPage */]
        ],
        providers: [
            __WEBPACK_IMPORTED_MODULE_37__providers_user_data__["a" /* UserData */],
            __WEBPACK_IMPORTED_MODULE_35__providers_location_tracker__["a" /* LocationTracker */],
            __WEBPACK_IMPORTED_MODULE_36__providers_notification__["a" /* Notification */],
            // Storage,
            __WEBPACK_IMPORTED_MODULE_38__providers_pnetwork__["a" /* Pnetwork */],
            //Config,
            __WEBPACK_IMPORTED_MODULE_39__providers_geojson__["a" /* Geojson */],
            __WEBPACK_IMPORTED_MODULE_8__ionic_native_local_notifications__["a" /* LocalNotifications */],
            __WEBPACK_IMPORTED_MODULE_7__ionic_native_background_geolocation__["a" /* BackgroundGeolocation */],
            __WEBPACK_IMPORTED_MODULE_10__ionic_native_badge__["a" /* Badge */],
            __WEBPACK_IMPORTED_MODULE_11__ionic_native_vibration__["a" /* Vibration */],
            __WEBPACK_IMPORTED_MODULE_12__ionic_native_network__["a" /* Network */],
            __WEBPACK_IMPORTED_MODULE_13__ionic_native_background_mode__["a" /* BackgroundMode */],
            __WEBPACK_IMPORTED_MODULE_14__ionic_native_geolocation__["a" /* Geolocation */],
            __WEBPACK_IMPORTED_MODULE_15__ionic_native_status_bar__["a" /* StatusBar */],
            __WEBPACK_IMPORTED_MODULE_16__ionic_native_splash_screen__["a" /* SplashScreen */],
            __WEBPACK_IMPORTED_MODULE_41__services_mqtt_mqtt_service__["a" /* MQTTService */],
            __WEBPACK_IMPORTED_MODULE_40__services_config_config_service__["a" /* ConfigService */],
            __WEBPACK_IMPORTED_MODULE_45__config_app_config__["a" /* AppConfig */],
            { provide: __WEBPACK_IMPORTED_MODULE_0__angular_core__["ErrorHandler"], useClass: __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["f" /* IonicErrorHandler */] },
            __WEBPACK_IMPORTED_MODULE_46__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
            __WEBPACK_IMPORTED_MODULE_17__ionic_native_sqlite__["a" /* SQLite */],
            __WEBPACK_IMPORTED_MODULE_18__ionic_native_sqlite_porter__["a" /* SQLitePorter */],
            __WEBPACK_IMPORTED_MODULE_19__ionic_native_device__["a" /* Device */],
            __WEBPACK_IMPORTED_MODULE_48__providers_spk_offline_spk_offline__["a" /* SpkOfflineProvider */],
            __WEBPACK_IMPORTED_MODULE_20__ionic_native_date_picker__["a" /* DatePicker */],
            __WEBPACK_IMPORTED_MODULE_21__ionic_native_dialogs__["a" /* Dialogs */]
        ]
    })
], AppModule);

//# sourceMappingURL=app.module.js.map

/***/ }),

/***/ 77:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Notification; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_local_notifications__ = __webpack_require__(146);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_vibration__ = __webpack_require__(235);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_badge__ = __webpack_require__(100);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_network__ = __webpack_require__(116);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__user_data__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__services_mqtt__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__services_config_config_service__ = __webpack_require__(121);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};












var Notification = (function () {
    function Notification(http, events, alertCtrl, userData, platform, storage, appCtrl, localNotification, badge, vibration, network, _mqService, _configService) {
        var _this = this;
        this.http = http;
        this.events = events;
        this.alertCtrl = alertCtrl;
        this.userData = userData;
        this.platform = platform;
        this.storage = storage;
        this.appCtrl = appCtrl;
        this.localNotification = localNotification;
        this.badge = badge;
        this.vibration = vibration;
        this.network = network;
        this._mqService = _mqService;
        this._configService = _configService;
        this.v_badge = 0;
        this.mqtt_connect = false;
        this.si = null;
        // Array of historic message (bodies)
        this.mq = [];
        // A count of messages received
        this.count = 0;
        /** Callback on_connect to queue */
        this.on_connect = function () {
            // Store local reference to Observable
            // for use with template ( | async )
            // this.messages = this._mqService.messages;
            // Subscribe a function to be run on_next message
            _this.messages.subscribe(_this.on_next);
            console.log('Connected to broker with user.', _this.username);
            _this._mqService.clientSubscribe("/notif/pandu/spk/" + _this.username + "");
            _this._mqService.clientSubscribe("/notif/pandu/ohn/" + _this.username + "");
            console.log("/notif/pandu/spk/" + _this.username + "");
            console.log("/notif/pandu/ohn/" + _this.username + "");
            _this.sendMessage('App running ', "/notif/first/" + _this.username);
            _this.events.publish('mqtt:state', true);
            _this.storage.set('mqtt_status', true);
            _this.mqtt_connect = true;
        };
        /** Consume a message from the _mqService */
        this.on_next = function (message) {
            // Store message in "historic messages" queue
            _this.mq.push(message.toString() + '\n');
            // Count it
            _this.count++;
        };
        this.on_error = function () {
            console.error('Ooops, error in RawDataComponent');
        };
        console.log('Hello Notification Provider');
    }
    Notification.prototype.init = function (username) {
        var _this = this;
        var self = this;
        self.username = username;
        console.log("Init Notif", self.username);
        this._configService.getConfig('assets/api/config.json').then(function (config) {
            // ... then pass it to (and connect) the message queue:
            _this._mqService.configure(config);
            _this._mqService.try_connect()
                .then(_this.on_connect)
                .catch(_this.on_error);
            _this.allconfig = config;
        });
    };
    Notification.prototype.sendMessage = function (vmessage, topic) {
        console.debug("send mesage", vmessage, 'topic', topic);
        this._mqService.publishTopic(vmessage, topic);
    };
    return Notification;
}());
Notification = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_7__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_9__user_data__["a" /* UserData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["b" /* App */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_native_local_notifications__["a" /* LocalNotifications */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_badge__["a" /* Badge */],
        __WEBPACK_IMPORTED_MODULE_3__ionic_native_vibration__["a" /* Vibration */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_network__["a" /* Network */],
        __WEBPACK_IMPORTED_MODULE_10__services_mqtt__["a" /* MQTTService */],
        __WEBPACK_IMPORTED_MODULE_11__services_config_config_service__["a" /* ConfigService */]])
], Notification);

;
//# sourceMappingURL=notification.js.map

/***/ }),

/***/ 780:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return PanduApp; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__ = __webpack_require__(346);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__ = __webpack_require__(349);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ionic_native_background_mode__ = __webpack_require__(350);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__ionic_native_local_notifications__ = __webpack_require__(146);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__ionic_native_badge__ = __webpack_require__(100);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__ionic_cloud_angular__ = __webpack_require__(351);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment__ = __webpack_require__(3);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_moment___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_moment__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__ = __webpack_require__(234);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__pages_account_account__ = __webpack_require__(735);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__pages_login_login__ = __webpack_require__(251);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__pages_realisasi_pandu_realisasi_pandu__ = __webpack_require__(163);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__pages_perencanaan_perencanaan__ = __webpack_require__(736);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__pages_history_pelayanan_history_pelayanan__ = __webpack_require__(737);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__providers_notification__ = __webpack_require__(77);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__providers_user_data__ = __webpack_require__(87);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__providers_pnetwork__ = __webpack_require__(51);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__providers_location_tracker__ = __webpack_require__(115);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__providers_spk_data__ = __webpack_require__(48);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_21__providers_sqlite_service_sqlite_service__ = __webpack_require__(50);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_22__services_config_config_service__ = __webpack_require__(121);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_23__services_mqtt_mqtt_service__ = __webpack_require__(236);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_24__config_app_config__ = __webpack_require__(49);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};




//import { Push, PushObject, PushOptions} from '@ionic-native/push';
















//import { Config } from '../providers/config';





var PanduApp = (function () {
    function PanduApp(events, platform, menu, notification, userData, alertCtrl, storage, pnetwork, locationTracker, deploy, localNotification, splashScreen, statusBar, badge, backgroundMode, _configService, appConfig, _spk, _sql) {
        var _this = this;
        this.events = events;
        this.platform = platform;
        this.menu = menu;
        this.notification = notification;
        this.userData = userData;
        this.alertCtrl = alertCtrl;
        this.storage = storage;
        this.pnetwork = pnetwork;
        this.locationTracker = locationTracker;
        this.deploy = deploy;
        this.localNotification = localNotification;
        this.splashScreen = splashScreen;
        this.statusBar = statusBar;
        this.badge = badge;
        this.backgroundMode = backgroundMode;
        this._configService = _configService;
        this.appConfig = appConfig;
        this._spk = _spk;
        this._sql = _sql;
        this.notif = false;
        this.config = {};
        this.appPages = [
            { title: 'Absensi', component: __WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__["a" /* TabsPage */], index: 0, icon: 'card' },
            { title: 'SPK Hari Ini', component: __WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__["a" /* TabsPage */], index: 1, icon: 'call' },
            { title: 'Rencana Hari Ini', component: __WEBPACK_IMPORTED_MODULE_14__pages_perencanaan_perencanaan__["a" /* PerencanaanPage */], icon: 'paper' },
            { title: 'History Pelayanan', component: __WEBPACK_IMPORTED_MODULE_15__pages_history_pelayanan_history_pelayanan__["a" /* HistoryPelayananPage */], icon: 'calendar' },
            { title: 'Map', component: __WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__["a" /* TabsPage */], index: 2, icon: 'globe' }
        ];
        this.loggedInPages = [
            { title: 'Account', component: __WEBPACK_IMPORTED_MODULE_11__pages_account_account__["a" /* AccountPage */], icon: 'person' }
        ];
        this.loggedOutPages = [
            { title: 'Login', component: __WEBPACK_IMPORTED_MODULE_12__pages_login_login__["a" /* LoginPage */], icon: 'log-in' }
        ];
        this.initializeApp();
        this.events.subscribe('notif:state', function (notif) {
            _this.notif = notif[0];
            //console.log("run events notif", notif);
        });
        // decide which menu items should be hidden by current login status stored in local storage
        this.userData.hasLoggedIn().then(function (hasLoggedIn) {
            _this.enableMenu(hasLoggedIn === true);
            if (hasLoggedIn != true) {
                _this.rootPage = __WEBPACK_IMPORTED_MODULE_12__pages_login_login__["a" /* LoginPage */];
            }
            else {
                _this.rootPage = __WEBPACK_IMPORTED_MODULE_10__pages_tabs_tabs__["a" /* TabsPage */];
                _this.userData.getUsername().then(function (username) {
                    console.log("Get Username", username);
                    if (username != null)
                        _this.notification.init(username);
                });
            }
        });
        this.listenToLoginEvents();
    }
    PanduApp.prototype.initializeApp = function () {
        var _this = this;
        this.platform.ready().then(function () {
            console.log("device ready..");
            /**
             * load global app config
             */
            _this.baseUrl = _this.appConfig.apiBaseUrl;
            _this.amsUrl = _this.appConfig.apiBaseUrl;
            /**
             * handling by device
             */
            if (_this.platform.is('android') || _this.platform.is('ios')) {
                //for dark text
                //StatusBar.styleDefault();
                //for light text
                _this.statusBar.styleLightContent();
                _this.statusBar.overlaysWebView(false);
                _this.statusBar.backgroundColorByHexString('#232838');
                _this.localNotification.hasPermission().then(function (granted) {
                    console.log("Local Notification granted", granted);
                    // if(granted == false){
                    //   this.localNotification.registerPermission().then((v)=>{
                    //     console.log("Local notification register permission", v)
                    //   })
                    // }
                }).catch(function (e) {
                    console.log('error', e);
                });
                _this.localNotification.on('click', function (notif) {
                    console.log("from notification local", notif);
                    _this.nav.push(__WEBPACK_IMPORTED_MODULE_13__pages_realisasi_pandu_realisasi_pandu__["a" /* RealisasiPanduPage */]);
                    _this.localNotification.clearAll();
                    _this.badge.clear();
                    _this.notification.badgeTot = "";
                });
                /**
                 * [Background Mode description]
                 * @param  {"Pelindo         3 Pandu"}      {title [description]
                 * @param  {"Disconnected.." }} text [description]
                 * @return {[type]}                [description]
                 */
                _this.backgroundMode.setDefaults({
                    title: "Vasa Pandu",
                    text: "Disconnected.."
                });
                _this.backgroundMode.enable();
            } //end of check platform
            /**
             * [registerBackButtonAction description]
             * @param  {[type]} ( [description]
             * @return {[type]}   [description]
             */
            _this.platform.registerBackButtonAction(function () {
                _this.registerBackButtonListener();
            });
            setTimeout(function () {
                _this.locationTracker.startTracking();
                setInterval(function () {
                    _this.locationTracker.sendLocPandu(0);
                }, 1 * 60 * 1000);
            }, 5000);
            //cek current working and send notif
            _this.notifWorking();
            /**
             * handling splashscreen
             * hide when device ready
             */
            _this.splashScreen.hide();
        }); //end of platform ready
        this._configService.getConfig('assets/api/config.json').then(function (config) {
            _this.config = config;
            console.log("loading init config ", _this.config);
        });
        //store data spk to offline storage
        setTimeout(function () {
            console.log("ex store spk");
            _this.storeSpk();
        }, 2000);
        this.events.subscribe('network:state', function (state) {
            if (state) {
                _this.storeSpk();
                _this.runPendingState();
            }
            else
                console.log("no connection to server");
        });
    }; //end of initializeApp
    /**
     * [registerBackButtonListener description]
     * @return {[type]} [description]
     */
    PanduApp.prototype.registerBackButtonListener = function () {
        if (this.nav.canGoBack()) {
            this.nav.setRoot(this.rootPage);
        }
        else {
            this.confirmExitApp(this.nav);
        }
    };
    /**
     * [confirmExitApp description]
     * @param  {[type]} nav [description]
     * @return {[type]}     [description]
     */
    PanduApp.prototype.confirmExitApp = function (nav) {
        var confirm = this.alertCtrl.create({
            title: 'Confirm Exit',
            message: 'Really exit app?',
            buttons: [
                {
                    text: 'Cancel',
                    handler: function () {
                        console.log('Disagree clicked');
                    }
                },
                {
                    text: 'Exit',
                    handler: function () {
                        //nav.exitApp();
                    }
                }
            ]
        });
        nav.present(confirm);
    };
    /**
     * [openPage description]
     * @param  {[type]} page [description]
     * @return {[type]}      [description]
     */
    PanduApp.prototype.openPage = function (page) {
        if (page.index) {
            this.nav.setRoot(page.component, { tabIndex: page.index });
        }
        else {
            this.nav.setRoot(page.component).catch(function () {
                console.log("Didn't set nav root");
            });
        }
    };
    PanduApp.prototype.listenToLoginEvents = function () {
        var _this = this;
        this.events.subscribe('user:login', function (username) {
            _this.enableMenu(true);
            _this.notification.init(username);
        });
        this.events.subscribe('user:signup', function () {
            _this.enableMenu(true);
        });
        this.events.subscribe('user:logout', function () {
            _this.nav.setRoot(__WEBPACK_IMPORTED_MODULE_12__pages_login_login__["a" /* LoginPage */]);
            _this.menu.swipeEnable(false);
        });
    };
    PanduApp.prototype.enableMenu = function (loggedIn) {
        this.menu.enable(loggedIn, 'loggedInMenu');
        this.menu.enable(!loggedIn, 'loggedOutMenu');
    };
    PanduApp.prototype.notifWorking = function () {
        var _this = this;
        this.storage.get('panduid').then(function (data) {
            if (data) {
                _this.storage.get('notifWorking').then(function (v) {
                    if (v == 'false') {
                        _this.storage.set('notifWorking', 'true');
                        _this.alertCtrl.create({
                            title: 'Notifikasi',
                            message: "Anda memiliki pekerjaan yang belum diselesaikan<br>\n                          Mohon Selesaikan Pemanduan Anda..!",
                            buttons: [{
                                    text: 'ok',
                                    handler: function () {
                                        _this.storage.set('notifWorking', 'false');
                                    }
                                }],
                            cssClass: "alertDanger",
                            enableBackdropDismiss: false
                        }).present();
                        if (_this.platform.is('ios') || _this.platform.is('android')) {
                            _this.localNotification.schedule({
                                title: "Pemberitahuan Pemanduan",
                                text: "Anda Memiliki Pekerjaan yang Belum Diselesaikan",
                                sound: 'file://assets/sound/wind.mp3',
                                data: { secret: 'key' }
                            });
                        }
                    }
                });
            }
        });
        console.log("cek notif working");
        setTimeout(function () {
            _this.notifWorking();
            _this.storeSpk();
        }, 10 * 60 * 1000);
    };
    PanduApp.prototype.storeSpk = function () {
        var _this = this;
        console.log("APPCOMPONENT:storeSPK");
        var tglMulai = __WEBPACK_IMPORTED_MODULE_9_moment__().subtract(4, 'day').format('YYYY-MM-DD');
        var tglSelesai = __WEBPACK_IMPORTED_MODULE_9_moment__().add(1, 'day').format('YYYY-MM-DD');
        this._spk.loadRealisasi(tglMulai, tglSelesai).then(function (data) {
            /**
             * save spk to db
             */
            _this._sql.saveSpkToSqlite(data).then(function (cb) {
                console.log("call back", cb);
            });
            /**
             * save detail spk to db
             */
            data.forEach(function (element) {
                // console.log("id element",element.id);
                _this._spk.loadDetails(element.id).then(function (datas) {
                    _this._sql.saveDetailSpkToSqlite(JSON.stringify(datas), element.id);
                });
            });
            if (data)
                _this.events.publish('refresh:data', true);
        }, function (err) {
            console.log("error load data spk", err);
        }).catch(function (errRejected) {
            console.log("catch rejected", errRejected);
        });
    };
    PanduApp.prototype.runPendingState = function () {
        var _this = this;
        this._sql.getRealisasiPending().then(function (data) {
            var _loop_1 = function (i) {
                console.log("DEBUG: Run data pending from component");
                var flow = JSON.parse(data[i].vjson);
                _this._spk.realisasiPandu(flow.jenisDermaga, JSON.parse(data[i].vjson));
                _this._spk.postProgressBulk(JSON.parse(data[i].progress));
                _this._spk.putProgressDone(data[i].spk_id).subscribe(function (resp) {
                    console.log("Progress done", resp);
                    if (resp.status == 200) {
                        _this._sql.updateRealisasiLog(data[i].spk_id);
                        _this.events.publish('refresh:data', true);
                    }
                });
            };
            for (var i in data) {
                _loop_1(i);
            }
        });
    };
    return PanduApp;
}());
__decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["ViewChild"])(__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Nav */]),
    __metadata("design:type", __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["l" /* Nav */])
], PanduApp.prototype, "nav", void 0);
PanduApp = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Component"])({template:/*ion-inline-start:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\app\app.html"*/'<!-- logged out menu -->\n\n<ion-menu id="loggedOutMenu" [content]="content">\n\n\n\n  <ion-header>\n\n    <ion-toolbar>\n\n      <ion-title>Menu</ion-title>\n\n    </ion-toolbar>\n\n  </ion-header>\n\n\n\n  <ion-content id="sidebar-app" class="outer-content sidebar-app">\n\n\n\n    <!--<ion-card class="card-side" color="primary">\n\n      <div class="card-title"><p>Tantowi Jauhari</p></div>\n\n      <div class="card-subtitle"></div>\n\n    </ion-card>-->\n\n\n\n    <ion-list>\n\n      <ion-list-header class="tp">\n\n        Navigate\n\n      </ion-list-header>\n\n      <button ion-item menuClose *ngFor="let p of appPages" (click)="openPage(p)">\n\n        <ion-icon item-left [name]="p.icon"></ion-icon>\n\n        {{p.title}}\n\n      </button>\n\n    </ion-list>\n\n\n\n    <ion-list>\n\n      <ion-list-header class="tp">\n\n        Account\n\n      </ion-list-header>\n\n      <button class="tp" ion-item menuClose *ngFor="let p of loggedOutPages" (click)="openPage(p)">\n\n        <ion-icon item-left [name]="p.icon"></ion-icon>\n\n        {{p.title}}\n\n      </button>\n\n    </ion-list>\n\n\n\n  </ion-content>\n\n\n\n</ion-menu>\n\n\n\n<!-- logged in menu -->\n\n<ion-menu id="loggedInMenu" [content]="content">\n\n\n\n  <!--<mq-rawdata></mq-rawdata>-->\n\n\n\n  <ion-content id="sidebar-app" class="outer-content cpage">\n\n    <!--<ion-card class="card-side" color="primary">\n\n      <div class="card-title">Tantowi Jauhari</div>\n\n      <div class="card-subtitle"></div>\n\n    </ion-card>-->\n\n\n\n    <ion-list>\n\n      <ion-list-header class="tp">\n\n        Navigate\n\n      </ion-list-header>\n\n      <button class="tp" ion-item menuClose *ngFor="let p of appPages" (click)="openPage(p)">\n\n        <ion-icon item-left [name]="p.icon"></ion-icon>\n\n        \n\n        <ion-badge class="notif-pemanduan" item-right color="danger" *ngIf="(p.title==\'SPK Hari Ini\') && (notif==true)">\n\n          <ion-icon name="notifications"></ion-icon>\n\n        </ion-badge>\n\n        {{p.title}}\n\n      </button>\n\n    </ion-list>\n\n\n\n    <ion-list>\n\n      <ion-list-header class="tp">\n\n        Account\n\n      </ion-list-header>\n\n      <button class="tp" ion-item menuClose *ngFor="let p of loggedInPages" (click)="openPage(p)">\n\n        <ion-icon item-left [name]="p.icon"></ion-icon>\n\n        {{p.title}}\n\n      </button>\n\n    </ion-list>\n\n\n\n    <ion-list>\n\n      <ion-list-header class="tp">\n\n        App Version\n\n      </ion-list-header>\n\n      <button class="tp" ion-item>\n\n        <ion-icon item-left [name]="apps"></ion-icon>\n\n        Version : {{config.version}}\n\n      </button>\n\n    </ion-list>\n\n\n\n\n\n  </ion-content>\n\n\n\n</ion-menu>\n\n\n\n<ion-nav [root]="rootPage" #content swipeBackEnabled="false"></ion-nav>'/*ion-inline-end:"G:\Ionic\pandu\vasa-mobile-pandu-dev\src\app\app.html"*/,
        providers: [
            __WEBPACK_IMPORTED_MODULE_23__services_mqtt_mqtt_service__["a" /* MQTTService */],
            __WEBPACK_IMPORTED_MODULE_22__services_config_config_service__["a" /* ConfigService */],
            __WEBPACK_IMPORTED_MODULE_21__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */],
            __WEBPACK_IMPORTED_MODULE_20__providers_spk_data__["a" /* SpkData */]
        ]
    }),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["o" /* Platform */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["j" /* MenuController */],
        __WEBPACK_IMPORTED_MODULE_16__providers_notification__["a" /* Notification */],
        __WEBPACK_IMPORTED_MODULE_17__providers_user_data__["a" /* UserData */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_7__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_18__providers_pnetwork__["a" /* Pnetwork */],
        __WEBPACK_IMPORTED_MODULE_19__providers_location_tracker__["a" /* LocationTracker */],
        __WEBPACK_IMPORTED_MODULE_8__ionic_cloud_angular__["b" /* Deploy */],
        __WEBPACK_IMPORTED_MODULE_5__ionic_native_local_notifications__["a" /* LocalNotifications */],
        __WEBPACK_IMPORTED_MODULE_3__ionic_native_splash_screen__["a" /* SplashScreen */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_native_status_bar__["a" /* StatusBar */],
        __WEBPACK_IMPORTED_MODULE_6__ionic_native_badge__["a" /* Badge */],
        __WEBPACK_IMPORTED_MODULE_4__ionic_native_background_mode__["a" /* BackgroundMode */],
        __WEBPACK_IMPORTED_MODULE_22__services_config_config_service__["a" /* ConfigService */],
        __WEBPACK_IMPORTED_MODULE_24__config_app_config__["a" /* AppConfig */],
        __WEBPACK_IMPORTED_MODULE_20__providers_spk_data__["a" /* SpkData */],
        __WEBPACK_IMPORTED_MODULE_21__providers_sqlite_service_sqlite_service__["a" /* SqliteServiceProvider */]])
], PanduApp);

//# sourceMappingURL=app.component.js.map

/***/ }),

/***/ 87:
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return UserData; });
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__angular_core__ = __webpack_require__(0);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_ionic_angular__ = __webpack_require__(11);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__ionic_storage__ = __webpack_require__(14);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__angular_http__ = __webpack_require__(42);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__ = __webpack_require__(32);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_rxjs_add_operator_map__);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__services_mqtt__ = __webpack_require__(157);
/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__config_app_config__ = __webpack_require__(49);
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
var __metadata = (this && this.__metadata) || function (k, v) {
    if (typeof Reflect === "object" && typeof Reflect.metadata === "function") return Reflect.metadata(k, v);
};







var UserData = (function () {
    function UserData(events, storage, http, alertCtrl, _mqttService, appConfig) {
        this.events = events;
        this.storage = storage;
        this.http = http;
        this.alertCtrl = alertCtrl;
        this._mqttService = _mqttService;
        this.appConfig = appConfig;
        this._favorites = [];
        this.HAS_LOGGED_IN = 'hasLoggedIn';
        // private sufApi = "api/mobile";
        this.sufApi = "vasa-jboss-perencanaanPandu/mobile";
        this.spkApiUrl = "";
        this.spkApiUrl = this.appConfig.apiBaseUrl + this.sufApi;
    }
    UserData.prototype.hasFavorite = function (sessionName) {
        return (this._favorites.indexOf(sessionName) > -1);
    };
    UserData.prototype.addFavorite = function (sessionName) {
        this._favorites.push(sessionName);
    };
    UserData.prototype.removeFavorite = function (sessionName) {
        var index = this._favorites.indexOf(sessionName);
        if (index > -1) {
            this._favorites.splice(index, 1);
        }
    };
    UserData.prototype.login = function (username, password) {
        var _this = this;
        var body = JSON.stringify({
            "username": username,
            "password": password
        });
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["d" /* RequestOptions */]({ headers: headers });
        // return this.http.post(`${this.appConfig.apiBaseUrl}/api/auth/login`, body, options)
        return this.http.post(this.appConfig.apiBaseUrl + "/vasa-jboss-auth/auth/login", body, options)
            .map(function (res) {
            //console.log("Response headers",res.headers);
            return res.json();
        })
            .subscribe(function (data) {
            localStorage.setItem('kodeterminal', data.kdterminal);
            localStorage.setItem('kodecabang', data.kdcabang);
            localStorage.setItem('x-token', data.sandi);
            if (data.responType == "E-002") {
                _this.events.publish('user:erroruser', data.responText);
                var alert_1 = _this.alertCtrl.create({
                    title: 'Login Error..',
                    message: data.responText,
                    buttons: ['Dismiss']
                });
                alert_1.present();
            }
            else if (data.responType == "S") {
                var portalProfile = data;
                _this.getProfile(username).then(function (data) {
                    _this.storage.set('profile', data);
                    _this.storage.set('portalProfile', portalProfile);
                    _this.events.publish('user:successlogin', data.responText);
                    _this.setUsername(username);
                    _this.events.publish('user:login', username);
                    _this.storage.set(_this.HAS_LOGGED_IN, true);
                }).catch(function (err) {
                    var alert = _this.alertCtrl.create({
                        title: 'Login Error..',
                        message: "Profile tidak tersedia",
                        buttons: ['Dismiss']
                    });
                    alert.present();
                });
            }
            else {
                var alert_2 = _this.alertCtrl.create({
                    title: 'Login Error..',
                    message: data.responText,
                    buttons: ['Dismiss']
                });
                alert_2.present();
            }
        }, function (err) {
            var alert = _this.alertCtrl.create({
                title: 'Login Error..',
                message: err,
                buttons: ['Dismiss']
            });
            alert.present();
        });
    };
    UserData.prototype.signup = function (username) {
        this.storage.set(this.HAS_LOGGED_IN, true);
        this.setUsername(username);
        this.events.publish('user:signup');
    };
    UserData.prototype.logout = function () {
        this.storage.remove(this.HAS_LOGGED_IN);
        this.storage.remove('username');
        this.storage.remove('profile');
        this.storage.remove('network_status');
        this.storage.remove('notif_spk');
        this.storage.remove('portalProfile');
        ;
        this.storage.remove('panduid');
        this.storage.remove('notifWorking');
        this.storage.remove('last_state');
        this.storage.remove('last_state2');
        this.storage.remove('hasLoggedIn');
        this.storage.remove('v_worker2');
        localStorage.clear();
        this._mqttService.disconnect();
        this.events.publish('user:logout');
    };
    UserData.prototype.setUsername = function (username) {
        this.storage.set('username', username);
        localStorage.setItem("username", username);
    };
    UserData.prototype.getUsername = function () {
        var _this = this;
        return this.storage.get('username').then(function (username) {
            _this.s_username = username;
            return username;
        });
    };
    // return a promise
    UserData.prototype.hasLoggedIn = function () {
        return this.storage.get(this.HAS_LOGGED_IN).then(function (value) {
            return value;
        });
    };
    UserData.prototype.getProfile = function (username) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]();
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/profile/" + username, { headers: headers })
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserData.prototype.absenMasuk = function (username) {
        var body = JSON.stringify({
            "kodeCabang": localStorage.getItem('kodeterminal'),
            "username": username
        });
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["d" /* RequestOptions */]({ headers: headers });
        console.log(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/absen_masuk");
        return this.http.post(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/absen_masuk", body, options)
            .map(function (res) { return res.json(); }).toPromise();
    };
    UserData.prototype.absenOff = function (username, alasanOff) {
        var body = JSON.stringify({
            "kodeCabang": localStorage.getItem('kodeterminal'),
            "username": username,
            "alasanOff": alasanOff
        });
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        var options = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["d" /* RequestOptions */]({ headers: headers });
        console.log(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/absen_pulang");
        return this.http.post(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/absen_pulang", body, options)
            .map(function (res) {
            //console.log("Response headers",res.headers);
            return res.json();
        }).toPromise();
    };
    UserData.prototype.getAbsen = function (username) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]();
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/status_absen/" + username, { headers: headers })
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserData.prototype.getAbsenPanduMyIntan = function (nip) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]();
        var nip = nip;
        // console.log(`${this.appConfig.apiBaseUrl}/api/public/absensi_pandu/getAbsensiPanduIfExist?nip=${nip}`);
        // return this.http.get(`${this.appConfig.apiBaseUrl}/api/public/absensi_pandu/getAbsensiPanduIfExist?nip=${nip}`, {headers:headers}) 
        console.log(this.appConfig.apiBaseUrl + "/vasa-jboss-perencanaanPandu/public/absensi_pandu/getAbsensiPanduIfExist?nip=" + nip);
        return this.http.get(this.appConfig.apiBaseUrl + "/vasa-jboss-perencanaanPandu/public/absensi_pandu/getAbsensiPanduIfExist?nip=" + nip, { headers: headers })
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserData.prototype.putKesediaanPanduOn = function (id) {
        var body = JSON.stringify(id);
        // let url = `${this.appConfig.apiBaseUrl}/api/public/absensi_pandu/kesediaan_on/${id}`;
        var url = this.appConfig.apiBaseUrl + "/vasa-jboss-perencanaanPandu/public/absensi_pandu/kesediaan_on/" + id;
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        console.debug("DEBUG -> putKesediaanPanduOn", url, body);
        return this.http
            .put(url, body, { headers: headers })
            .map(function (res) { return res; })
            .toPromise();
    };
    UserData.prototype.putKesediaanPanduOff = function (id) {
        var body = JSON.stringify(id);
        // let url = `${this.appConfig.apiBaseUrl}/api/public/absensi_pandu/kesediaan_off/${id}`;
        var url = this.appConfig.apiBaseUrl + "/vasa-jboss-perencanaanPandu/public/absensi_pandu/kesediaan_off/" + id;
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]({ 'Content-Type': 'application/json' });
        console.debug("DEBUG -> putKesediaanPanduOff", url, body);
        return this.http
            .put(url, body, { headers: headers })
            .map(function (res) { return res; })
            .toPromise();
    };
    UserData.prototype.getListPetugasPandu = function (username) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]();
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/list_absen_today/" + username, { headers: headers })
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    UserData.prototype.getJadwalShiftGroupPandu = function (username) {
        var headers = new __WEBPACK_IMPORTED_MODULE_3__angular_http__["a" /* Headers */]();
        return this.http.get(this.appConfig.apiBaseUrl + "/" + this.sufApi + "/petugas_pandu/jadwal_shift_group_pandu/" + username, { headers: headers })
            .map(function (res) { return res.json(); })
            .toPromise();
    };
    return UserData;
}());
UserData = __decorate([
    Object(__WEBPACK_IMPORTED_MODULE_0__angular_core__["Injectable"])(),
    __metadata("design:paramtypes", [__WEBPACK_IMPORTED_MODULE_1_ionic_angular__["d" /* Events */],
        __WEBPACK_IMPORTED_MODULE_2__ionic_storage__["b" /* Storage */],
        __WEBPACK_IMPORTED_MODULE_3__angular_http__["b" /* Http */],
        __WEBPACK_IMPORTED_MODULE_1_ionic_angular__["a" /* AlertController */],
        __WEBPACK_IMPORTED_MODULE_5__services_mqtt__["a" /* MQTTService */],
        __WEBPACK_IMPORTED_MODULE_6__config_app_config__["a" /* AppConfig */]])
], UserData);

//# sourceMappingURL=user-data.js.map

/***/ })

},[739]);
//# sourceMappingURL=main.js.map